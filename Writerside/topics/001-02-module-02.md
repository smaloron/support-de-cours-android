Parfait, continuons sur notre lanc√©e ! Maintenant que notre atelier est pr√™t, il est temps de dessiner les premiers
plans et de poser la toute premi√®re brique de notre √©difice.

Voici le deuxi√®me module.

---

# Module 2 : Votre Premi√®re Application Android

### Objectifs p√©dagogiques

√Ä la fin de ce module, vous serez capable de :

* Cr√©er un nouveau projet Android avec Android Studio.
* Identifier le r√¥le de chaque fichier et dossier majeur dans un projet.
* Comprendre le lien fondamental entre le code Kotlin (`.kt`) et les fichiers de mise en page XML (`.xml`).
* Lancer votre application sur un √©mulateur ou un appareil physique.
* Utiliser l'outil de d√©bogage essentiel : le Logcat.

### Introduction

Vous souvenez-vous de la premi√®re fois que vous avez allum√© un ordinateur et affich√© "Hello, World!" √† l'√©cran ? C'√©tait
un moment magique, la preuve que vous pouviez communiquer avec la machine. Ce module a le m√™me objectif. Cr√©er une
application "Hello, World!" sur Android n'est pas juste une tradition. C'est le test ultime pour s'assurer que toute la
cha√Æne de production fonctionne : votre IDE, le compilateur, l'√©mulateur et le syst√®me d'exploitation Android lui-m√™me.
C'est l'√©tincelle qui donne vie √† votre projet. Nous allons d√©cortiquer cette premi√®re application pour comprendre ses
plans, ses fondations et sa structure. Pr√©parez-vous √† ce premier moment magique !

### Notions abord√©es

* Cr√©ation d'un projet "Hello World!"
* Anatomie d'un projet Android
* Lancement de l'application
* Le Logcat : votre premier outil de d√©bogage

---

### Cr√©ation d'un projet "Hello World!"

#### Introduction √† la notion

Imaginez que vous demandez √† un assistant de vous pr√©parer un kit de d√©marrage pour construire une petite cabane. Vous
lui donnez quelques informations de base (le nom du projet, l'endroit o√π le stocker) et il vous fournit un ensemble de
plans et de mat√©riaux pr√©-assembl√©s. L'assistant de cr√©ation de projet d'Android Studio joue exactement ce r√¥le : il
vous √©vite de commencer avec une feuille blanche et vous donne une structure saine et fonctionnelle.

#### Explication de la notion

Android Studio propose des mod√®les (*templates*) pour acc√©l√©rer la cr√©ation de projets. Pour nos d√©buts, le mod√®le **"
Empty Views Activity"** (ou "Activit√© Vide avec Vues") est parfait. Il cr√©e une application minimale avec un seul √©cran,
ce qui est id√©al pour comprendre les bases.

<procedure title="Cr√©er un nouveau projet">

1. Depuis l'√©cran de bienvenue d'Android Studio, cliquez sur **"New Project"**.
2. Dans la section "Phone and Tablet", s√©lectionnez **"Empty Views Activity"** et cliquez sur "Next".
3. Vous arrivez sur l'√©cran de configuration. Remplissez les champs suivants :
    * **Name:** `HelloWorldApp`. C'est le nom de votre application tel qu'il appara√Ætra √† l'utilisateur.
    * **Package name:** `fr.formation.helloworldapp`. C'est l'identifiant unique de votre application sur le Google Play
      Store. Il est conventionnellement en format de nom de domaine invers√©.
    * **Save location:** Choisissez un dossier sur votre ordinateur o√π enregistrer le projet.
    * **Language:** Assurez-vous que **Kotlin** est s√©lectionn√©. C'est le langage moderne que nous utiliserons.
    * **Minimum SDK:** S√©lectionnez un niveau d'API, par exemple **API 26: Android 8.0 (Oreo)**. Cela d√©finit la version
      minimale d'Android requise.
4. Cliquez sur **"Finish"**. Android Studio va maintenant pr√©parer votre projet. Cela peut prendre un peu de temps la
   premi√®re fois, car il t√©l√©charge des outils (comme Gradle).

</procedure>

<tip>
La premi√®re synchronisation Gradle peut √™tre longue. Surveillez la barre d'√©tat en bas de la fen√™tre d'Android Studio. Attendez qu'elle indique "Gradle sync finished" avant de continuer.
</tip>

---

### Anatomie d'un projet Android

#### Introduction √† la notion {id="introduction-la-notion_1"}

Votre projet fra√Æchement cr√©√© est comme une bo√Æte √† outils parfaitement organis√©e. Chaque tiroir et chaque compartiment
a un but pr√©cis. Il y a un tiroir pour les plans (`AndroidManifest.xml`), un pour les instructions (`kotlin`), un pour
les mat√©riaux de construction (`res`), et un pour la liste des fournisseurs (`build.gradle`). Comprendre cette
organisation est la cl√© pour ne jamais se perdre et travailler efficacement.

#### Explication de la notion {id="explication-de-la-notion_1"}

Dans le volet de gauche d'Android Studio (la vue "Project"), assurez-vous que le menu d√©roulant est bien sur **"Android"
**. Cela vous donne une vue simplifi√©e et logique des fichiers importants.

```plantuml
@startuml
title Structure simplifi√©e d'un projet Android

package "HelloWorldApp" {
  node "Scripts Gradle" as Gradle {
    file "build.gradle.kts (Module :app)" as AppGradle
    note right: Gestion des d√©pendances et de la config de l'app
  }

  package "app" {
    file "AndroidManifest.xml" as Manifest
    note left: Carte d'identit√© de l'application

    folder "kotlin" {
      folder "fr.formation.helloworldapp" {
        file "MainActivity.kt" as Code
        note right: La logique de notre √©cran
      }
    }

    folder "res" {
      folder "drawable"
      folder "layout" {
        file "activity_main.xml" as Layout
        note right: Le design de notre √©cran
      }
      folder "values" {
        file "strings.xml" as Strings
        note left: Les textes de l'application
      }
    }
  }

  Manifest ..> Code : D√©clare l'Activity
  Code ..> Layout : Affiche le layout
  Layout ..> Strings : Utilise une ressource texte
}
@enduml
```

**1. `AndroidManifest.xml` : La carte d'identit√©**

Ce fichier est la premi√®re chose que le syst√®me Android lit. Il d√©crit les informations essentielles de votre
application :

* Son nom et son ic√¥ne.
* Ses composants (√©crans, services en arri√®re-plan...).
* Les permissions dont elle a besoin (acc√®s √† internet, √† la cam√©ra, etc.).

```xml
<!-- Fichier : app/src/main/AndroidManifest.xml -->

<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          xmlns:tools="http://schemas.android.com/tools">

    <application
            android:allowBackup="true"
            android:icon="@mipmap/ic_launcher"
            android:label="@string/app_name"
            android:roundIcon="@mipmap/ic_launcher_round"
            android:supportsRtl="true"
            android:theme="@style/Theme.HelloWorldApp"
            tools:targetApi="31">

        <!-- D√©claration de notre unique √©cran (Activity) -->
        <activity
                android:name=".MainActivity"
                android:exported="true">
            <intent-filter>
                <!-- Indique que c'est l'activit√© principale... -->
                <action android:name="android.intent.action.MAIN"/>
                <!-- ...et qu'elle doit appara√Ætre dans le lanceur d'apps. -->
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>
    </application>

</manifest>
```

**2. Dossier `kotlin` : Le cerveau**

C'est ici que vit votre code logique. Par d√©faut, vous y trouverez `MainActivity.kt`. Une **Activity** repr√©sente un
seul √©cran de votre application. Ce fichier contr√¥le le comportement de cet √©cran.

```kotlin
// Fichier : app/src/main/java/fr/formation/helloworldapp/MainActivity.kt

package fr.formation.helloworldapp // D√©claration du package

// Imports des classes n√©cessaires du framework Android
import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle

// Notre classe MainActivity h√©rite de AppCompatActivity, la classe de base
// pour les activit√©s qui veulent utiliser les fonctionnalit√©s modernes.
class MainActivity : AppCompatActivity() {

    // Cette m√©thode est appel√©e lorsque l'activit√© est cr√©√©e.
    // C'est ici que l'on fait la configuration initiale.
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState) // Appel √† la m√©thode parente

        // C'est la ligne la plus importante !
        // Elle dit √† l'activit√© d'afficher l'interface utilisateur
        // d√©finie dans le fichier res/layout/activity_main.xml
        setContentView(R.layout.activity_main)
    }
}
```

**3. Dossier `res` (Ressources) : Le coffre √† mat√©riaux**

Ce dossier contient tout ce qui n'est pas du code Kotlin :

* `res/layout/activity_main.xml` : La description **visuelle** de votre √©cran. C'est du XML qui d√©finit les boutons,
  textes, images, etc.
* `res/values/strings.xml` : Le fichier pour centraliser tous les textes de votre application. C'est une **bonne
  pratique** pour faciliter la traduction et la maintenance.
* `res/values/colors.xml` : Pour d√©finir les couleurs de votre application.
* `res/drawable` : Pour stocker vos images et ic√¥nes.

```xml
<!-- Fichier : app/src/main/res/layout/activity_main.xml -->

<androidx.constraintlayout.widget.ConstraintLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        tools:context=".MainActivity">

    <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Hello World!" <!-- Le texte affich√© -->
    app:layout_constraintBottom_toBottomOf="parent"
    app:layout_constraintEnd_toEndOf="parent"
    app:layout_constraintStart_toStartOf="parent"
    app:layout_constraintTop_toTopOf="parent" />

</androidx.constraintlayout.widget.ConstraintLayout>
```

**4. Scripts Gradle (`build.gradle.kts`) : Le gestionnaire de construction**

Ces fichiers d√©finissent comment votre application est construite. Le plus important est
`build.gradle.kts (Module :app)`. Il contient :

* Le `minSdkVersion` et le `targetSdkVersion`.
* La liste des **d√©pendances** : les biblioth√®ques externes que votre projet utilise.

#### Exercice 1 : Modifier le message d'accueil

**√ânonc√© :**
Votre mission est de changer le texte "Hello World!" par "Bonjour le monde !". Attention, vous ne devez **pas** modifier
le fichier `activity_main.xml` directement. Vous devez utiliser le syst√®me de ressources.

**Correction exercice 1** {collapsible='true'}
<procedure title="Correction">
1.  Dans l'explorateur de projet, ouvrez le dossier `res > values`.
2.  Double-cliquez sur le fichier `strings.xml` pour l'ouvrir.
3.  Vous verrez une ligne comme celle-ci :
    ```xml
    <resources>
        <string name="app_name">HelloWorldApp</string>
    </resources>
    ```
4.  Dans le fichier `activity_main.xml`, le `TextView` a son texte √©crit en dur : `android:text="Hello World!"`. Nous allons changer cela.
5.  D'abord, ajoutez une nouvelle cha√Æne de caract√®res dans `strings.xml` :
    ```xml
    <resources>
        <string name="app_name">HelloWorldApp</string>
        <string name="welcome_message">Bonjour le monde !</string>
    </resources>
    ```
6.  Ensuite, retournez dans `activity_main.xml`. Remplacez l'attribut `android:text` du `TextView` par une r√©f√©rence √† votre nouvelle ressource :

```xml
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/welcome_message" <!-- On utilise la ressource -->
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent" />
```

8. En faisant cela, vous avez respect√© la bonne pratique de s√©paration des textes et de l'interface.
</procedure>

---

### Lancement de l'application

#### Introduction √† la notion {id="introduction-la-notion_2"}

Maintenant que les plans sont pr√™ts et les mat√©riaux en place, il est temps de lancer la construction et de livrer le
produit fini sur le terrain (votre √©mulateur ou t√©l√©phone). Lancer l'application, c'est appuyer sur le "gros bouton
vert" qui dit √† Android Studio : "Compile tout √ßa et montre-moi le r√©sultat !".

#### Explication de la notion {id="explication-de-la-notion_2"}

En haut de la fen√™tre d'Android Studio, vous trouverez une barre d'outils avec les contr√¥les principaux :

1. **Le s√©lecteur d'appareil :** Un menu d√©roulant qui liste tous vos AVD et appareils physiques connect√©s.
2. **Le bouton Run (‚ñ∂Ô∏è) :** Compile et installe l'application sur l'appareil s√©lectionn√©.
3. **Le bouton Debug (üêû) :** Fait la m√™me chose, mais attache le d√©bogueur pour vous permettre de mettre des points
   d'arr√™t et d'inspecter votre code pas √† pas.

<procedure title="Lancer l'application">

1. Assurez-vous que l'√©mulateur que vous avez cr√©√© au module 1 est en cours d'ex√©cution, ou que votre t√©l√©phone est bien
   connect√©.
2. S√©lectionnez votre appareil cible dans le menu d√©roulant.
3. Cliquez sur le bouton vert **"Run 'app'"** (‚ñ∂Ô∏è).
4. Android Studio va compiler votre projet. Vous pouvez voir la progression dans la barre d'√©tat en bas.
5. Une fois termin√©, l'application se lancera automatiquement sur votre appareil et vous devriez voir votre message "
   Bonjour le monde !".

</procedure>

---

### Le Logcat

#### Introduction √† la notion {id="introduction-la-notion_3"}

Le Logcat est votre talkie-walkie branch√© sur les communications internes de votre application. Quand vous lancez votre
app, elle commence √† "parler". Elle dit "Je me lance", "Je cr√©e cet √©cran", etc. Le syst√®me Android parle aussi. Le
Logcat vous permet d'√©couter toutes ces conversations en temps r√©el et, surtout, d'envoyer vos propres messages pour
suivre ce que fait votre code. C'est l'outil de d√©bogage le plus simple et le plus indispensable.

#### Explication de la notion {id="explication-de-la-notion_3"}

La fen√™tre Logcat est accessible via l'onglet en bas d'Android Studio. Elle affiche un flux de messages provenant de
votre appareil. Pour ne pas √™tre submerg√©, vous pouvez filtrer les messages pour n'afficher que ceux de votre
application.

Pour √©crire dans le Logcat depuis votre code, vous utilisez la classe `Log`. Elle propose plusieurs niveaux de
messages :

* `Log.v()` (Verbose)
* `Log.d()` (Debug)
* `Log.i()` (Info)
* `Log.w()` (Warning)
* `Log.e()` (Error)

En d√©veloppement, on utilise tr√®s souvent `Log.d()` pour tracer le d√©roulement du code.

```plantuml
@startuml
title S√©quence d'un message Logcat

actor Developer as Dev
participant "MainActivity.kt" as Activity
participant "Android Logging System" as Logger
participant "Logcat Window" as Logcat

Dev -> Activity : Ajoute Log.d("TAG", "Message")
Dev -> Logcat : Lance l'application

activate Activity
Activity -> Logger : onCreate() est appel√©e
Activity -> Logger : Log.d("MainActivity", "L'activit√© est cr√©√©e !")
deactivate Activity

activate Logger
Logger -> Logcat : Transmet le message
deactivate Logger

activate Logcat
Logcat -> Dev : Affiche [MainActivity]: L'activit√© est cr√©√©e !
deactivate Logcat

@enduml
```

#### Exercice 2 : Laisser une trace dans le Logcat

**√ânonc√© :**
Modifiez le fichier `MainActivity.kt` pour ajouter un message de debug dans la m√©thode `onCreate`. Le message doit
√™tre "L'application HelloWorldApp a d√©marr√© !".

**Correction exercice 2** {collapsible='true'}
<procedure title="Correction">

1.  Ouvrez le fichier `MainActivity.kt`.

2. Importez la classe `Log` en ajoutant cette ligne en haut du fichier, avec les autres imports :
    
```kotlin
    import android.util.Log
```

3. Dans la m√©thode `onCreate`, apr√®s l'appel √† `super.onCreate(savedInstanceState)`, ajoutez la ligne suivante :
    ```kotlin
    Log.d("MainActivity", "L'application HelloWorldApp a d√©marr√© !")
    ```
    Le premier param√®tre, `"MainActivity"`, est un "TAG". Il sert √† filtrer et identifier facilement l'origine du message.

4. Votre m√©thode `onCreate` devrait maintenant ressembler √† √ßa :
    ```kotlin
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)

        // Notre message de log personnalis√©
        Log.d("MainActivity", "L'application HelloWorldApp a d√©marr√© !")

        setContentView(R.layout.activity_main)
    }
    ```

5. Lancez √† nouveau l'application (‚ñ∂Ô∏è).
6. Ouvrez l'onglet **Logcat** en bas d'Android Studio.
7. Dans la barre de recherche du Logcat, tapez `MainActivity` pour filtrer par TAG.
8. Vous devriez voir votre message s'afficher clairement.

</procedure>

---

### TP 2 : Du "Hello World" √† une application personnalis√©e

**Objectif :** Utiliser toutes les notions vues pour personnaliser enti√®rement votre premi√®re application.

<procedure>

1. **Cr√©ez un nouveau projet** nomm√© `MonAppDeBienvenue`.
2. **Modifiez le nom de l'application :** Allez dans `res/values/strings.xml` et changez la valeur de `app_name` pour "
   Ma Super App".
3. **Cr√©ez une nouvelle ressource de texte :** Dans ce m√™me fichier, ajoutez une nouvelle string nomm√©e `welcome_text`
   avec la valeur "Bienvenue dans ma premi√®re application, [Votre Nom]". Remplacez `[Votre Nom]` par votre pr√©nom.
4. **Liez ce texte √† l'interface :** Ouvrez `res/layout/activity_main.xml`. Modifiez le `TextView` pour qu'il utilise
   votre nouvelle ressource de texte `@string/welcome_text`.
5. **Ajoutez un message de log :** Ouvrez `MainActivity.kt`. Dans la m√©thode `onCreate`, ajoutez un `Log.d` avec le
   TAG "MonApp" et le message "L'√©cran principal s'est charg√©.".
6. **Lancez l'application :**
    * V√©rifiez que le titre de l'application (dans la barre en haut) est bien "Ma Super App".
    * V√©rifiez que le texte affich√© √† l'√©cran contient bien votre nom.
    * Ouvrez le Logcat, filtrez par le TAG "MonApp", et confirmez que votre message est bien pr√©sent.

</procedure>

---

### Auto-√©valuation

**1. Quel est le r√¥le principal du fichier `AndroidManifest.xml` ? (QCM)**

* A) D√©finir l'apparence visuelle de l'application.
* B) Contenir la logique de programmation en Kotlin.
* C) D√©crire les informations essentielles de l'application pour le syst√®me Android.
* D) Lister les biblioth√®ques externes utilis√©es par le projet.

**2. Comment lie-t-on un fichier de layout XML √† une Activity en Kotlin ? (QCM)**

* A) En utilisant la fonction `showLayout(R.id.my_layout)`.
* B) En ajoutant un attribut `android:activity=".MainActivity"` dans le XML.
* C) En utilisant la fonction `setContentView(R.layout.activity_main)`.
* D) En important simplement le fichier XML dans le fichier Kotlin.

**3. O√π est le meilleur endroit pour d√©finir une couleur qui sera utilis√©e √† plusieurs endroits dans votre
application ? (QCM)**

* A) Directement dans le fichier `activity_main.xml`.
* B) Dans une variable globale dans `MainActivity.kt`.
* C) Dans le fichier `res/values/colors.xml`.
* D) Dans le fichier `build.gradle.kts`.

**4. Expliquez avec vos mots l'int√©r√™t de mettre les textes (comme "Bonjour le monde !") dans `strings.xml` plut√¥t que
directement dans le fichier de layout. (Question ouverte)**

**5. Quel est le but du Logcat et quelle ligne de code utiliseriez-vous pour afficher un message de d√©bogage simple avec
le tag "MyScreen" ? (Question ouverte)**

### Correction de l'auto-√©valuation {collapsible="true"}

**1. Quel est le r√¥le principal du fichier `AndroidManifest.xml` ?**

* **R√©ponse : C) D√©crire les informations essentielles de l'application pour le syst√®me Android.**
* **Justification :** Le manifest est la "carte d'identit√©" de l'application. Il d√©clare ses composants, ses
  permissions, etc., pour que le syst√®me d'exploitation sache comment l'ex√©cuter.

**2. Comment lie-t-on un fichier de layout XML √† une Activity en Kotlin ?**

* **R√©ponse : C) En utilisant la fonction `setContentView(R.layout.activity_main)`.**
* **Justification :** C'est la fonction appel√©e dans `onCreate` qui "gonfle" (inflate) le layout XML et l'affiche √† l'
  √©cran, le liant ainsi √† l'Activity. `R` est une classe g√©n√©r√©e automatiquement qui contient les identifiants de toutes
  vos ressources.

**3. O√π est le meilleur endroit pour d√©finir une couleur qui sera utilis√©e √† plusieurs endroits dans votre application ?
**

* **R√©ponse : C) Dans le fichier `res/values/colors.xml`.**
* **Justification :** Le dossier `res/values` est fait pour centraliser les ressources. D√©finir une couleur dans
  `colors.xml` vous permet de la r√©utiliser partout et de la changer en un seul endroit.

**4. Expliquez avec vos mots l'int√©r√™t de mettre les textes (comme "Bonjour le monde !") dans `strings.xml` plut√¥t que
directement dans le fichier de layout.**

* **R√©ponse type :** Centraliser les textes dans `strings.xml` a deux avantages majeurs. Premi√®rement, cela facilite la
  **traduction** (internationalisation) : il suffit de fournir un fichier `strings.xml` diff√©rent pour chaque langue.
  Deuxi√®mement, cela am√©liore la **maintenance** : si un texte doit √™tre modifi√©, on le change √† un seul endroit, m√™me
  s'il est utilis√© sur plusieurs √©crans.

**5. Quel est le but du Logcat et quelle ligne de code utiliseriez-vous pour afficher un message de d√©bogage simple avec
le tag "MyScreen" ?**

* **R√©ponse type :** Le Logcat est un outil qui affiche en temps r√©el les messages syst√®me et les messages que nous
  √©mettons depuis notre application. Son but principal est le **d√©bogage** : suivre le d√©roulement du code, afficher des
  valeurs de variables, et rep√©rer les erreurs. La ligne de code serait :
  `Log.d("MyScreen", "Mon message de d√©bogage ici")`.

---

### Conclusion du module

Bravo ! Vous avez franchi une √©tape majeure. Vous n'avez pas seulement cr√©√© une application, vous en avez diss√©qu√© la
structure. Vous savez maintenant o√π se trouvent les plans, la logique, et les mat√©riaux de construction. Vous savez
comment lancer le projet et, plus important encore, comment l'√©couter parler gr√¢ce au Logcat.

Cette structure de projet est la base de **toutes** les applications Android que vous construirez. La ma√Ætriser d√®s
maintenant vous rendra incroyablement plus efficace pour la suite.

Maintenant que nous avons les fondations, il est temps d'apprendre le langage des b√¢tisseurs : le Kotlin. Dans le
prochain module, nous allons nous plonger dans la syntaxe et les concepts cl√©s de Kotlin qui feront de vous un
d√©veloppeur Android moderne et efficace.