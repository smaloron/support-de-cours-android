<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-11-07T11:26:39.356608"><title>Module 4 : Le C&oelig;ur d'un &Eacute;cran : L'Activity et son Cycle de Vie | Android</title><script type="application/json" id="virtual-toc-data">[{"id":"objectifs-p-dagogiques","level":0,"title":"Objectifs pédagogiques","anchor":"#objectifs-p-dagogiques"},{"id":"introduction","level":0,"title":"Introduction","anchor":"#introduction"},{"id":"notions-abord-es","level":0,"title":"Notions abordées","anchor":"#notions-abord-es"},{"id":"le-concept-de-l-activity","level":0,"title":"Le concept de l\u0027Activity","anchor":"#le-concept-de-l-activity"},{"id":"le-cycle-de-vie-d-taill","level":0,"title":"Le Cycle de Vie Détaillé","anchor":"#le-cycle-de-vie-d-taill"},{"id":"visualisation-pratique-avec-les-logs","level":0,"title":"Visualisation Pratique avec les Logs","anchor":"#visualisation-pratique-avec-les-logs"},{"id":"le-probl-me-de-la-recr-ation-d-activity","level":0,"title":"Le Problème de la Recréation d\u0027Activity","anchor":"#le-probl-me-de-la-recr-ation-d-activity"},{"id":"tp-4-l-application-compteur","level":0,"title":"TP 4 : L\u0027application \"Compteur\"","anchor":"#tp-4-l-application-compteur"},{"id":"auto-valuation","level":0,"title":"Auto-évaluation","anchor":"#auto-valuation"},{"id":"conclusion-du-module","level":0,"title":"Conclusion du module","anchor":"#conclusion-du-module"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Module 4 : Le C&oelig;ur d'un &Eacute;cran : L'Activity et son Cycle de Vie | Android"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Android Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/001-04-module-04.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Module 4 : Le C&oelig;ur d'un &Eacute;cran : L'Activity et son Cycle de Vie | Android"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/001-04-module-04.html#webpage",
    "url": "writerside-documentation/001-04-module-04.html",
    "name": "Module 4 : Le C&oelig;ur d'un &Eacute;cran : L'Activity et son Cycle de Vie | Android",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Android Help"
}</script><!-- End Schema.org --></head><body data-id="001-04-module-04" data-main-title="Module 4 : Le Cœur d'un Écran : L'Activity et son Cycle de Vie" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="001-partie-1.md|Partie 1 : Les Fondations"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Android  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="001-04-module-04" id="001-04-module-04.md">Module 4 : Le Cœur d'un Écran : L'Activity et son Cycle de Vie</h1><section class="chapter"><h2 id="objectifs-p-dagogiques" data-toc="objectifs-p-dagogiques">Objectifs p&eacute;dagogiques</h2><p id="-y5cw8o_13">&Agrave; la fin de ce module, vous serez capable de :</p><ul class="list _bullet" id="-y5cw8o_14"><li class="list__item" id="-y5cw8o_15"><p id="-y5cw8o_19">D&eacute;finir le r&ocirc;le et la responsabilit&eacute; d'une <code class="code" id="-y5cw8o_20">Activity</code>.</p></li><li class="list__item" id="-y5cw8o_16"><p id="-y5cw8o_21">D&eacute;crire les &eacute;tats principaux du cycle de vie d'une <code class="code" id="-y5cw8o_22">Activity</code> (<code class="code" id="-y5cw8o_23">onCreate</code>, <code class="code" id="-y5cw8o_24">onStart</code>, <code class="code" id="-y5cw8o_25">onResume</code>, <code class="code" id="-y5cw8o_26">onPause</code>, <code class="code" id="-y5cw8o_27">onStop</code>, <code class="code" id="-y5cw8o_28">onDestroy</code>).</p></li><li class="list__item" id="-y5cw8o_17"><p id="-y5cw8o_29">Utiliser le Logcat pour visualiser les transitions du cycle de vie en temps r&eacute;el.</p></li><li class="list__item" id="-y5cw8o_18"><p id="-y5cw8o_30">Comprendre et constater le probl&egrave;me de la recr&eacute;ation d'une <code class="code" id="-y5cw8o_31">Activity</code> lors d'un changement de configuration (comme la rotation de l'&eacute;cran).</p></li></ul></section><section class="chapter"><h2 id="introduction" data-toc="introduction">Introduction</h2><p id="-y5cw8o_32">Imaginez un acteur de th&eacute;&acirc;tre. Il ne joue pas en permanence. Il entre en sc&egrave;ne (<code class="code" id="-y5cw8o_34">onStart</code>), il est sous les feux des projecteurs et interagit avec le public (<code class="code" id="-y5cw8o_35">onResume</code>), il se met parfois en retrait lorsqu'un autre acteur prend la parole (<code class="code" id="-y5cw8o_36">onPause</code>), il quitte la sc&egrave;ne (<code class="code" id="-y5cw8o_37">onStop</code>), et &agrave; la fin de la pi&egrave;ce, il rentre chez lui (<code class="code" id="-y5cw8o_38">onDestroy</code>). Sa vie sur sc&egrave;ne est dict&eacute;e par une s&eacute;rie d'&eacute;v&eacute;nements.</p><p id="-y5cw8o_33">Une <code class="code" id="-y5cw8o_39">Activity</code> Android, c'est exactement cet acteur. Elle est le &quot;visage&quot; de votre application pour un &eacute;cran donn&eacute;, mais elle ne contr&ocirc;le pas sa propre existence. C'est le syst&egrave;me d'exploitation Android, le &quot;metteur en sc&egrave;ne&quot;, qui d&eacute;cide quand elle doit appara&icirc;tre, dispara&icirc;tre, ou m&ecirc;me &ecirc;tre d&eacute;truite pour &eacute;conomiser des ressources. Comprendre ce &quot;cycle de vie&quot; est absolument <span class="control" id="-y5cw8o_40">fondamental</span>. C'est la cl&eacute; pour savoir <span class="control" id="-y5cw8o_41">&agrave; quel moment</span> charger des donn&eacute;es, d&eacute;marrer des animations, sauvegarder le travail de l'utilisateur, et &eacute;viter des crashs ou des comportements inattendus.</p></section><section class="chapter"><h2 id="notions-abord-es" data-toc="notions-abord-es">Notions abord&eacute;es</h2><ul class="list _bullet" id="-y5cw8o_42"><li class="list__item" id="-y5cw8o_44"><p id="-y5cw8o_48">Le concept de l'Activity</p></li><li class="list__item" id="-y5cw8o_45"><p id="-y5cw8o_49">Le Cycle de Vie D&eacute;taill&eacute;</p></li><li class="list__item" id="-y5cw8o_46"><p id="-y5cw8o_50">Visualisation Pratique avec les Logs</p></li><li class="list__item" id="-y5cw8o_47"><p id="-y5cw8o_51">Le Probl&egrave;me de la Recr&eacute;ation d'Activity</p></li></ul></section><section class="chapter"><h2 id="le-concept-de-l-activity" data-toc="le-concept-de-l-activity">Le concept de l'Activity</h2><section class="chapter"><h3 id="introduction-la-notion" data-toc="introduction-la-notion">Introduction &agrave; la notion</h3><p id="-y5cw8o_54">Pensez &agrave; votre application comme &agrave; un livre. Chaque page que l'utilisateur peut voir et avec laquelle il peut interagir est une <code class="code" id="-y5cw8o_55">Activity</code>. La page de couverture, la table des mati&egrave;res, un chapitre sp&eacute;cifique... chacune est une <code class="code" id="-y5cw8o_56">Activity</code> distincte. C'est le point d'entr&eacute;e unique pour un &eacute;cran donn&eacute;, le conteneur principal de votre interface utilisateur.</p></section><section class="chapter"><h3 id="explication-de-la-notion" data-toc="explication-de-la-notion">Explication de la notion</h3><p id="-y5cw8o_57">Une <code class="code" id="-y5cw8o_63">Activity</code> (plus pr&eacute;cis&eacute;ment, <code class="code" id="-y5cw8o_64">androidx.appcompat.app.AppCompatActivity</code> dont nous h&eacute;ritons) est l'un des quatre composants applicatifs majeurs d'Android. Son r&ocirc;le principal est de fournir une &quot;fen&ecirc;tre&quot; dans laquelle l'application peut dessiner son interface utilisateur.</p><p id="-y5cw8o_58">Une application est g&eacute;n&eacute;ralement compos&eacute;e de plusieurs activit&eacute;s qui sont li&eacute;es entre elles. Par exemple, une application d'e-mails pourrait avoir :</p><ul class="list _bullet" id="-y5cw8o_59"><li class="list__item" id="-y5cw8o_65"><p id="-y5cw8o_68">Une <code class="code" id="-y5cw8o_69">Activity</code> pour afficher la liste des e-mails.</p></li><li class="list__item" id="-y5cw8o_66"><p id="-y5cw8o_70">Une <code class="code" id="-y5cw8o_71">Activity</code> pour lire un e-mail sp&eacute;cifique.</p></li><li class="list__item" id="-y5cw8o_67"><p id="-y5cw8o_72">Une <code class="code" id="-y5cw8o_73">Activity</code> pour composer un nouvel e-mail.</p></li></ul><p id="-y5cw8o_60">Chaque <code class="code" id="-y5cw8o_74">Activity</code> est une classe Kotlin qui h&eacute;rite de <code class="code" id="-y5cw8o_75">AppCompatActivity</code> et doit &ecirc;tre d&eacute;clar&eacute;e dans le fichier <code class="code" id="-y5cw8o_76">AndroidManifest.xml</code>. C'est dans ce fichier que vous d&eacute;clarez laquelle de vos activit&eacute;s est la &quot;porte d'entr&eacute;e&quot; de l'application (celle qui se lance quand on clique sur l'ic&ocirc;ne).</p><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="313px" preserveAspectRatio="none" style="width:715px;height:313px;background:#FFFFFF;" version="1.1" viewBox="0 0 715 313" width="715px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="144" x="278.5" y="23.5352">Relation Activity-UI</text><!--cluster Application--><g id="cluster_Application"><path d="M8.5,43.4883 L91.5,43.4883 A3.75,3.75 0 0 1 94,45.9883 L101,65.9766 L705.5,65.9766 A2.5,2.5 0 0 1 708,68.4766 L708,304.4783 A2.5,2.5 0 0 1 705.5,306.9783 L8.5,306.9783 A2.5,2.5 0 0 1 6,304.4783 L6,45.9883 A2.5,2.5 0 0 1 8.5,43.4883 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="6" x2="101" y1="65.9766" y2="65.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="82" x="10" y="59.0234">Application</text></g><!--cluster activity_main--><g id="cluster_activity_main"><path d="M32.5,86.4883 L129.5,86.4883 A3.75,3.75 0 0 1 132,88.9883 L139,108.9766 L382.5,108.9766 A2.5,2.5 0 0 1 385,111.4766 L385,280.4783 A2.5,2.5 0 0 1 382.5,282.9783 L32.5,282.9783 A2.5,2.5 0 0 1 30,280.4783 L30,88.9883 A2.5,2.5 0 0 1 32.5,86.4883 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="30" x2="139" y1="108.9766" y2="108.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="96" x="34" y="102.0234">activity_main</text></g><!--cluster xml--><g id="cluster_xml"><rect fill="none" height="113.49" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;" width="291" x="62" y="137.4883"/><polygon fill="none" points="336,142.4883,336,156.4883,348,156.4883,348,148.4883,342,142.4883,336,142.4883" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="342" x2="342" y1="142.4883" y2="148.4883"/><line style="stroke:#181818;stroke-width:1.0;" x1="348" x2="342" y1="148.4883" y2="148.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="27" x="194" y="153.0234">xml</text></g><!--class MainActivity--><g id="elem_MainActivity"><rect codeLine="6" fill="#F1F1F1" height="64.4883" id="MainActivity" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="114" x="578" y="171.4883"/><ellipse cx="593" cy="187.4883" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M595.9731,193.1313 Q595.3921,193.4302 594.7529,193.5796 Q594.1138,193.729 593.4082,193.729 Q590.9014,193.729 589.5815,192.0771 Q588.2617,190.4253 588.2617,187.3042 Q588.2617,184.1748 589.5815,182.5229 Q590.9014,180.8711 593.4082,180.8711 Q594.1138,180.8711 594.7612,181.0205 Q595.4087,181.1699 595.9731,181.4688 L595.9731,184.1914 Q595.3423,183.6104 594.7488,183.3406 Q594.1553,183.0708 593.5244,183.0708 Q592.1797,183.0708 591.4949,184.1375 Q590.8101,185.2041 590.8101,187.3042 Q590.8101,189.396 591.4949,190.4626 Q592.1797,191.5293 593.5244,191.5293 Q594.1553,191.5293 594.7488,191.2595 Q595.3423,190.9897 595.9731,190.4087 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="607" y="192.7793">MainActivity</text><line style="stroke:#181818;stroke-width:0.5;" x1="579" x2="691" y1="203.4883" y2="203.4883"/><line style="stroke:#181818;stroke-width:0.5;" x1="579" x2="691" y1="211.4883" y2="211.4883"/><ellipse cx="589" cy="225.2324" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="598" y="229.0234">onCreate()</text></g><!--entity TextView--><g id="elem_TextView"><rect fill="#F1F1F1" height="46.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="86.5" y="180.4883"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="169.5" y="185.4883"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="167.5" y="187.4883"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="167.5" y="191.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="101.5" y="214.0234">TextView</text></g><!--entity Button--><g id="elem_Button"><rect fill="#F1F1F1" height="46.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="85" x="224.5" y="180.4883"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="289.5" y="185.4883"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="287.5" y="187.4883"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="287.5" y="191.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45" x="239.5" y="214.0234">Button</text></g><!--link MainActivity to xml--><g id="link_MainActivity_xml"><path codeLine="15" d="M577.51,203.7383 C537.085,203.7383 482.165,203.7383 435.8513,203.7383 C412.6944,203.7383 391.6891,203.7383 375.723,203.7383 C367.7399,203.7383 361.0167,203.7383 355.9142,203.7383 C355.2764,203.7383 354.6639,203.7383 354.0774,203.7383 C353.7842,203.7383 359.4975,203.7383 359.2174,203.7383 " fill="none" id="MainActivity-to-xml" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="353.2174,203.7383,362.2174,207.7383,358.2174,203.7383,362.2174,199.7383,353.2174,203.7383" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="392.18" y="131.3066">R.layout.activity_main</text><path d="M367.68,140.0488 L367.68,195.0488 L555.68,195.0488 L555.68,150.0488 L545.68,140.0488 L367.68,140.0488 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M545.68,140.0488 L545.68,150.0488 L555.68,150.0488 L545.68,140.0488 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="373.68" y="157.6172">Le code Kotlin charge</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="373.68" y="172.9277">le fichier de layout XML</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="373.68" y="188.2383">pour construire l'interface.</text></g><!--SRC=[PP11ImD138NlyoiUUr6HxW_eGQYUfEsbg7WeI1ZJRUXiPfdDsYtI_swexQ5w2UIzV2yab5BUjpAADi744cF5YKooOXPDliGEazVd43gAEseOrQphaiJJH8Nl0CH4VOybYLw0ampSPtqgJCQtTzuVWnSg9XkAXehEin-jW_NOfkfCnTnsMLaDBppQc_3-Z_muc6Mz95xjdJpWNowcMDM93dcm-ifqMBCn_D8akfjYmRxbap7FvWBYbah3Q_MNR2HkXGlS_4t2-tAnrYuFnH7jhGnItBiHDIv-8DVX-0C0]--></g></svg></div></section></section><section class="chapter"><h2 id="le-cycle-de-vie-d-taill" data-toc="le-cycle-de-vie-d-taill">Le Cycle de Vie D&eacute;taill&eacute;</h2><section class="chapter"><h3 id="introduction-la-notion_1" data-toc="introduction-la-notion_1">Introduction &agrave; la notion</h3><p id="-y5cw8o_79">Revenons &agrave; notre acteur. Le metteur en sc&egrave;ne lui donne des instructions claires : &quot;Entre en sc&egrave;ne !&quot;, &quot;Prends la lumi&egrave;re !&quot;, &quot;Passe en arri&egrave;re-plan.&quot;, &quot;Sors de sc&egrave;ne.&quot;. Le cycle de vie d'une <code class="code" id="-y5cw8o_80">Activity</code> est la liste de ces instructions. Le syst&egrave;me Android appelle des m&eacute;thodes sp&eacute;cifiques sur votre <code class="code" id="-y5cw8o_81">Activity</code> pour l'informer des changements d'&eacute;tat, vous donnant ainsi l'opportunit&eacute; de r&eacute;agir.</p></section><section class="chapter"><h3 id="explication-de-la-notion_1" data-toc="explication-de-la-notion_1">Explication de la notion</h3><p id="-y5cw8o_82">Le cycle de vie d'une activit&eacute; est d&eacute;fini par une s&eacute;rie de m&eacute;thodes que le syst&egrave;me appelle dans un ordre pr&eacute;cis. Voici les plus importantes :</p><ul class="list _bullet" id="-y5cw8o_83"><li class="list__item" id="-y5cw8o_88"><p id="-y5cw8o_94"><span class="control" id="-y5cw8o_95"><code class="code" id="-y5cw8o_98">onCreate()</code></span>: Appel&eacute;e <span class="control" id="-y5cw8o_96">une seule fois</span> lorsque l'activit&eacute; est cr&eacute;&eacute;e pour la premi&egrave;re fois. C'est ici que vous devez faire toute la configuration statique : cr&eacute;er les vues (avec <code class="code" id="-y5cw8o_97">setContentView()</code>), lier les donn&eacute;es &agrave; des listes, etc.</p></li><li class="list__item" id="-y5cw8o_89"><p id="-y5cw8o_99"><span class="control" id="-y5cw8o_100"><code class="code" id="-y5cw8o_101">onStart()</code></span>: Appel&eacute;e lorsque l'activit&eacute; devient visible pour l'utilisateur.</p></li><li class="list__item" id="-y5cw8o_90"><p id="-y5cw8o_102"><span class="control" id="-y5cw8o_103"><code class="code" id="-y5cw8o_104">onResume()</code></span>: Appel&eacute;e lorsque l'activit&eacute; est au premier plan et que l'utilisateur peut interagir avec elle. C'est l'&eacute;tat &quot;actif&quot;.</p></li><li class="list__item" id="-y5cw8o_91"><p id="-y5cw8o_105"><span class="control" id="-y5cw8o_106"><code class="code" id="-y5cw8o_107">onPause()</code></span>: Appel&eacute;e lorsque l'activit&eacute; est sur le point de passer en arri&egrave;re-plan. Elle est encore visible (par exemple, si une bo&icirc;te de dialogue appara&icirc;t par-dessus), mais n'a plus le focus. C'est le meilleur endroit pour sauvegarder des donn&eacute;es non enregistr&eacute;es ou stopper des animations.</p></li><li class="list__item" id="-y5cw8o_92"><p id="-y5cw8o_108"><span class="control" id="-y5cw8o_109"><code class="code" id="-y5cw8o_110">onStop()</code></span>: Appel&eacute;e lorsque l'activit&eacute; n'est plus visible pour l'utilisateur.</p></li><li class="list__item" id="-y5cw8o_93"><p id="-y5cw8o_111"><span class="control" id="-y5cw8o_112"><code class="code" id="-y5cw8o_113">onDestroy()</code></span>: Appel&eacute;e juste avant que l'activit&eacute; ne soit d&eacute;truite. Cela peut arriver parce que l'utilisateur a termin&eacute; l'activit&eacute; (avec le bouton &quot;retour&quot;) ou parce que le syst&egrave;me a besoin de r&eacute;cup&eacute;rer de la m&eacute;moire.</p></li></ul><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="526px" preserveAspectRatio="none" style="width:1092px;height:526px;background:#FFFFFF;" version="1.1" viewBox="0 0 1092 526" width="1092px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="347" x="365.52" y="23.5352">Diagramme d'&#233;tat du Cycle de Vie d'une Activity</text><g id="Created"><rect fill="#F1F1F1" height="50" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="60" x="908.53" y="328.4883"/><line style="stroke:#181818;stroke-width:0.5;" x1="908.53" x2="968.53" y1="354.9766" y2="354.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="918.53" y="347.0234">Cr&#233;&#233;e</text></g><g id="Started"><rect fill="#F1F1F1" height="50" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="87" x="751.03" y="470.4883"/><line style="stroke:#181818;stroke-width:0.5;" x1="751.03" x2="838.03" y1="496.9766" y2="496.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="761.03" y="489.0234">D&#233;marr&#233;e</text></g><g id="Resumed"><rect fill="#F1F1F1" height="50" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="126" x="197.53" y="44.4883"/><line style="stroke:#181818;stroke-width:0.5;" x1="197.53" x2="323.53" y1="70.9766" y2="70.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="207.53" y="63.0234">Reprise (Active)</text></g><g id="Paused"><rect fill="#F1F1F1" height="50" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="264.03" y="186.4883"/><line style="stroke:#181818;stroke-width:0.5;" x1="264.03" x2="345.03" y1="212.9766" y2="212.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="274.03" y="205.0234">En Pause</text></g><g id="Stopped"><rect fill="#F1F1F1" height="50" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="71" x="449.03" y="328.4883"/><line style="stroke:#181818;stroke-width:0.5;" x1="449.03" x2="520.03" y1="354.9766" y2="354.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="459.03" y="347.0234">Arr&#234;t&#233;e</text></g><ellipse cx="966.53" cy="211.4883" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><ellipse cx="230.53" cy="495.4883" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"/><ellipse cx="230.53" cy="495.4883" fill="#222222" rx="6" ry="6" style="stroke:#222222;stroke-width:1.0;"/><g id="elem_GMN19"><path d="M358.53,49.1783 L358.53,65.4883 L323.88,69.4883 L358.53,73.4883 L358.53,89.7994 A0,0 0 0 0 358.53,89.7994 L560.53,89.7994 A0,0 0 0 0 560.53,89.7994 L560.53,59.1783 L550.53,49.1783 L358.53,49.1783 A0,0 0 0 0 358.53,49.1783 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M550.53,49.1783 L550.53,59.1783 L560.53,59.1783 L550.53,49.1783 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181" x="364.53" y="66.7466">L'activit&#233; est au premier plan</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="364.53" y="82.0572">et interactive.</text></g><g id="elem_GMN22"><path d="M380.03,191.1783 L380.03,207.4883 L345.36,211.4883 L380.03,215.4883 L380.03,231.7994 A0,0 0 0 0 380.03,231.7994 L631.03,231.7994 A0,0 0 0 0 631.03,231.7994 L631.03,201.1783 L621.03,191.1783 L380.03,191.1783 A0,0 0 0 0 380.03,191.1783 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M621.03,191.1783 L621.03,201.1783 L631.03,201.1783 L621.03,191.1783 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="386.03" y="208.7466">L'activit&#233; est partiellement visible</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="230" x="386.03" y="224.0572">mais n'a plus le focus (ex: dialogue).</text></g><g id="elem_GMN25"><path d="M555.03,333.1783 L555.03,349.4883 L520.4,353.4883 L555.03,357.4883 L555.03,373.7994 A0,0 0 0 0 555.03,373.7994 L742.03,373.7994 A0,0 0 0 0 742.03,373.7994 L742.03,343.1783 L732.03,333.1783 L555.03,333.1783 A0,0 0 0 0 555.03,333.1783 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M732.03,333.1783 L732.03,343.1783 L742.03,343.1783 L732.03,333.1783 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="561.03" y="350.7466">L'activit&#233; n'est plus visible</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56" x="561.03" y="366.0572">&#224; l'&#233;cran.</text></g><!--link *start* to Created--><g id="link_*start*_Created"><path d="M964.69,221.6783 C960.42,243.0283 950.886,290.6947 944.576,322.2647 " fill="none" id="*start*-to-Created" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="943.4,328.1483,949.0864,320.1068,944.38,323.2453,941.2416,318.5389,943.4,328.1483" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="959.54" y="280.0566">Lancement de l'app</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="956.04" y="295.3672">(appel &#224;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="71" x="1009.04" y="295.3672">onCreate()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="1080.04" y="295.3672">)</text></g><!--link Created to Started--><g id="link_Created_Started"><path d="M913.45,378.8783 C887.02,404.5683 849.9519,440.6057 823.6319,466.1957 " fill="none" id="Created-to-Started" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="819.33,470.3783,828.5712,466.9724,822.9149,466.8928,822.9944,461.2365,819.33,470.3783" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45" x="880.43" y="429.5566">appel &#224;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="58" x="929.43" y="429.5566">onStart()</text></g><!--link Started to Resumed--><g id="link_Started_Resumed"><path d="M792.85,470.0383 C789.79,436.6683 781.47,375.6183 759.53,328.4883 C725.73,255.8683 706.71,241.5483 648.53,186.4883 C613.52,153.3483 604.43,142.0283 559.53,124.4883 C468.02,88.7483 436.54,115.3283 340.53,94.4883 C335,93.2883 335.1018,93.4278 329.4118,91.9278 " fill="none" id="Started-to-Resumed" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="323.61,90.3983,331.293,96.5603,328.4448,91.6728,333.3323,88.8246,323.61,90.3983" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45" x="745.08" y="287.5566">appel &#224;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="81" x="794.08" y="287.5566">onResume()</text></g><!--link Resumed to Paused--><g id="link_Resumed_Paused"><path d="M197.05,88.5983 C157.09,103.3483 116.83,126.6083 138.53,156.4883 C166.94,195.5983 218.3973,206.4829 257.6773,209.4729 " fill="none" id="Resumed-to-Paused" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="263.66,209.9283,254.9896,205.2567,258.6744,209.5488,254.3824,213.2336,263.66,209.9283" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196" x="139.53" y="138.0566">Une autre activit&#233; passe devant</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="175.53" y="153.3672">(appel &#224;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="67" x="228.53" y="153.3672">onPause()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="295.53" y="153.3672">)</text></g><!--link Paused to Resumed--><g id="link_Paused_Resumed"><path d="M326.28,186.2183 C339.23,168.6783 351.24,144.6383 340.53,124.4883 C334.16,112.4983 328.7273,106.1364 317.5573,98.3264 " fill="none" id="Paused-to-Resumed" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="312.64,94.8883,317.7238,103.3236,316.7377,97.7534,322.308,96.7673,312.64,94.8883" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205" x="345.65" y="138.0566">L'activit&#233; revient au premier plan</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="379.15" y="153.3672">(appel &#224;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="81" x="432.15" y="153.3672">onResume()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="513.15" y="153.3672">)</text></g><!--link Paused to Stopped--><g id="link_Paused_Stopped"><path d="M335.88,236.8783 C368.82,262.4883 415.5841,298.8643 448.4941,324.4643 " fill="none" id="Paused-to-Stopped" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="453.23,328.1483,448.5821,319.4651,449.2834,325.0783,443.6702,325.7796,453.23,328.1483" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="411.65" y="280.0566">L'activit&#233; n'est plus visible</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="438.15" y="295.3672">(appel &#224;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="56" x="491.15" y="295.3672">onStop()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="547.15" y="295.3672">)</text></g><!--link Stopped to Started--><g id="link_Stopped_Started"><path d="M500.71,378.6083 C515.16,398.2483 538.08,425.1283 564.53,440.4883 C623.23,474.5783 696.1873,486.5865 744.6573,491.2265 " fill="none" id="Stopped-to-Started" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="750.63,491.7983,742.0521,486.9588,745.6528,491.3218,741.2898,494.9224,750.63,491.7983" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202" x="565.53" y="422.0566">L'utilisateur revient sur l'activit&#233;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="600.53" y="437.3672">(appel &#224;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="75" x="653.53" y="437.3672">onRestart()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="728.53" y="437.3672">)</text></g><!--link Paused to *end*--><g id="link_Paused_*end*"><path d="M289.39,236.7983 C275.99,259.5883 257.12,295.0583 247.53,328.4883 C231.15,385.5783 230.0456,451.6785 230.2856,478.1485 " fill="none" id="Paused-to-*end*" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="230.34,484.1483,234.2582,475.1124,230.2947,479.1485,226.2586,475.1849,230.34,484.1483" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="248.53" y="358.5566">L'app est tu&#233;e par le syst&#232;me</text></g><!--link Stopped to *end*--><g id="link_Stopped_*end*"><path d="M448.8,368.3383 C440.2,371.6683 431.04,375.2083 422.53,378.4883 C387.88,391.8583 377,390.4583 344.53,408.4883 C301.18,432.5483 260.4437,467.4988 242.7537,483.3888 " fill="none" id="Stopped-to-*end*" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="238.29,487.3983,247.6585,484.3599,242.0097,484.0571,242.3125,478.4083,238.29,487.3983" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="347.53" y="422.0566">L'activit&#233; est d&#233;truite</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="345.53" y="437.3672">(appel &#224;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="79" x="398.53" y="437.3672">onDestroy()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="477.53" y="437.3672">)</text></g><!--link Resumed to *end*--><g id="link_Resumed_*end*"><path d="M197.08,86.2883 C172.5,94.6783 145.33,106.9883 124.53,124.4883 C67.9,172.1483 57.62,195.2483 37.53,266.4883 C6,378.2983 172.0068,466.3895 215.3568,487.3195 " fill="none" id="Resumed-to-*end*" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="220.76,489.9283,214.3944,482.413,216.2573,487.7543,210.9161,489.6173,220.76,489.9283" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="38.53" y="287.5566">L'activit&#233; est d&#233;truite (ex: finish())</text></g><!--SRC=[XLJ1Rjim3BtxAuXU70VeFg270KMoMp0CRRVBjeDcCoa1MHOaAaZ-PiTbl-4V6oLRSU9qwCKGfCV7H_BHJAmHrgHsJhKjGbFs9rOCJO3LiPQd1k4RnVjW41vhfZtniIXAMFUdBHbYweo0FAGuNtZv8jojN7_gJtW7oiFAeTmr-Ka2M-LSVdrcvIvUdz0wyWYBb0khX7b27ze9yyd05nNy49zEvwT78VxB4tTdhJoAt1UdZ4zgVIokpiNj2OllovzmV_yn2uK7s2XJOuk68qINojeVPY5VrD3_XkMoCmDsKIsNLL7am4WorYCaL_Xq7U551aJmMDWSF5mdT94X4JxKAkYlCWmLsCbt64b_0gkyZoNjbU6vsXGuY1qvhhDloed7eVH4AbS1hCEMq87Loimf9urNd6FBPvocHCz24xmqtDClZNEw63TsiuHLvnpMexL0A-3pzEA5G-w2avCDD0qvPxuUmgOCJ9gyp4T2ScrUpdhIzqPjULpLt3pY2cbmH8ekCJwxa9HUDY4QAZN0MeY5Sn17oe0aAO8_Ukx_j7Wb-1nnRbcCQsIfN22-wTOwvksEWy1BXxp30miyF43SM_-wg59jdpkMxSM3rLIhk79UDiTtDObaEOP3tcmZG72qUsNejkULX9jaCzy80Xd8CBg4mmy5cWOYMp7Z75Vvbb8wnuHQ3oivEaXmhPBvcr8DpfBURhjQ3gd8XfJkTW6h_-VBpe5tl2g0E6xvDTPYX0k-Vm00]--></g></svg></div><figure id="-y5cw8o_85"><img alt="activity-lifecycle.svg" src="images/activity-lifecycle.svg" title="activity-lifecycle.svg" width="2172" height="1052"></figure><aside class="prompt" data-type="tip" data-title="" id="-y5cw8o_86"><p>La paire la plus importante est `onResume()` / `onPause()`. C'est entre ces deux appels que votre application est activement utilis&eacute;e.</p></aside></section></section><section class="chapter"><h2 id="visualisation-pratique-avec-les-logs" data-toc="visualisation-pratique-avec-les-logs">Visualisation Pratique avec les Logs</h2><section class="chapter"><h3 id="introduction-la-notion_2" data-toc="introduction-la-notion_2">Introduction &agrave; la notion</h3><p id="-y5cw8o_117">Lire la th&eacute;orie, c'est bien. Mais voir l'acteur bouger sur sc&egrave;ne en temps r&eacute;el, c'est beaucoup mieux ! Nous allons maintenant utiliser notre outil de d&eacute;bogage pr&eacute;f&eacute;r&eacute;, le Logcat, pour espionner le metteur en sc&egrave;ne (le syst&egrave;me Android) et voir exactement quand il donne ses instructions &agrave; notre <code class="code" id="-y5cw8o_118">Activity</code>.</p></section><section class="chapter"><h3 id="explication-de-la-notion_2" data-toc="explication-de-la-notion_2">Explication de la notion</h3><p id="-y5cw8o_119">Pour visualiser le cycle de vie, nous allons &quot;surcharger&quot; (<span class="emphasis" id="-y5cw8o_120">override</span>) chacune des m&eacute;thodes du cycle de vie dans notre <code class="code" id="-y5cw8o_121">MainActivity</code> et y placer un simple <code class="code" id="-y5cw8o_122">Log.d()</code>. Cela nous permettra de tracer chaque &eacute;tape dans le Logcat.</p></section><section class="chapter"><h3 id="exercice-1-mettre-le-cycle-de-vie-sous-surveillance" data-toc="exercice-1-mettre-le-cycle-de-vie-sous-surveillance">Exercice 1 : Mettre le cycle de vie sous surveillance</h3><p id="-y5cw8o_123"><span class="control" id="-y5cw8o_125">&Eacute;nonc&eacute; :</span> Modifiez votre classe <code class="code" id="-y5cw8o_126">MainActivity</code> pour logger un message &agrave; chaque &eacute;tape cl&eacute; du cycle de vie (<code class="code" id="-y5cw8o_127">onCreate</code>, <code class="code" id="-y5cw8o_128">onStart</code>, <code class="code" id="-y5cw8o_129">onResume</code>, <code class="code" id="-y5cw8o_130">onPause</code>, <code class="code" id="-y5cw8o_131">onStop</code>, <code class="code" id="-y5cw8o_132">onDestroy</code>).</p><section class="chapter"><div class="collapse"><div class="collapse__title"><h4 id="correction-exercice-1" data-toc="correction-exercice-1"><span class="control" id="-y5cw8o_136">Correction exercice 1</span></h4></div><div class="collapse__content"><section class="procedure-steps"><h3 id="-y5cw8o_134" data-toc="-y5cw8o_134">Correction</h3><ol class="list _decimal" id="-y5cw8o_137" type="1"><li class="list__item" id="-y5cw8o_140"><p id="-y5cw8o_144">Ouvrez votre fichier <code class="code" id="-y5cw8o_145">MainActivity.kt</code>.</p></li><li class="list__item" id="-y5cw8o_141"><p id="-y5cw8o_146">Ajoutez une constante pour le TAG afin d'&eacute;viter les r&eacute;p&eacute;titions.</p><div class="code-block" data-lang="kotlin">
private const val TAG = &quot;MainActivityLifecycle&quot;
</div></li><li class="list__item" id="-y5cw8o_142"><p id="-y5cw8o_148">Surchargez les m&eacute;thodes du cycle de vie. Dans Android Studio, vous pouvez utiliser le raccourci <code class="code" id="-y5cw8o_149">Ctrl+O</code> (sur Windows/Linux) ou <code class="code" id="-y5cw8o_150">Cmd+O</code> (sur Mac) pour ouvrir la bo&icirc;te de dialogue &quot;Override Methods&quot; et les s&eacute;lectionner facilement.</p></li><li class="list__item" id="-y5cw8o_143"><p id="-y5cw8o_151">Votre code complet devrait ressembler &agrave; ceci :</p></li></ol><div class="code-block" data-lang="kotlin">
package fr.formation.lifecycleapp

import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import android.util.Log

class MainActivity : AppCompatActivity() {

    // On définit une constante pour notre TAG Logcat.
    // C'est une bonne pratique pour éviter les fautes de frappe.
    private val TAG = &quot;MainActivityLifecycle&quot;

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        Log.d(TAG, &quot;onCreate() a été appelée.&quot;)
    }

    override fun onStart() {
        super.onStart()
        Log.d(TAG, &quot;onStart() a été appelée.&quot;)
    }

    override fun onResume() {
        super.onResume()
        Log.d(TAG, &quot;onResume() a été appelée.&quot;)
    }

    override fun onPause() {
        super.onPause()
        Log.d(TAG, &quot;onPause() a été appelée.&quot;)
    }

    override fun onStop() {
        super.onStop()
        Log.d(TAG, &quot;onStop() a été appelée.&quot;)
    }

    override fun onDestroy() {
        super.onDestroy()
        Log.d(TAG, &quot;onDestroy() a été appelée.&quot;)
    }
}
</div><ol class="list _decimal" id="-y5cw8o_139" type="1" start="5"><li class="list__item" id="-y5cw8o_152"><p id="-y5cw8o_153"><span class="control" id="-y5cw8o_155">Testez !</span></p><ul class="list _bullet" id="-y5cw8o_154"><li class="list__item" id="-y5cw8o_156"><p id="-y5cw8o_160">Lancez l'application. Dans Logcat (filtr&eacute; avec votre TAG), vous devriez voir <code class="code" id="-y5cw8o_161">onCreate</code>, <code class="code" id="-y5cw8o_162">onStart</code>, <code class="code" id="-y5cw8o_163">onResume</code>.</p></li><li class="list__item" id="-y5cw8o_157"><p id="-y5cw8o_164">Appuyez sur le bouton &quot;Home&quot; de l'appareil. Vous devriez voir <code class="code" id="-y5cw8o_165">onPause</code>, <code class="code" id="-y5cw8o_166">onStop</code>.</p></li><li class="list__item" id="-y5cw8o_158"><p id="-y5cw8o_167">Rouvrez l'application depuis la liste des applications r&eacute;centes. Vous devriez voir <code class="code" id="-y5cw8o_168">onStart</code>, <code class="code" id="-y5cw8o_169">onResume</code>.</p></li><li class="list__item" id="-y5cw8o_159"><p id="-y5cw8o_170">Appuyez sur le bouton &quot;Retour&quot;. Vous devriez voir <code class="code" id="-y5cw8o_171">onPause</code>, <code class="code" id="-y5cw8o_172">onStop</code>, <code class="code" id="-y5cw8o_173">onDestroy</code>. L'activit&eacute; est d&eacute;truite.</p></li></ul></li></ol><ol class="list _decimal"></ol></section></div></div></section></section></section><section class="chapter"><h2 id="le-probl-me-de-la-recr-ation-d-activity" data-toc="le-probl-me-de-la-recr-ation-d-activity">Le Probl&egrave;me de la Recr&eacute;ation d'Activity</h2><section class="chapter"><h3 id="introduction-la-notion_3" data-toc="introduction-la-notion_3">Introduction &agrave; la notion</h3><p id="-y5cw8o_176">Imaginez que notre acteur, en plein milieu d'une sc&egrave;ne, change de costume. Le metteur en sc&egrave;ne, au lieu de le laisser continuer, le fait sortir, puis le fait revenir avec son nouveau costume, en lui faisant <span class="control" id="-y5cw8o_177">oublier tout ce qu'il a fait avant</span>. C'est un comportement &eacute;trange, mais c'est exactement ce que fait Android lors d'un &quot;changement de configuration&quot;, comme la rotation de l'&eacute;cran.</p></section><section class="chapter"><h3 id="explication-de-la-notion_3" data-toc="explication-de-la-notion_3">Explication de la notion</h3><p id="-y5cw8o_178">Un changement de configuration se produit lorsque l'&eacute;tat de l'appareil change de mani&egrave;re significative, par exemple :</p><ul class="list _bullet" id="-y5cw8o_179"><li class="list__item" id="-y5cw8o_185"><p id="-y5cw8o_188">L'utilisateur fait pivoter l'appareil (passage du mode portrait au paysage).</p></li><li class="list__item" id="-y5cw8o_186"><p id="-y5cw8o_189">L'utilisateur change la langue du syst&egrave;me.</p></li><li class="list__item" id="-y5cw8o_187"><p id="-y5cw8o_190">L'utilisateur active le mode sombre.</p></li></ul><p id="-y5cw8o_180">Lorsque cela se produit, Android d&eacute;truit (<code class="code" id="-y5cw8o_191">onDestroy</code>) votre <code class="code" id="-y5cw8o_192">Activity</code> actuelle et en cr&eacute;e une <span class="control" id="-y5cw8o_193">nouvelle instance</span> (<code class="code" id="-y5cw8o_194">onCreate</code>). Pourquoi ? Pour lui permettre de recharger des ressources alternatives qui pourraient &ecirc;tre optimis&eacute;es pour la nouvelle configuration (par exemple, un layout diff&eacute;rent pour le mode paysage).</p><aside class="prompt" data-type="warning" data-title="" id="-y5cw8o_181"><p id="-y5cw8o_195"><span class="control" id="-y5cw8o_196">Le probl&egrave;me :</span> Puisqu'une nouvelle instance est cr&eacute;&eacute;e, toutes les donn&eacute;es stock&eacute;es dans les propri&eacute;t&eacute;s de l'ancienne <code class="code" id="-y5cw8o_197">Activity</code> sont <span class="control" id="-y5cw8o_198">perdues</span>!</p></aside><p id="-y5cw8o_182">C'est l'un des probl&egrave;mes les plus fondamentaux du d&eacute;veloppement Android. Ne pas le comprendre m&egrave;ne &agrave; des applications qui perdent l'&eacute;tat de l'utilisateur, ce qui est tr&egrave;s frustrant.</p><p id="-y5cw8o_183">La solution moderne &agrave; ce probl&egrave;me est l'utilisation des <span class="control" id="-y5cw8o_199">ViewModel</span>, que nous verrons dans la partie sur l'architecture. Pour l'instant, notre objectif est de <span class="control" id="-y5cw8o_200">constater</span> et de <span class="control" id="-y5cw8o_201">comprendre</span> le probl&egrave;me.</p></section></section><section class="chapter"><h2 id="tp-4-l-application-compteur" data-toc="tp-4-l-application-compteur">TP 4 : L'application &quot;Compteur&quot;</h2><p id="-y5cw8o_202"><span class="control" id="-y5cw8o_205">Objectif :</span> Mettre en &eacute;vidence la perte de donn&eacute;es lors de la rotation de l'&eacute;cran.</p><section class="procedure-steps" id="-y5cw8o_203"><ol class="list _decimal" id="-y5cw8o_206" type="1"><li class="list__item" id="-y5cw8o_209"><p id="-y5cw8o_211"><span class="control" id="-y5cw8o_212">Cr&eacute;ez un nouveau projet</span> &quot;Empty Views Activity&quot; nomm&eacute; <code class="code" id="-y5cw8o_213">CompteurApp</code>.</p></li><li class="list__item" id="-y5cw8o_210"><p id="-y5cw8o_214"><span class="control" id="-y5cw8o_217">Modifiez le layout <code class="code" id="-y5cw8o_218">activity_main.xml</code>:</span></p><ul class="list _bullet" id="-y5cw8o_215"><li class="list__item" id="-y5cw8o_219"><p id="-y5cw8o_222">Ajoutez un <code class="code" id="-y5cw8o_223">TextView</code> pour afficher un chiffre. Donnez-lui l'ID <code class="code" id="-y5cw8o_224">@+id/counterTextView</code>. Centrez-le &agrave; l'&eacute;cran.</p></li><li class="list__item" id="-y5cw8o_220"><p id="-y5cw8o_225">Ajoutez un <code class="code" id="-y5cw8o_226">Button</code> en dessous. Donnez-lui l'ID <code class="code" id="-y5cw8o_227">@+id/incrementButton</code> et le texte &quot;Incr&eacute;menter&quot;.</p></li><li class="list__item" id="-y5cw8o_221"><p id="-y5cw8o_228">Pour la simplicit&eacute;, vous pouvez utiliser un <code class="code" id="-y5cw8o_229">LinearLayout</code> vertical.</p></li></ul><div class="code-block" data-lang="markup">
&lt;!-- res/layout/activity_main.xml --&gt;
&lt;LinearLayout
    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    android:orientation=&quot;vertical&quot;
    android:gravity=&quot;center&quot;
    tools:context=&quot;.MainActivity&quot;&gt;

    &lt;TextView
        android:id=&quot;@+id/counterTextView&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:textSize=&quot;48sp&quot;
        android:text=&quot;0&quot; /&gt;

    &lt;Button
        android:id=&quot;@+id/incrementButton&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_marginTop=&quot;16dp&quot;
        android:text=&quot;Incrémenter&quot; /&gt;
&lt;/LinearLayout&gt;
</div></li></ol><aside class="prompt" data-type="note" data-title="" id="-y5cw8o_207"><p id="-y5cw8o_230">Android utilise plusieurs unit&eacute;s de dimension, mais deux sont essentielles au quotidien. Les voici, class&eacute;es de la plus importante &agrave; la moins utilis&eacute;e.</p><p id="-y5cw8o_231"><span class="control" id="-y5cw8o_260">1. <code class="code" id="-y5cw8o_261">dp</code> ou <code class="code" id="-y5cw8o_262">dip</code> (Density-Independent Pixel) - Le Standard Absolu</span></p><p id="-y5cw8o_232">C'est l'unit&eacute; que vous devez utiliser <span class="control" id="-y5cw8o_263">pour tout ce qui n'est pas du texte</span>: dimensions d'un bouton, marges, padding, taille d'une image, etc.</p><ul class="list _bullet" id="-y5cw8o_233"><li class="list__item" id="-y5cw8o_264"><p id="-y5cw8o_267"><span class="control" id="-y5cw8o_268">Nom Complet :</span> Pixel Ind&eacute;pendant de la Densit&eacute;.</p></li><li class="list__item" id="-y5cw8o_265"><p id="-y5cw8o_269"><span class="control" id="-y5cw8o_270">Concept :</span> C'est une unit&eacute; de mesure abstraite. Son but est de garantir qu'un &eacute;l&eacute;ment d'interface ait la <span class="control" id="-y5cw8o_271">m&ecirc;me taille physique</span> (en centim&egrave;tres ou en pouces) quel que soit l'&eacute;cran du t&eacute;l&eacute;phone.</p></li><li class="list__item" id="-y5cw8o_266"><p id="-y5cw8o_272"><span class="control" id="-y5cw8o_274">Comment &ccedil;a marche ?</span> Android convertit les <code class="code" id="-y5cw8o_275">dp</code> en pixels (<code class="code" id="-y5cw8o_276">px</code>) r&eacute;els en fonction de la densit&eacute; de l'&eacute;cran (le nombre de pixels par pouce, ou DPI - Dots Per Inch).</p><ul class="list _bullet" id="-y5cw8o_273"><li class="list__item" id="-y5cw8o_277"><p id="-y5cw8o_280">Sur un &eacute;cran de basse densit&eacute; (ex: 160 dpi), <code class="code" id="-y5cw8o_281">1 dp</code> = <code class="code" id="-y5cw8o_282">1 px</code>.</p></li><li class="list__item" id="-y5cw8o_278"><p id="-y5cw8o_283">Sur un &eacute;cran de haute densit&eacute; (ex: 320 dpi), <code class="code" id="-y5cw8o_284">1 dp</code> = <code class="code" id="-y5cw8o_285">2 px</code>.</p></li><li class="list__item" id="-y5cw8o_279"><p id="-y5cw8o_286">Sur un &eacute;cran de tr&egrave;s haute densit&eacute; (ex: 480 dpi), <code class="code" id="-y5cw8o_287">1 dp</code> = <code class="code" id="-y5cw8o_288">3 px</code>.</p></li></ul></li></ul><p id="-y5cw8o_234">**En r&eacute;sum&eacute; : Utilisez <code class="code" id="-y5cw8o_289">dp</code> pour la taille de vos vues, les marges (<code class="code" id="-y5cw8o_290">margin</code>) et les espacements int&eacute;rieurs (<code class="code" id="-y5cw8o_291">padding</code>). **</p><p id="-y5cw8o_235"><span class="emphasis" id="-y5cw8o_292">Exemple en XML :</span></p><div class="code-block" data-lang="markup">

&lt;Button
        android:layout_width=&quot;200dp&quot;
        android:layout_height=&quot;50dp&quot;
        android:layout_margin=&quot;16dp&quot;/&gt;
</div><p id="-y5cw8o_237"><span class="control" id="-y5cw8o_293">2. <code class="code" id="-y5cw8o_294">sp</code> (Scale-Independent Pixel) - Pour le Texte Uniquement</span></p><p id="-y5cw8o_238">C'est l'unit&eacute; que vous devez utiliser <span class="control" id="-y5cw8o_295">exclusivement pour la taille du texte (<code class="code" id="-y5cw8o_296">textSize</code>)</span>.</p><ul class="list _bullet" id="-y5cw8o_239"><li class="list__item" id="-y5cw8o_297"><p id="-y5cw8o_300"><span class="control" id="-y5cw8o_301">Nom Complet :</span> Pixel Ind&eacute;pendant de l'&Eacute;chelle.</p></li><li class="list__item" id="-y5cw8o_298"><p id="-y5cw8o_302"><span class="control" id="-y5cw8o_303">Concept :</span> Il fonctionne de la m&ecirc;me mani&egrave;re que le <code class="code" id="-y5cw8o_304">dp</code> (il s'adapte &agrave; la densit&eacute; de l'&eacute;cran), mais il prend <span class="control" id="-y5cw8o_305">en plus</span> en compte la <span class="control" id="-y5cw8o_306">pr&eacute;f&eacute;rence de taille de police de l'utilisateur</span> dans les param&egrave;tres d'accessibilit&eacute; du t&eacute;l&eacute;phone.</p></li><li class="list__item" id="-y5cw8o_299"><p id="-y5cw8o_307"><span class="control" id="-y5cw8o_308">Pourquoi est-ce crucial ?</span> Si un utilisateur malvoyant augmente la taille de la police sur son t&eacute;l&eacute;phone, votre application doit respecter ce choix. En utilisant <code class="code" id="-y5cw8o_309">sp</code>, le texte de votre application grossira automatiquement, la rendant accessible. Si vous utilisiez <code class="code" id="-y5cw8o_310">dp</code> pour du texte, il ignorerait ce r&eacute;glage.</p></li></ul><p id="-y5cw8o_240"><span class="control" id="-y5cw8o_311">En r&eacute;sum&eacute; : Utilisez <code class="code" id="-y5cw8o_312">sp</code> uniquement pour d&eacute;finir la taille des polices de caract&egrave;res.</span></p><p id="-y5cw8o_241"><span class="emphasis" id="-y5cw8o_313">Exemple en XML :</span></p><div class="code-block" data-lang="markup">

&lt;TextView
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:text=&quot;Bonjour le monde !&quot;
        android:textSize=&quot;22sp&quot;/&gt;
</div><p id="-y5cw8o_244"><span class="control" id="-y5cw8o_314">3. Les Autres Unit&eacute;s (&Agrave; &Eacute;viter ou pour des cas tr&egrave;s sp&eacute;cifiques)</span></p><p id="-y5cw8o_245">Ces unit&eacute;s existent mais ne devraient quasiment jamais &ecirc;tre utilis&eacute;es pour la cr&eacute;ation d'interfaces utilisateur standards.</p><p id="-y5cw8o_246"><span class="control" id="-y5cw8o_315"><code class="code" id="-y5cw8o_316">px</code> (Pixel)</span></p><ul class="list _bullet" id="-y5cw8o_247"><li class="list__item" id="-y5cw8o_317"><p id="-y5cw8o_321"><span class="control" id="-y5cw8o_322">Nom Complet :</span> Pixel.</p></li><li class="list__item" id="-y5cw8o_318"><p id="-y5cw8o_323"><span class="control" id="-y5cw8o_324">Concept :</span> Repr&eacute;sente un pixel physique sur l'&eacute;cran.</p></li><li class="list__item" id="-y5cw8o_319"><p id="-y5cw8o_325"><span class="control" id="-y5cw8o_326">Le Probl&egrave;me :</span> C'est une unit&eacute; absolue. Un bouton de <code class="code" id="-y5cw8o_327">100px</code> de large para&icirc;tra grand sur un &eacute;cran de faible densit&eacute; et minuscule sur un &eacute;cran moderne &agrave; tr&egrave;s haute densit&eacute; (4K). <span class="control" id="-y5cw8o_328">C'est pr&eacute;cis&eacute;ment le probl&egrave;me que <code class="code" id="-y5cw8o_329">dp</code> r&eacute;sout.</span></p></li><li class="list__item" id="-y5cw8o_320"><p id="-y5cw8o_330"><span class="control" id="-y5cw8o_331">Quand l'utiliser ?</span> Tr&egrave;s rarement. Parfois en code (Kotlin/Java) pour des calculs graphiques tr&egrave;s pr&eacute;cis o&ugrave; vous avez besoin de manipuler des pixels, par exemple en dessinant sur un <code class="code" id="-y5cw8o_332">Canvas</code>. <span class="control" id="-y5cw8o_333">Ne jamais l'utiliser dans vos fichiers de layout XML.</span></p></li></ul><p id="-y5cw8o_248"><span class="control" id="-y5cw8o_334"><code class="code" id="-y5cw8o_335">pt</code> (Point), <code class="code" id="-y5cw8o_336">in</code> (Inch/Pouce), <code class="code" id="-y5cw8o_337">mm</code> (Millimeter/Millim&egrave;tre)</span></p><ul class="list _bullet" id="-y5cw8o_249"><li class="list__item" id="-y5cw8o_338"><p id="-y5cw8o_340"><span class="control" id="-y5cw8o_342">Concept :</span> Ce sont des unit&eacute;s de mesure physiques r&eacute;elles.</p><ul class="list _bullet" id="-y5cw8o_341"><li class="list__item" id="-y5cw8o_343"><p id="-y5cw8o_346"><code class="code" id="-y5cw8o_347">pt</code>: 1/72 de pouce, une unit&eacute; issue du monde de l'imprimerie.</p></li><li class="list__item" id="-y5cw8o_344"><p id="-y5cw8o_348"><code class="code" id="-y5cw8o_349">in</code>: Pouce.</p></li><li class="list__item" id="-y5cw8o_345"><p id="-y5cw8o_350"><code class="code" id="-y5cw8o_351">mm</code>: Millim&egrave;tre.</p></li></ul></li><li class="list__item" id="-y5cw8o_339"><p id="-y5cw8o_352"><span class="control" id="-y5cw8o_353">Le Probl&egrave;me :</span> Bien qu'elles s'adaptent &agrave; la taille physique de l'&eacute;cran, elles ne sont pas id&eacute;ales pour le design d'interface qui doit &ecirc;tre fluide et flexible. Le <code class="code" id="-y5cw8o_354">dp</code> est une bien meilleure abstraction pour le design sur &eacute;cran.</p></li></ul><p id="-y5cw8o_251"><span class="control" id="-y5cw8o_355">Tableau R&eacute;capitulatif</span></p><div class="table-wrapper"><table class="wide" id="-y5cw8o_252"><thead><tr class="ijRowHead" id="-y5cw8o_356"><th id="-y5cw8o_361"><p>Unit&eacute;</p></th><th id="-y5cw8o_362"><p>Nom Complet</p></th><th id="-y5cw8o_363"><p>Utilisation Principale</p></th><th id="-y5cw8o_364"><p>Recommandation</p></th></tr></thead><tbody><tr id="-y5cw8o_357"><td id="-y5cw8o_365"><p><span class="control" id="-y5cw8o_369"><code class="code" id="-y5cw8o_370">dp</code></span></p></td><td id="-y5cw8o_366"><p>Density-Independent Pixel</p></td><td id="-y5cw8o_367"><p><span class="control" id="-y5cw8o_371">Layouts</span>: <code class="code" id="-y5cw8o_372">width</code>, <code class="code" id="-y5cw8o_373">height</code>, <code class="code" id="-y5cw8o_374">margin</code>, <code class="code" id="-y5cw8o_375">padding</code>, <code class="code" id="-y5cw8o_376">elevation</code>...</p></td><td id="-y5cw8o_368"><p><span class="control" id="-y5cw8o_377">&Agrave; utiliser partout</span></p></td></tr><tr id="-y5cw8o_358"><td id="-y5cw8o_378"><p><span class="control" id="-y5cw8o_382"><code class="code" id="-y5cw8o_383">sp</code></span></p></td><td id="-y5cw8o_379"><p>Scale-Independent Pixel</p></td><td id="-y5cw8o_380"><p><span class="control" id="-y5cw8o_384">Texte</span>: <code class="code" id="-y5cw8o_385">textSize</code></p></td><td id="-y5cw8o_381"><p><span class="control" id="-y5cw8o_386">Uniquement pour le texte</span></p></td></tr><tr id="-y5cw8o_359"><td id="-y5cw8o_387"><p><code class="code" id="-y5cw8o_391">px</code></p></td><td id="-y5cw8o_388"><p>Pixel</p></td><td id="-y5cw8o_389"><p>Calculs graphiques en code, manipulation de bitmaps.</p></td><td id="-y5cw8o_390"><p><span class="control" id="-y5cw8o_392">&Agrave; &eacute;viter en XML</span></p></td></tr><tr id="-y5cw8o_360"><td id="-y5cw8o_393"><p><code class="code" id="-y5cw8o_397">pt, in, mm</code></p></td><td id="-y5cw8o_394"><p>Point, Inch, Millimeter</p></td><td id="-y5cw8o_395"><p>Cas d'usage tr&egrave;s rares, souvent li&eacute;s &agrave; l'impression.</p></td><td id="-y5cw8o_396"><p><span class="control" id="-y5cw8o_398">&Agrave; &eacute;viter</span></p></td></tr></tbody></table></div><p id="-y5cw8o_253"><span class="control" id="-y5cw8o_399">Bonne Pratique : Le fichier <code class="code" id="-y5cw8o_400">dimens.xml</code></span></p><p id="-y5cw8o_254">Pour une meilleure organisation et maintenance, il est recommand&eacute; de d&eacute;finir vos dimensions dans un fichier de ressources d&eacute;di&eacute;, comme <code class="code" id="-y5cw8o_401">res/values/dimens.xml</code>.</p><p id="-y5cw8o_255"><span class="control" id="-y5cw8o_402">Fichier <code class="code" id="-y5cw8o_403">res/values/dimens.xml</code>:</span></p><div class="code-block" data-lang="markup">

&lt;resources&gt;
    &lt;dimen name=&quot;margin_standard&quot;&gt;16dp&lt;/dimen&gt;
    &lt;dimen name=&quot;text_size_large&quot;&gt;22sp&lt;/dimen&gt;
    &lt;dimen name=&quot;button_height&quot;&gt;48dp&lt;/dimen&gt;
&lt;/resources&gt;
</div><p id="-y5cw8o_257"><span class="emphasis" id="-y5cw8o_404">Utilisation dans votre layout :</span></p><div class="code-block" data-lang="markup">

&lt;Button
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;@dimen/button_height&quot;
        android:layout_margin=&quot;@dimen/margin_standard&quot;
        android:textSize=&quot;@dimen/text_size_large&quot;/&gt;
</div><p id="-y5cw8o_259">Cela permet de r&eacute;utiliser les m&ecirc;mes valeurs partout et de les modifier facilement &agrave; un seul endroit. C'est aussi la base pour cr&eacute;er des interfaces adapt&eacute;es aux tablettes (en cr&eacute;ant un fichier <code class="code" id="-y5cw8o_405">dimens.xml</code> sp&eacute;cifique pour les grands &eacute;crans).</p></aside><ol class="list _decimal" id="-y5cw8o_208" type="1" start="3"><li class="list__item" id="-y5cw8o_406"><p id="-y5cw8o_408"><span class="control" id="-y5cw8o_411">Modifiez la classe <code class="code" id="-y5cw8o_412">MainActivity.kt</code>:</span></p><ul class="list _bullet" id="-y5cw8o_409"><li class="list__item" id="-y5cw8o_413"><p id="-y5cw8o_417">Utilisez <span class="control" id="-y5cw8o_418">View Binding</span> pour acc&eacute;der aux vues (nous le verrons en d&eacute;tail plus tard, pour l'instant, suivez le code).</p></li><li class="list__item" id="-y5cw8o_414"><p id="-y5cw8o_419">Cr&eacute;ez une variable de type <code class="code" id="-y5cw8o_420">var</code> pour stocker le compteur : <code class="code" id="-y5cw8o_421">private var counter = 0</code>.</p></li><li class="list__item" id="-y5cw8o_415"><p id="-y5cw8o_422">Dans <code class="code" id="-y5cw8o_423">onCreate</code>, configurez un <code class="code" id="-y5cw8o_424">onClickListener</code> sur le bouton pour incr&eacute;menter le compteur et mettre &agrave; jour le <code class="code" id="-y5cw8o_425">TextView</code>.</p></li><li class="list__item" id="-y5cw8o_416"><p id="-y5cw8o_426">(Optionnel) Ajoutez les logs du cycle de vie de l'exercice 1 pour mieux observer.</p></li></ul><div class="code-block" data-lang="kotlin">
package fr.formation.compteurapp

import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import android.util.Log
import fr.formation.compteurapp.databinding.ActivityMainBinding

class MainActivity : AppCompatActivity() {

    private val TAG = &quot;MainActivityLifecycle&quot;

    // Étape 1: Activer View Binding dans build.gradle.kts (Module: app)
    // android {
    //   ...
    //   buildFeatures {
    //     viewBinding = true
    //   }
    // }
    // Puis synchroniser Gradle.

    // Étape 2: Déclarer la variable pour le binding
    private lateinit var binding: ActivityMainBinding

    // Notre variable qui stocke l'état
    private var counter = 0

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)

        // Étape 3: Initialiser le binding
        binding = ActivityMainBinding.inflate(layoutInflater)
        setContentView(binding.root)

        Log.d(TAG, &quot;onCreate ! Compteur est à $counter&quot;)

        // On met à jour le TextView avec la valeur actuelle
        updateCounterText()

        // On configure le clic sur le bouton
        binding.incrementButton.setOnClickListener {
            counter++
            updateCounterText()
            Log.d(TAG, &quot;Clic ! Le compteur est maintenant à $counter&quot;)
        }
    }

    private fun updateCounterText() {
        binding.counterTextView.text = counter.toString()
    }

    // Ajoutez les autres méthodes du cycle de vie (onStart, etc.) ici...
    override fun onDestroy() {
        super.onDestroy()
        Log.d(TAG, &quot;onDestroy ! La valeur finale du compteur était $counter&quot;)
    }
}
</div></li><li class="list__item" id="-y5cw8o_407"><p id="-y5cw8o_427"><span class="control" id="-y5cw8o_429">Lancez et testez :</span></p><ul class="list _bullet" id="-y5cw8o_428"><li class="list__item" id="-y5cw8o_430"><p id="-y5cw8o_435">Lancez l'application.</p></li><li class="list__item" id="-y5cw8o_431"><p id="-y5cw8o_436">Cliquez plusieurs fois sur le bouton. Le compteur s'incr&eacute;mente.</p></li><li class="list__item" id="-y5cw8o_432"><p id="-y5cw8o_437"><span class="control" id="-y5cw8o_438">Faites pivoter votre &eacute;mulateur ou votre t&eacute;l&eacute;phone.</span></p></li><li class="list__item" id="-y5cw8o_433"><p id="-y5cw8o_439"><span class="control" id="-y5cw8o_440">Observez le r&eacute;sultat :</span> Le compteur est revenu &agrave; 0 !</p></li><li class="list__item" id="-y5cw8o_434"><p id="-y5cw8o_441"><span class="control" id="-y5cw8o_442">Regardez le Logcat :</span> Vous verrez que l'activit&eacute; a &eacute;t&eacute; d&eacute;truite (<code class="code" id="-y5cw8o_443">onDestroy</code>) et recr&eacute;&eacute;e (<code class="code" id="-y5cw8o_444">onCreate</code>). La variable <code class="code" id="-y5cw8o_445">counter</code> a &eacute;t&eacute; r&eacute;initialis&eacute;e &agrave; sa valeur par d&eacute;faut.</p></li></ul></li></ol><ol class="list _decimal"></ol></section></section><section class="chapter"><h2 id="auto-valuation" data-toc="auto-valuation">Auto-&eacute;valuation</h2><p id="-y5cw8o_446"><span class="control" id="-y5cw8o_455">1. Dans quelle m&eacute;thode du cycle de vie est-il pr&eacute;f&eacute;rable d'appeler <code class="code" id="-y5cw8o_456">setContentView()</code>? (QCM)</span></p><ul class="list _bullet" id="-y5cw8o_447"><li class="list__item" id="-y5cw8o_457"><p id="-y5cw8o_461">A) <code class="code" id="-y5cw8o_462">onStart()</code></p></li><li class="list__item" id="-y5cw8o_458"><p id="-y5cw8o_463">B) <code class="code" id="-y5cw8o_464">onResume()</code></p></li><li class="list__item" id="-y5cw8o_459"><p id="-y5cw8o_465">C) <code class="code" id="-y5cw8o_466">onCreate()</code></p></li><li class="list__item" id="-y5cw8o_460"><p id="-y5cw8o_467">D) <code class="code" id="-y5cw8o_468">onPause()</code></p></li></ul><p id="-y5cw8o_448"><span class="control" id="-y5cw8o_469">2. Votre application joue de la musique. Dans quelle m&eacute;thode du cycle de vie devriez-vous mettre en pause la musique si l'utilisateur re&ccedil;oit un appel t&eacute;l&eacute;phonique ? (QCM)</span></p><ul class="list _bullet" id="-y5cw8o_449"><li class="list__item" id="-y5cw8o_470"><p id="-y5cw8o_474">A) <code class="code" id="-y5cw8o_475">onStop()</code></p></li><li class="list__item" id="-y5cw8o_471"><p id="-y5cw8o_476">B) <code class="code" id="-y5cw8o_477">onDestroy()</code></p></li><li class="list__item" id="-y5cw8o_472"><p id="-y5cw8o_478">C) <code class="code" id="-y5cw8o_479">onPause()</code></p></li><li class="list__item" id="-y5cw8o_473"><p id="-y5cw8o_480">D) <code class="code" id="-y5cw8o_481">onCreate()</code></p></li></ul><p id="-y5cw8o_450"><span class="control" id="-y5cw8o_482">3. Que se passe-t-il lorsqu'un utilisateur fait pivoter l'&eacute;cran de son t&eacute;l&eacute;phone ? (QCM)</span></p><ul class="list _bullet" id="-y5cw8o_451"><li class="list__item" id="-y5cw8o_483"><p id="-y5cw8o_487">A) La m&eacute;thode <code class="code" id="-y5cw8o_488">onPause()</code> est appel&eacute;e, puis <code class="code" id="-y5cw8o_489">onResume()</code>.</p></li><li class="list__item" id="-y5cw8o_484"><p id="-y5cw8o_490">B) L'Activity est d&eacute;truite et une nouvelle instance est cr&eacute;&eacute;e.</p></li><li class="list__item" id="-y5cw8o_485"><p id="-y5cw8o_491">C) Seul le layout est redessin&eacute;, l'instance de l'Activity reste la m&ecirc;me.</p></li><li class="list__item" id="-y5cw8o_486"><p id="-y5cw8o_492">D) Rien, le syst&egrave;me g&egrave;re tout automatiquement sans impacter l'Activity.</p></li></ul><p id="-y5cw8o_452"><span class="control" id="-y5cw8o_493">4. Expliquez la diff&eacute;rence entre les &eacute;tats &quot;Paused&quot; (en pause) et &quot;Stopped&quot; (arr&ecirc;t&eacute;) pour une Activity. (Question ouverte)</span></p><p id="-y5cw8o_453"><span class="control" id="-y5cw8o_494">5. Pourquoi le compteur de notre TP revient-il &agrave; z&eacute;ro apr&egrave;s une rotation ? Expliquez le processus technique derri&egrave;re ce ph&eacute;nom&egrave;ne. (Question ouverte)</span></p><section class="chapter"><div class="collapse"><div class="collapse__title"><h3 id="correction-de-l-auto-valuation" data-toc="correction-de-l-auto-valuation">Correction de l'auto-&eacute;valuation</h3></div><div class="collapse__content"><p id="-y5cw8o_495"><span class="control" id="-y5cw8o_506">1. Dans quelle m&eacute;thode du cycle de vie est-il pr&eacute;f&eacute;rable d'appeler <code class="code" id="-y5cw8o_507">setContentView()</code>?</span></p><ul class="list _bullet" id="-y5cw8o_496"><li class="list__item" id="-y5cw8o_508"><p id="-y5cw8o_510"><span class="control" id="-y5cw8o_511">R&eacute;ponse : C) <code class="code" id="-y5cw8o_512">onCreate()</code></span></p></li><li class="list__item" id="-y5cw8o_509"><p id="-y5cw8o_513"><span class="control" id="-y5cw8o_514">Justification :</span> <code class="code" id="-y5cw8o_515">onCreate()</code> n'est appel&eacute;e qu'une seule fois lors de la cr&eacute;ation initiale de l'activit&eacute;. C'est l' endroit id&eacute;al pour effectuer toutes les initialisations qui ne doivent se produire qu'une seule fois, comme la d&eacute;finition du layout.</p></li></ul><p id="-y5cw8o_497"><span class="control" id="-y5cw8o_516">2. Votre application joue de la musique. Dans quelle m&eacute;thode du cycle de vie devriez-vous mettre en pause la musique si l'utilisateur re&ccedil;oit un appel t&eacute;l&eacute;phonique ?</span></p><ul class="list _bullet" id="-y5cw8o_498"><li class="list__item" id="-y5cw8o_517"><p id="-y5cw8o_519"><span class="control" id="-y5cw8o_520">R&eacute;ponse : C) <code class="code" id="-y5cw8o_521">onPause()</code></span></p></li><li class="list__item" id="-y5cw8o_518"><p id="-y5cw8o_522"><span class="control" id="-y5cw8o_523">Justification :</span> Un appel t&eacute;l&eacute;phonique fait passer votre activit&eacute; en arri&egrave;re-plan, mais elle reste partiellement visible. La m&eacute;thode <code class="code" id="-y5cw8o_524">onPause()</code> est la premi&egrave;re &agrave; &ecirc;tre appel&eacute;e lorsque l'activit&eacute; perd le focus. C'est le moment id&eacute;al pour stopper les processus qui ne devraient pas continuer en arri&egrave;re-plan (lecture audio/vid&eacute;o, animations, etc.).</p></li></ul><p id="-y5cw8o_499"><span class="control" id="-y5cw8o_525">3. Que se passe-t-il lorsqu'un utilisateur fait pivoter l'&eacute;cran de son t&eacute;l&eacute;phone ?</span></p><ul class="list _bullet" id="-y5cw8o_500"><li class="list__item" id="-y5cw8o_526"><p id="-y5cw8o_528"><span class="control" id="-y5cw8o_529">R&eacute;ponse : B) L'Activity est d&eacute;truite et une nouvelle instance est cr&eacute;&eacute;e.</span></p></li><li class="list__item" id="-y5cw8o_527"><p id="-y5cw8o_530"><span class="control" id="-y5cw8o_531">Justification :</span> C'est le comportement par d&eacute;faut d'Android pour g&eacute;rer les changements de configuration. Il d&eacute;truit l'ancienne instance et en cr&eacute;e une nouvelle pour charger les ressources appropri&eacute;es.</p></li></ul><p id="-y5cw8o_501"><span class="control" id="-y5cw8o_532">4. Expliquez la diff&eacute;rence entre les &eacute;tats &quot;Paused&quot; (en pause) et &quot;Stopped&quot; (arr&ecirc;t&eacute;) pour une Activity.</span></p><ul class="list _bullet" id="-y5cw8o_502"><li class="list__item" id="-y5cw8o_533"><p id="-y5cw8o_534"><span class="control" id="-y5cw8o_535">R&eacute;ponse type :</span> Une activit&eacute; est en &eacute;tat &quot;Paused&quot; lorsqu'elle a perdu le focus mais est toujours au moins partiellement visible pour l'utilisateur (par exemple, si une bo&icirc;te de dialogue transparente ou une notification &quot; pop-up&quot; appara&icirc;t). Une activit&eacute; est en &eacute;tat &quot;Stopped&quot; lorsqu'elle n'est plus du tout visible (par exemple, l'utilisateur a appuy&eacute; sur le bouton &quot;Home&quot; ou a navigu&eacute; vers une autre activit&eacute; qui recouvre enti&egrave;rement l'&eacute;cran).</p></li></ul><p id="-y5cw8o_503"><span class="control" id="-y5cw8o_536">5. Pourquoi le compteur de notre TP revient-il &agrave; z&eacute;ro apr&egrave;s une rotation ? Expliquez le processus technique derri&egrave;re ce ph&eacute;nom&egrave;ne.</span></p><ul class="list _bullet" id="-y5cw8o_504"><li class="list__item" id="-y5cw8o_537"><p id="-y5cw8o_538"><span class="control" id="-y5cw8o_539">R&eacute;ponse type :</span> Le compteur revient &agrave; z&eacute;ro car la variable <code class="code" id="-y5cw8o_540">counter</code> est une propri&eacute;t&eacute; de l'instance de <code class="code" id="-y5cw8o_541">MainActivity</code>. Lors de la rotation, le syst&egrave;me Android consid&egrave;re qu'il s'agit d'un changement de configuration majeur. Il <span class="control" id="-y5cw8o_542">d&eacute;truit</span> compl&egrave;tement l'instance existante de <code class="code" id="-y5cw8o_543">MainActivity</code> (ce qui efface la valeur de <code class="code" id="-y5cw8o_544">counter</code> de la m&eacute;moire). Ensuite, il cr&eacute;e une <span class="control" id="-y5cw8o_545">nouvelle instance</span> de <code class="code" id="-y5cw8o_546">MainActivity</code> pour le nouveau mode (paysage ou portrait). Dans cette nouvelle instance, la variable <code class="code" id="-y5cw8o_547">counter</code> est r&eacute;initialis&eacute;e &agrave; sa valeur initiale, qui est 0. C'est le cycle <code class="code" id="-y5cw8o_548">onDestroy()</code>-&gt; <code class="code" id="-y5cw8o_549">onCreate()</code> qui est la cause de cette perte de donn&eacute;es.</p></li></ul></div></div></section></section><section class="chapter"><h2 id="conclusion-du-module" data-toc="conclusion-du-module">Conclusion du module</h2><p id="-y5cw8o_550">Vous avez maintenant touch&eacute; au c&oelig;ur du fonctionnement d'une application Android. Vous comprenez que vos &eacute;crans ne sont pas des entit&eacute;s statiques, mais des composants dynamiques avec un cycle de vie bien d&eacute;fini, g&eacute;r&eacute; par le syst&egrave;me.</p><p id="-y5cw8o_551">Vous avez appris &agrave; &eacute;couter les &eacute;v&eacute;nements de ce cycle de vie et, surtout, vous avez mis le doigt sur un des probl&egrave;mes les plus courants et les plus importants : la <span class="control" id="-y5cw8o_554">perte d'&eacute;tat lors des changements de configuration</span>.</p><p id="-y5cw8o_552">Cette compr&eacute;hension est le &quot;pourquoi&quot; qui justifiera l'utilisation de composants d'architecture plus avanc&eacute;s comme le <code class="code" id="-y5cw8o_555">ViewModel</code>. Consid&eacute;rez ce que vous venez d'apprendre comme une pi&egrave;ce ma&icirc;tresse de votre puzzle de connaissances Android.</p><p id="-y5cw8o_553">Dans la prochaine partie, nous allons nous concentrer sur la construction de l'interface utilisateur elle-m&ecirc;me. Maintenant que nous savons comment fonctionne le conteneur (<code class="code" id="-y5cw8o_556">Activity</code>), nous allons apprendre &agrave; le remplir avec des vues et &agrave; le rendre interactif.</p></section><div class="last-modified">01 novembre 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="001-03-module-03.html" class="navigation-links__prev">Module 3 : Les Bases de Kotlin pour Android</a><a href="002-partie-2.html" class="navigation-links__next">Partie 2 : L'Interface Utilisateur (UI)</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>