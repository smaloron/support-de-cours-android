<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-11-01T15:12:00.70418"><title>Module 7 : Afficher des Listes de Donn&eacute;es avec `RecyclerView` | Android</title><script type="application/json" id="virtual-toc-data">[{"id":"objectifs-p-dagogiques","level":0,"title":"Objectifs pédagogiques","anchor":"#objectifs-p-dagogiques"},{"id":"introduction","level":0,"title":"Introduction","anchor":"#introduction"},{"id":"notions-abord-es","level":0,"title":"Notions abordées","anchor":"#notions-abord-es"},{"id":"le-concept-cl-le-recyclage-des-vues","level":0,"title":"Le Concept Clé : Le recyclage des vues","anchor":"#le-concept-cl-le-recyclage-des-vues"},{"id":"les-3-piliers-du-recyclerview","level":0,"title":"Les 3 Piliers du RecyclerView","anchor":"#les-3-piliers-du-recyclerview"},{"id":"mise-jour-des-donn-es","level":0,"title":"Mise à jour des données","anchor":"#mise-jour-des-donn-es"},{"id":"tp-7-la-todo-list-interactive","level":0,"title":"TP 7 : La \"Todo List\" interactive","anchor":"#tp-7-la-todo-list-interactive"},{"id":"correction-du-tp-7","level":0,"title":"Correction du TP 7","anchor":"#correction-du-tp-7"},{"id":"auto-valuation","level":0,"title":"Auto-évaluation","anchor":"#auto-valuation"},{"id":"conclusion-du-module","level":0,"title":"Conclusion du module","anchor":"#conclusion-du-module"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Module 7 : Afficher des Listes de Donn&eacute;es avec `RecyclerView` | Android"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Android Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/002-03-module-07.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Module 7 : Afficher des Listes de Donn&eacute;es avec `RecyclerView` | Android"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/002-03-module-07.html#webpage",
    "url": "writerside-documentation/002-03-module-07.html",
    "name": "Module 7 : Afficher des Listes de Donn&eacute;es avec `RecyclerView` | Android",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Android Help"
}</script><!-- End Schema.org --></head><body data-id="002-03-module-07" data-main-title="Module 7 : Afficher des Listes de Données avec `RecyclerView`" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="002-Partie-2.md|Partie 2 : L'Interface Utilisateur (UI)"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Android  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="002-03-module-07" id="002-03-module-07.md">Module 7 : Afficher des Listes de Données avec `RecyclerView`</h1><section class="chapter"><h2 id="objectifs-p-dagogiques" data-toc="objectifs-p-dagogiques">Objectifs p&eacute;dagogiques</h2><p id="-3ekzax_14">&Agrave; la fin de ce module, vous serez capable de :</p><ul class="list _bullet" id="-3ekzax_15"><li class="list__item" id="-3ekzax_16"><p id="-3ekzax_21">Expliquer pourquoi le <code class="code" id="-3ekzax_22">RecyclerView</code> est indispensable pour afficher de longues listes.</p></li><li class="list__item" id="-3ekzax_17"><p id="-3ekzax_23">Comprendre le principe fondamental du recyclage des vues.</p></li><li class="list__item" id="-3ekzax_18"><p id="-3ekzax_24">Identifier et impl&eacute;menter les trois piliers du <code class="code" id="-3ekzax_25">RecyclerView</code>: <code class="code" id="-3ekzax_26">Adapter</code>, <code class="code" id="-3ekzax_27">ViewHolder</code> et <code class="code" id="-3ekzax_28">LayoutManager</code>.</p></li><li class="list__item" id="-3ekzax_19"><p id="-3ekzax_29">Lier une liste de donn&eacute;es (objets Kotlin) &agrave; une interface utilisateur.</p></li><li class="list__item" id="-3ekzax_20"><p id="-3ekzax_30">Mettre &agrave; jour dynamiquement le contenu du <code class="code" id="-3ekzax_31">RecyclerView</code> (ajout d'&eacute;l&eacute;ments).</p></li></ul></section><section class="chapter"><h2 id="introduction" data-toc="introduction">Introduction</h2><p id="-3ekzax_32">Imaginez que vous &ecirc;tes le g&eacute;rant d'un restaurant gastronomique avec un menu de 10 000 plats. Si vous deviez imprimer le menu complet pour chaque client, ce serait un livre &eacute;norme, lourd, et incroyablement co&ucirc;teux &agrave; produire. De plus, chaque client ne regarde qu'une petite portion du menu &agrave; la fois.</p><p id="-3ekzax_33">Quelle serait la solution intelligente ? Vous n'imprimez qu'une dizaine de pages sur un beau porte-menu. Quand le client fait d&eacute;filer, au lieu de lui donner de nouvelles pages, vous effacez tr&egrave;s rapidement le contenu des pages qu'il ne voit plus et vous y &eacute;crivez les nouveaux plats. Vous &quot;recyclez&quot; constamment le m&ecirc;me petit nombre de pages pour afficher une quantit&eacute; virtuellement infinie d'informations.</p><p id="-3ekzax_34">Le <code class="code" id="-3ekzax_35">RecyclerView</code> est ce porte-menu intelligent. Il vous permet d'afficher des milliers d'&eacute;l&eacute;ments de mani&egrave;re incroyablement fluide et performante, en ne cr&eacute;ant que le strict minimum de &quot;vues&quot; n&eacute;cessaires pour remplir l'&eacute;cran, et en les r&eacute;utilisant &agrave; l'infini. Ma&icirc;triser le <code class="code" id="-3ekzax_36">RecyclerView</code>, c'est ma&icirc;triser l'affichage de donn&eacute;es sur Android.</p></section><section class="chapter"><h2 id="notions-abord-es" data-toc="notions-abord-es">Notions abord&eacute;es</h2><ul class="list _bullet" id="-3ekzax_37"><li class="list__item" id="-3ekzax_39"><p id="-3ekzax_42">Le Concept Cl&eacute; : Le recyclage des vues pour la performance.</p></li><li class="list__item" id="-3ekzax_40"><p id="-3ekzax_43">Les 3 Piliers du RecyclerView : <code class="code" id="-3ekzax_44">Adapter</code>, <code class="code" id="-3ekzax_45">ViewHolder</code>, <code class="code" id="-3ekzax_46">LayoutManager</code>.</p></li><li class="list__item" id="-3ekzax_41"><p id="-3ekzax_47">Mise &agrave; jour des donn&eacute;es.</p></li></ul></section><section class="chapter"><h2 id="le-concept-cl-le-recyclage-des-vues" data-toc="le-concept-cl-le-recyclage-des-vues">Le Concept Cl&eacute; : Le recyclage des vues</h2><section class="chapter"><h3 id="introduction-la-notion" data-toc="introduction-la-notion">Introduction &agrave; la notion</h3><p id="-3ekzax_50">Comme pour notre menu de restaurant, le secret de la performance n'est pas de tout cr&eacute;er d'un coup, mais de r&eacute;utiliser intelligemment un petit nombre d'&eacute;l&eacute;ments. C'est le principe fondamental qui diff&eacute;rencie un <code class="code" id="-3ekzax_51">RecyclerView</code> d'une simple liste dans un <code class="code" id="-3ekzax_52">ScrollView</code>, et c'est ce qui le rend capable de g&eacute;rer des listes immenses sans jamais ralentir.</p></section><section class="chapter"><h3 id="explication-de-la-notion" data-toc="explication-de-la-notion">Explication de la notion</h3><p id="-3ekzax_53">Si vous placiez 1000 <code class="code" id="-3ekzax_59">TextView</code> dans un <code class="code" id="-3ekzax_60">LinearLayout</code> &agrave; l'int&eacute;rieur d'un <code class="code" id="-3ekzax_61">ScrollView</code>, Android cr&eacute;erait 1000 objets <code class="code" id="-3ekzax_62">TextView</code> en m&eacute;moire, m&ecirc;me si seulement 10 sont visibles &agrave; l'&eacute;cran. C'est un gaspillage &eacute;norme de m&eacute;moire et de puissance de calcul, ce qui provoquerait des ralentissements (&quot;lag&quot;) lors du d&eacute;filement.</p><p id="-3ekzax_54">Le <code class="code" id="-3ekzax_63">RecyclerView</code> r&eacute;sout ce probl&egrave;me de mani&egrave;re brillante :</p><ol class="list _decimal" id="-3ekzax_55" type="1"><li class="list__item" id="-3ekzax_64"><p id="-3ekzax_67">Il ne cr&eacute;e que le nombre de vues d'item n&eacute;cessaires pour remplir l'&eacute;cran (disons 10), plus quelques-unes en r&eacute;serve.</p></li><li class="list__item" id="-3ekzax_65"><p id="-3ekzax_68">Quand l'utilisateur fait d&eacute;filer et qu'un item sort de l'&eacute;cran (item 1), le <code class="code" id="-3ekzax_69">RecyclerView</code> ne le d&eacute;truit pas. Il le met de c&ocirc;t&eacute;, dans un &quot;bac de recyclage&quot;.</p></li><li class="list__item" id="-3ekzax_66"><p id="-3ekzax_70">Quand un nouvel item doit appara&icirc;tre &agrave; l'&eacute;cran (item 11), le <code class="code" id="-3ekzax_71">RecyclerView</code> prend la vue de l'item 1 dans le bac, et au lieu de la recr&eacute;er, il se contente de mettre &agrave; jour son contenu avec les donn&eacute;es de l'item 11.</p></li></ol><p id="-3ekzax_56">Ce processus est extr&ecirc;mement rapide et efficace.</p><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="486px" preserveAspectRatio="none" style="width:844px;height:486px;background:#FFFFFF;" version="1.1" viewBox="0 0 844 486" width="844px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="330" x="256.5" y="28.5352">Processus de Recyclage dans un RecyclerView</text><rect fill="#FFFFFF" height="320.7949" style="stroke:#181818;stroke-width:1.0;" width="10" x="233" y="105.2871"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="238" x2="238" y1="73.9766" y2="451.082"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="532.5" x2="532.5" y1="73.9766" y2="451.082"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102" x="187" y="42.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="194" y="63.0234">RecyclerView</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102" x="187" y="450.082"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="194" y="470.6172">RecyclerView</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="69" x="498.5" y="42.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="505.5" y="63.0234">Adapter</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="69" x="498.5" y="450.082"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="505.5" y="470.6172">Adapter</text><rect fill="#FFFFFF" height="320.7949" style="stroke:#181818;stroke-width:1.0;" width="10" x="233" y="105.2871"/><polygon fill="#181818" points="221,101.2871,231,105.2871,221,109.2871,225,105.2871" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="0" x2="227" y1="105.2871" y2="105.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="214" x="7" y="100.5449">L'utilisateur fait d&#233;filer vers le bas</text><line style="stroke:#181818;stroke-width:1.0;" x1="243" x2="285" y1="134.5977" y2="134.5977"/><line style="stroke:#181818;stroke-width:1.0;" x1="285" x2="285" y1="134.5977" y2="147.5977"/><line style="stroke:#181818;stroke-width:1.0;" x1="244" x2="285" y1="147.5977" y2="147.5977"/><polygon fill="#181818" points="254,143.5977,244,147.5977,254,151.5977,250,147.5977" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218" x="250" y="129.8555">L'item 1 sort de l'&#233;cran par le haut.</text><line style="stroke:#181818;stroke-width:1.0;" x1="243" x2="285" y1="176.9082" y2="176.9082"/><line style="stroke:#181818;stroke-width:1.0;" x1="285" x2="285" y1="176.9082" y2="189.9082"/><line style="stroke:#181818;stroke-width:1.0;" x1="244" x2="285" y1="189.9082" y2="189.9082"/><polygon fill="#181818" points="254,185.9082,244,189.9082,254,193.9082,250,189.9082" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="271" x="250" y="172.166">L'item 1 est plac&#233; dans le bac de recyclage.</text><line style="stroke:#181818;stroke-width:1.0;" x1="243" x2="285" y1="219.2188" y2="219.2188"/><line style="stroke:#181818;stroke-width:1.0;" x1="285" x2="285" y1="219.2188" y2="232.2188"/><line style="stroke:#181818;stroke-width:1.0;" x1="244" x2="285" y1="232.2188" y2="232.2188"/><polygon fill="#181818" points="254,228.2188,244,232.2188,254,236.2188,250,232.2188" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="249" x="250" y="214.4766">L'espace pour l'item 11 appara&#238;t en bas.</text><polygon fill="#181818" points="521,257.5293,531,261.5293,521,265.5293,525,261.5293" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="243" x2="527" y1="261.5293" y2="261.5293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="230" x="250" y="256.7871">"J'ai besoin d'une vue pour l'item 11"</text><line style="stroke:#181818;stroke-width:1.0;" x1="533" x2="575" y1="290.8398" y2="290.8398"/><line style="stroke:#181818;stroke-width:1.0;" x1="575" x2="575" y1="290.8398" y2="303.8398"/><line style="stroke:#181818;stroke-width:1.0;" x1="534" x2="575" y1="303.8398" y2="303.8398"/><polygon fill="#181818" points="544,299.8398,534,303.8398,544,307.8398,540,303.8398" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="237" x="540" y="286.0977">Prend la vue de l'item 1 depuis le bac.</text><line style="stroke:#181818;stroke-width:1.0;" x1="533" x2="575" y1="348.4609" y2="348.4609"/><line style="stroke:#181818;stroke-width:1.0;" x1="575" x2="575" y1="348.4609" y2="361.4609"/><line style="stroke:#181818;stroke-width:1.0;" x1="534" x2="575" y1="361.4609" y2="361.4609"/><polygon fill="#181818" points="544,357.4609,534,361.4609,544,365.4609,540,361.4609" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="297" x="540" y="328.4082">Met &#224; jour la vue avec les donn&#233;es de l'item 11.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="540" y="343.7188">(Appel &#224; onBindViewHolder)</text><polygon fill="#181818" points="254,386.7715,244,390.7715,254,394.7715,250,390.7715" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="248" x2="532" y1="390.7715" y2="390.7715"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="246" x="260" y="386.0293">Retourne la vue recycl&#233;e et mise &#224; jour.</text><line style="stroke:#181818;stroke-width:1.0;" x1="243" x2="285" y1="425.082" y2="425.082"/><line style="stroke:#181818;stroke-width:1.0;" x1="285" x2="285" y1="425.082" y2="438.082"/><line style="stroke:#181818;stroke-width:1.0;" x1="238" x2="285" y1="438.082" y2="438.082"/><polygon fill="#181818" points="248,434.082,238,438.082,248,442.082,244,438.082" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="250" x="250" y="420.3398">Affiche la vue &#224; la position de l'item 11.</text><!--SRC=[RP6_JWCn3CRtF8NLfJ2qKbS6f38X15BLeHEBcxZKA4sYn7U8js6zXPUu5yDtlQD_rCrA_Fk-pxQmU89LZfPAgGeuWZNPR-lnWy1XA525uONoXkdBc8HPs7B2830v_ve05bXlBXkM3fDGxl-6sfZPx54RuG5UfvMmvu92LOOTie1hcnsh8jIK2sYuBHQ3LhZMfaxUA7dYMUW02oWnInVUJzl6PWoW8JfuZvNCRn9K1997spR7ENidssdaSG7pAoyg2Ir1YfhL3peBmAHUsFuAKEZ2ZdR3j4fENgR8iAKIEO2RLe6Whgvr9iQCn0MyoXGSUEoHVi9X04UfuZ7t_3RyHWBj3tpsJaS9hCagfAUE8RGDbNFHnVmzt2rJ8jzXCJnnSDrfdwDtbEzF9kDIrYIghGCDwiVTgIoeyu4BZVQNkrpkTcpt_vJsQ9LYOU4OBWCPHsVN_mC0]--></g></svg></div></section></section><section class="chapter"><h2 id="les-3-piliers-du-recyclerview" data-toc="les-3-piliers-du-recyclerview">Les 3 Piliers du RecyclerView</h2><section class="chapter"><h3 id="introduction-la-notion_2" data-toc="introduction-la-notion_2">Introduction &agrave; la notion</h3><p id="-3ekzax_76">Pour que cette magie du recyclage op&egrave;re, le <code class="code" id="-3ekzax_78">RecyclerView</code> a besoin de trois assistants, chacun avec un r&ocirc;le tr&egrave;s pr&eacute;cis. C'est une &eacute;quipe parfaitement coordonn&eacute;e :</p><ol class="list _decimal" id="-3ekzax_77" type="1"><li class="list__item" id="-3ekzax_79"><p id="-3ekzax_82">Le <span class="control" id="-3ekzax_83"><code class="code" id="-3ekzax_88">ViewHolder</code></span> est l' <span class="control" id="-3ekzax_84">acteur</span>. Il conna&icirc;t son costume (<code class="code" id="-3ekzax_85">item_layout.xml</code>) et sait o&ugrave; se trouvent ses accessoires (<code class="code" id="-3ekzax_86">TextView</code>, <code class="code" id="-3ekzax_87">ImageView</code>...). Il ne sait pas quel r&ocirc;le il joue.</p></li><li class="list__item" id="-3ekzax_80"><p id="-3ekzax_89">L' <span class="control" id="-3ekzax_90"><code class="code" id="-3ekzax_93">Adapter</code></span> est le <span class="control" id="-3ekzax_91">metteur en sc&egrave;ne</span>. Il a le script complet (la liste de donn&eacute;es). Il prend un acteur (<code class="code" id="-3ekzax_92">ViewHolder</code>), lui assigne un r&ocirc;le (les donn&eacute;es d'un item pr&eacute;cis) et lui dit &quot;Joue cette sc&egrave;ne !&quot;.</p></li><li class="list__item" id="-3ekzax_81"><p id="-3ekzax_94">Le <span class="control" id="-3ekzax_95"><code class="code" id="-3ekzax_99">LayoutManager</code></span> est le <span class="control" id="-3ekzax_96">r&eacute;gisseur du plateau</span>. Il d&eacute;cide de la disposition de la sc&egrave;ne : est-ce que les acteurs se pr&eacute;sentent en une seule file indienne (<code class="code" id="-3ekzax_97">LinearLayoutManager</code>) ou en grille (<code class="code" id="-3ekzax_98">GridLayoutManager</code>) ?</p></li></ol></section><section class="chapter"><h3 id="explication-de-la-notion_1" data-toc="explication-de-la-notion_1">Explication de la notion</h3><p id="-3ekzax_100">Pour faire fonctionner un <code class="code" id="-3ekzax_110">RecyclerView</code>, vous devez toujours fournir ces trois composants.</p><p id="-3ekzax_101"><span class="control" id="-3ekzax_111">1. Le <code class="code" id="-3ekzax_112">ViewHolder</code>: Le moule d'un item</span></p><p id="-3ekzax_102">C'est une simple classe qui h&eacute;rite de <code class="code" id="-3ekzax_113">RecyclerView.ViewHolder</code>. Son unique responsabilit&eacute; est de <span class="control" id="-3ekzax_114">contenir les r&eacute;f&eacute;rences</span> aux vues &agrave; l'int&eacute;rieur d'un seul item de la liste. Gr&acirc;ce &agrave; View Binding, c'est tr&egrave;s simple.</p><div class="code-block" data-lang="kotlin">
// On lie le ViewHolder au layout d'un item : item_user.xml -&gt; ItemUserBinding
class UserViewHolder(val binding: ItemUserBinding) :
    RecyclerView.ViewHolder(binding.root)
</div><p id="-3ekzax_104"><span class="control" id="-3ekzax_115">2. L' <code class="code" id="-3ekzax_116">Adapter</code>: Le chef d'orchestre</span></p><p id="-3ekzax_105">C'est la pi&egrave;ce ma&icirc;tresse. Il h&eacute;rite de <code class="code" id="-3ekzax_117">RecyclerView.Adapter</code> et doit impl&eacute;menter trois m&eacute;thodes cruciales :</p><ul class="list _bullet" id="-3ekzax_106"><li class="list__item" id="-3ekzax_118"><p id="-3ekzax_121"><code class="code" id="-3ekzax_122">onCreateViewHolder()</code>: Appel&eacute;e par le <code class="code" id="-3ekzax_123">RecyclerView</code> quand il a besoin de cr&eacute;er un <span class="control" id="-3ekzax_124">nouveau</span> <code class="code" id="-3ekzax_125">ViewHolder</code> (quand le bac de recyclage est vide). C'est ici qu'on &quot;gonfle&quot; le layout XML de l'item.</p></li><li class="list__item" id="-3ekzax_119"><p id="-3ekzax_126"><code class="code" id="-3ekzax_127">onBindViewHolder()</code>: Appel&eacute;e quand le <code class="code" id="-3ekzax_128">RecyclerView</code> veut <span class="control" id="-3ekzax_129">r&eacute;utiliser</span> un <code class="code" id="-3ekzax_130">ViewHolder</code> existant pour afficher les donn&eacute;es d'un nouvel item. C'est ici qu'on lie les donn&eacute;es &agrave; la vue.</p></li><li class="list__item" id="-3ekzax_120"><p id="-3ekzax_131"><code class="code" id="-3ekzax_132">getItemCount()</code>: Doit simplement renvoyer le nombre total d'&eacute;l&eacute;ments dans votre liste de donn&eacute;es.</p></li></ul><p id="-3ekzax_107"><span class="control" id="-3ekzax_133">3. Le <code class="code" id="-3ekzax_134">LayoutManager</code>: Le metteur en page</span></p><p id="-3ekzax_108">C'est l'objet qui dit au <code class="code" id="-3ekzax_135">RecyclerView</code> comment positionner les items. Vous n'avez g&eacute;n&eacute;ralement pas besoin de le cr&eacute;er vous-m&ecirc;me, il suffit d'utiliser les impl&eacute;mentations fournies par Android :</p><ul class="list _bullet" id="-3ekzax_109"><li class="list__item" id="-3ekzax_136"><p id="-3ekzax_138"><code class="code" id="-3ekzax_139">LinearLayoutManager</code>: Pour une liste verticale ou horizontale.</p></li><li class="list__item" id="-3ekzax_137"><p id="-3ekzax_140"><code class="code" id="-3ekzax_141">GridLayoutManager</code>: Pour une grille.</p></li></ul></section><section class="chapter"><h3 id="exemple-de-code-afficher-une-liste-de-t-ches" data-toc="exemple-de-code-afficher-une-liste-de-t-ches">Exemple de code : Afficher une liste de t&acirc;ches</h3><p id="-3ekzax_142"><span class="control" id="-3ekzax_152">&Eacute;tape 1 : Le mod&egrave;le de donn&eacute;es (<code class="code" id="-3ekzax_153">Todo.kt</code>)</span></p><div class="code-block" data-lang="kotlin">
package fr.formation.recyclerview

data class Todo(
    val title: String,
    var isDone: Boolean = false
)
</div><p id="-3ekzax_144"><span class="control" id="-3ekzax_154">&Eacute;tape 2 : Le layout pour un seul item (<code class="code" id="-3ekzax_155">item_todo.xml</code>)</span></p><div class="code-block" data-lang="markup">
&lt;!-- res/layout/item_todo.xml --&gt;
&lt;LinearLayout
        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:padding=&quot;16dp&quot;&gt;

    &lt;TextView
            android:id=&quot;@+id/todoTitleTextView&quot;
            android:layout_width=&quot;match_parent&quot;
            android:layout_height=&quot;wrap_content&quot;
            android:textSize=&quot;18sp&quot;/&gt;

&lt;/LinearLayout&gt;
</div><p id="-3ekzax_146"><span class="control" id="-3ekzax_156">&Eacute;tape 3 : L'Adapter (<code class="code" id="-3ekzax_157">TodoAdapter.kt</code>)</span></p><div class="code-block" data-lang="kotlin">
package fr.formation.recyclerview

import android.view.LayoutInflater
import android.view.ViewGroup
import androidx.recyclerview.widget.RecyclerView
import fr.formation.recyclerview.databinding.ItemTodoBinding

// L'Adapter a besoin de la liste de données pour travailler
class TodoAdapter(private val todos: List&lt;Todo&gt;) :
    RecyclerView.Adapter&lt;TodoAdapter.TodoViewHolder&gt;() {

    // Le ViewHolder interne, il contient la référence au binding de l'item
    inner class TodoViewHolder(val binding: ItemTodoBinding) :
        RecyclerView.ViewHolder(binding.root)

    // Appelé pour CRÉER une nouvelle vue d'item (quand le bac est vide)
    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): TodoViewHolder {
        // On &quot;gonfle&quot; le layout XML de notre item
        val binding = ItemTodoBinding
            .inflate(LayoutInflater.from(parent.context), parent, false)
        return TodoViewHolder(binding)
    }

    // Appelé pour METTRE À JOUR une vue d'item avec de nouvelles données
    override fun onBindViewHolder(holder: TodoViewHolder, position: Int) {
        // On récupère la tâche à la position donnée
        val todo = todos[position]
        // On utilise le holder pour accéder aux vues et les mettre à jour
        holder.binding.todoTitleTextView.text = todo.title
    }

    // Doit renvoyer le nombre total d'items dans la liste
    override fun getItemCount(): Int {
        return todos.size
    }
}
</div><p id="-3ekzax_148"><span class="control" id="-3ekzax_158">&Eacute;tape 4 : Le layout de l'Activity (<code class="code" id="-3ekzax_159">activity_main.xml</code>)</span></p><div class="code-block" data-lang="markup">

&lt;androidx.recyclerview.widget.RecyclerView
        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
        android:id=&quot;@+id/recyclerView&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;match_parent&quot;
        app:layoutManager=&quot;androidx.recyclerview.widget.LinearLayoutManager&quot;/&gt;
</div><p id="-3ekzax_150"><span class="control" id="-3ekzax_160">&Eacute;tape 5 : L'Activity qui assemble tout (<code class="code" id="-3ekzax_161">MainActivity.kt</code>)</span></p><div class="code-block" data-lang="kotlin">
package fr.formation.recyclerview

import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import androidx.recyclerview.widget.LinearLayoutManager
import fr.formation.recyclerview.databinding.ActivityMainBinding

class MainActivity : AppCompatActivity() {
    private lateinit var binding: ActivityMainBinding

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        binding = ActivityMainBinding.inflate(layoutInflater)
        setContentView(binding.root)

        // 1. Créer la liste de données
        val todoList = mutableListOf(
            Todo(&quot;Acheter du lait&quot;),
            Todo(&quot;Apprendre RecyclerView&quot;),
            Todo(&quot;Faire le TP&quot;),
            Todo(&quot;Aller courir&quot;)
        )

        // 2. Créer une instance de notre Adapter
        val adapter = TodoAdapter(todoList)

        // 3. Lier l'adapter au RecyclerView
        binding.recyclerView.adapter = adapter

        // 4. (Optionnel si déjà dans le XML) Définir le LayoutManager
        binding.recyclerView.layoutManager = LinearLayoutManager(this)
    }
}
</div></section><section class="chapter"><h3 id="exercice-1-cr-er-une-liste-de-contacts" data-toc="exercice-1-cr-er-une-liste-de-contacts">Exercice 1 : Cr&eacute;er une liste de contacts</h3><p id="-3ekzax_162"><span class="control" id="-3ekzax_165">&Eacute;nonc&eacute; :</span> Cr&eacute;ez une application qui affiche une liste de contacts. Chaque contact a un nom et une adresse e-mail.</p><ol class="list _decimal" id="-3ekzax_163" type="1"><li class="list__item" id="-3ekzax_166"><p id="-3ekzax_170">Cr&eacute;ez une <code class="code" id="-3ekzax_171">data class Contact(val name: String, val email: String)</code>.</p></li><li class="list__item" id="-3ekzax_167"><p id="-3ekzax_172">Cr&eacute;ez un layout d'item <code class="code" id="-3ekzax_173">item_contact.xml</code> avec deux <code class="code" id="-3ekzax_174">TextView</code>.</p></li><li class="list__item" id="-3ekzax_168"><p id="-3ekzax_175">Cr&eacute;ez un <code class="code" id="-3ekzax_176">ContactAdapter</code> qui g&egrave;re la liaison des donn&eacute;es.</p></li><li class="list__item" id="-3ekzax_169"><p id="-3ekzax_177">Dans votre <code class="code" id="-3ekzax_178">MainActivity</code>, cr&eacute;ez une liste de <code class="code" id="-3ekzax_179">Contact</code> et affichez-la.</p></li></ol><section class="chapter"><div class="collapse"><div class="collapse__title"><h4 id="correction-exercice-1" data-toc="correction-exercice-1"><span class="control" id="-3ekzax_190">Correction exercice 1</span></h4></div><div class="collapse__content"><p id="-3ekzax_181"><span class="control" id="-3ekzax_191">1. <code class="code" id="-3ekzax_192">Contact.kt</code></span></p><div class="code-block" data-lang="kotlin">
data class Contact(val name: String, val email: String)
</div><p id="-3ekzax_183"><span class="control" id="-3ekzax_193">2. <code class="code" id="-3ekzax_194">item_contact.xml</code></span></p><div class="code-block" data-lang="markup">

&lt;LinearLayout
        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:orientation=&quot;vertical&quot;
        android:padding=&quot;16dp&quot;&gt;

    &lt;TextView
            android:id=&quot;@+id/nameTextView&quot;
            android:layout_width=&quot;wrap_content&quot;
            android:layout_height=&quot;wrap_content&quot;
            android:textStyle=&quot;bold&quot;
            android:textSize=&quot;16sp&quot;/&gt;

    &lt;TextView
            android:id=&quot;@+id/emailTextView&quot;
            android:layout_width=&quot;wrap_content&quot;
            android:layout_height=&quot;wrap_content&quot;
            android:textColor=&quot;@android:color/darker_gray&quot;/&gt;
&lt;/LinearLayout&gt;
</div><p id="-3ekzax_185"><span class="control" id="-3ekzax_195">3. <code class="code" id="-3ekzax_196">ContactAdapter.kt</code></span></p><div class="code-block" data-lang="kotlin">
import android.view.LayoutInflater
import android.view.ViewGroup
import androidx.recyclerview.widget.RecyclerView
import fr.formation.recyclerview.databinding.ItemContactBinding

class ContactAdapter(private val contacts: List&lt;Contact&gt;) :
    RecyclerView.Adapter&lt;ContactAdapter.ContactViewHolder&gt;() {

    inner class ContactViewHolder(val binding: ItemContactBinding) :
        RecyclerView.ViewHolder(binding.root)

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ContactViewHolder {
        // Ici ItemContactBinding fait référence au layout item_contact.xml 
        // transformé en classe par le processus de View Binding
        // L'inflation consiste à stocker en mémoire des instances correspondants
        // aux objets du layout (TextView, ButtonView...)
        val binding = ItemContactBinding
            .inflate(LayoutInflater.from(parent.context), parent, false)
        return ContactViewHolder(binding)
    }

    override fun onBindViewHolder(holder: ContactViewHolder, position: Int) {
        val contact = contacts[position]
        holder.binding.nameTextView.text = contact.name
        holder.binding.emailTextView.text = contact.email
    }

    override fun getItemCount() = contacts.size
}
</div><p id="-3ekzax_187"><span class="control" id="-3ekzax_197">4. <code class="code" id="-3ekzax_198">MainActivity.kt</code> (la partie <code class="code" id="-3ekzax_199">onCreate</code>)</span></p><div class="code-block" data-lang="kotlin">
override fun onCreate(savedInstanceState: Bundle?) {
    // ... code du binding ...

    val contactList = listOf(
        Contact(&quot;Alice&quot;, &quot;alice@email.com&quot;),
        Contact(&quot;Bob&quot;, &quot;bob@email.com&quot;),
        Contact(&quot;Charlie&quot;, &quot;charlie@email.com&quot;)
    )
    val adapter = ContactAdapter(contactList)
    binding.recyclerView.adapter = adapter
    binding.recyclerView.layoutManager = LinearLayoutManager(this)
}
</div></div></div></section></section></section><section class="chapter"><h2 id="mise-jour-des-donn-es" data-toc="mise-jour-des-donn-es">Mise &agrave; jour des donn&eacute;es</h2><section class="chapter"><h3 id="introduction-la-notion_1" data-toc="introduction-la-notion_1">Introduction &agrave; la notion</h3><p id="-3ekzax_202">Notre liste est belle, mais statique. Que se passe-t-il si l'utilisateur veut ajouter un &eacute;l&eacute;ment ? Nous ne pouvons pas simplement modifier notre liste de donn&eacute;es, il faut aussi <span class="control" id="-3ekzax_203">notifier l'adapter</span> du changement pour qu'il puisse mettre &agrave; jour l'affichage.</p></section><section class="chapter"><h3 id="explication-de-la-notion_2" data-toc="explication-de-la-notion_2">Explication de la notion</h3><p id="-3ekzax_204">L'adapter poss&egrave;de des m&eacute;thodes pour &ecirc;tre notifi&eacute; des changements :</p><ul class="list _bullet" id="-3ekzax_205"><li class="list__item" id="-3ekzax_208"><p id="-3ekzax_212"><code class="code" id="-3ekzax_213">notifyDataSetChanged()</code>: La m&eacute;thode &quot;brutale&quot;. Elle dit &agrave; l'adapter que &quot;tout a chang&eacute;&quot; et le force &agrave; redessiner toute la liste. C'est simple mais <span class="control" id="-3ekzax_214">inefficace</span> et annule toutes les animations. &Agrave; &eacute;viter si possible.</p></li><li class="list__item" id="-3ekzax_209"><p id="-3ekzax_215"><code class="code" id="-3ekzax_216">notifyItemInserted(position)</code>: Notifie l'adapter qu'un nouvel item a &eacute;t&eacute; ajout&eacute; &agrave; une position pr&eacute;cise. C'est beaucoup plus efficace et permet de jolies animations.</p></li><li class="list__item" id="-3ekzax_210"><p id="-3ekzax_217"><code class="code" id="-3ekzax_218">notifyItemRemoved(position)</code>: Notifie qu'un item a &eacute;t&eacute; retir&eacute;.</p></li><li class="list__item" id="-3ekzax_211"><p id="-3ekzax_219"><code class="code" id="-3ekzax_220">notifyItemChanged(position)</code>: Notifie qu'un item a &eacute;t&eacute; mis &agrave; jour.</p></li></ul><aside class="prompt" data-type="tip" data-title="" id="-3ekzax_206"><p id="-3ekzax_221">Pour des mises &agrave; jour complexes, Google recommande <code class="code" id="-3ekzax_222">ListAdapter</code> avec <code class="code" id="-3ekzax_223">DiffUtil</code>, une solution plus avanc&eacute;e qui calcule automatiquement les diff&eacute;rences entre deux listes et applique les bonnes notifications. Nous nous concentrerons ici sur les notifications manuelles pour bien comprendre le principe.</p></aside></section></section><section class="chapter"><h2 id="tp-7-la-todo-list-interactive" data-toc="tp-7-la-todo-list-interactive">TP 7 : La &quot;Todo List&quot; interactive</h2><p id="-3ekzax_224"><span class="control" id="-3ekzax_226">Objectif :</span> Cr&eacute;er une application de liste de t&acirc;ches o&ugrave; l'utilisateur peut ajouter de nouvelles t&acirc;ches qui apparaissent dynamiquement dans le <code class="code" id="-3ekzax_227">RecyclerView</code>.</p><section class="procedure-steps" id="-3ekzax_225"><ol class="list _decimal" id="-3ekzax_228" type="1"><li class="list__item" id="-3ekzax_229"><p id="-3ekzax_233"><span class="control" id="-3ekzax_234">Reprenez le code de l'exemple &quot;Afficher une liste de t&acirc;ches&quot;</span> (les 5 &eacute;tapes). Assurez-vous qu'il fonctionne et affiche la liste statique.</p></li><li class="list__item" id="-3ekzax_230"><p id="-3ekzax_235"><span class="control" id="-3ekzax_237">Modifiez <code class="code" id="-3ekzax_238">activity_main.xml</code>:</span></p><ul class="list _bullet" id="-3ekzax_236"><li class="list__item" id="-3ekzax_239"><p id="-3ekzax_241">Enveloppez votre <code class="code" id="-3ekzax_242">RecyclerView</code> dans un <code class="code" id="-3ekzax_243">ConstraintLayout</code> (ou <code class="code" id="-3ekzax_244">LinearLayout</code>).</p></li><li class="list__item" id="-3ekzax_240"><p id="-3ekzax_245">Ajoutez un <code class="code" id="-3ekzax_246">EditText</code> (<code class="code" id="-3ekzax_247">taskEditText</code>) et un <code class="code" id="-3ekzax_248">Button</code> (<code class="code" id="-3ekzax_249">addButton</code>) en bas de l'&eacute;cran pour permettre &agrave; l' utilisateur d'ajouter une t&acirc;che.</p></li></ul></li><li class="list__item" id="-3ekzax_231"><p id="-3ekzax_250"><span class="control" id="-3ekzax_252">Modifiez <code class="code" id="-3ekzax_253">MainActivity.kt</code>:</span></p><ul class="list _bullet" id="-3ekzax_251"><li class="list__item" id="-3ekzax_254"><p id="-3ekzax_257">Changez votre liste de <code class="code" id="-3ekzax_258">todoList</code> de <code class="code" id="-3ekzax_259">listOf</code> (immuable) &agrave; <code class="code" id="-3ekzax_260">mutableListOf</code> (mutable) pour pouvoir y ajouter des &eacute;l&eacute;ments.</p></li><li class="list__item" id="-3ekzax_255"><p id="-3ekzax_261">Passez cette liste mutable &agrave; votre <code class="code" id="-3ekzax_262">TodoAdapter</code>.</p></li><li class="list__item" id="-3ekzax_256"><p id="-3ekzax_263">Ajoutez un <code class="code" id="-3ekzax_264">setOnClickListener</code> sur votre <code class="code" id="-3ekzax_265">addButton</code>.</p></li></ul></li><li class="list__item" id="-3ekzax_232"><p id="-3ekzax_266"><span class="control" id="-3ekzax_268">Impl&eacute;mentez la logique du clic :</span></p><ul class="list _bullet" id="-3ekzax_267"><li class="list__item" id="-3ekzax_269"><p id="-3ekzax_271">Dans le listener, r&eacute;cup&eacute;rez le texte de <code class="code" id="-3ekzax_272">taskEditText</code>.</p></li><li class="list__item" id="-3ekzax_270"><p id="-3ekzax_273">Si le texte n'est pas vide :</p><ul class="list _bullet" id="-3ekzax_274"><li class="list__item" id="-3ekzax_275"><p id="-3ekzax_280">Cr&eacute;ez une nouvelle instance de <code class="code" id="-3ekzax_281">Todo</code>.</p></li><li class="list__item" id="-3ekzax_276"><p id="-3ekzax_282">Ajoutez ce nouvel objet &agrave; votre <code class="code" id="-3ekzax_283">todoList</code>.</p></li><li class="list__item" id="-3ekzax_277"><p id="-3ekzax_284"><span class="control" id="-3ekzax_285">Notifiez l'adapter</span> qu'un nouvel &eacute;l&eacute;ment a &eacute;t&eacute; ins&eacute;r&eacute; &agrave; la fin de la liste : <code class="code" id="-3ekzax_286">adapter.notifyItemInserted(todoList.size - 1)</code>.</p></li><li class="list__item" id="-3ekzax_278"><p id="-3ekzax_287">Videz l' <code class="code" id="-3ekzax_288">EditText</code>.</p></li><li class="list__item" id="-3ekzax_279"><p id="-3ekzax_289">(Bonus) Faites d&eacute;filer la liste jusqu'au nouvel &eacute;l&eacute;ment : <code class="code" id="-3ekzax_290">binding.recyclerView.scrollToPosition(todoList.size - 1)</code>.</p></li></ul></li></ul></li></ol><ol class="list _decimal"></ol></section></section><section class="chapter"><div class="collapse"><div class="collapse__title"><h2 id="correction-du-tp-7" data-toc="correction-du-tp-7">Correction du TP 7</h2></div><div class="collapse__content"><section class="chapter"><h3 id="pr-requis-le-code-de-d-part-tape-1" data-toc="pr-requis-le-code-de-d-part-tape-1">Pr&eacute;requis : Le Code de D&eacute;part (&Eacute;tape 1)</h3><p id="-3ekzax_297">Avant de commencer les modifications, voici le code de base fonctionnel pour afficher une liste statique.</p></section><section class="chapter"><h3 id="todo-kt-la-data-class" data-toc="todo-kt-la-data-class"><code class="code" id="-3ekzax_300">Todo.kt</code> (La <code class="code" id="-3ekzax_301">data class</code>)</h3><div class="code-block" data-lang="kotlin">
data class Todo(
    val title: String,
    var isChecked: Boolean = false
)
</div></section><section class="chapter"><h3 id="item-todo-xml-le-layout-pour-une-seule-t-che" data-toc="item-todo-xml-le-layout-pour-une-seule-t-che"><code class="code" id="-3ekzax_304">item_todo.xml</code> (Le layout pour une seule t&acirc;che)</h3><div class="code-block" data-lang="markup">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;wrap_content&quot;
    android:orientation=&quot;horizontal&quot;
    android:padding=&quot;16dp&quot;
    android:gravity=&quot;center_vertical&quot;&gt;

    &lt;CheckBox
        android:id=&quot;@+id/todoCheckBox&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot; /&gt;

    &lt;TextView
        android:id=&quot;@+id/todoTitleTextView&quot;
        android:layout_width=&quot;0dp&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_weight=&quot;1&quot;
        android:layout_marginStart=&quot;16dp&quot;
        android:textSize=&quot;18sp&quot;
        tools:text=&quot;Titre de la tâche&quot; /&gt;
&lt;/LinearLayout&gt;
</div></section><section class="chapter"><h3 id="todoadapter-kt-l-adaptateur" data-toc="todoadapter-kt-l-adaptateur"><code class="code" id="-3ekzax_308">TodoAdapter.kt</code> (L'adaptateur)</h3><div class="code-block" data-lang="kotlin">
import android.view.LayoutInflater
import android.view.ViewGroup
import androidx.recyclerview.widget.RecyclerView
import com.example.yourapplication.databinding.ItemTodoBinding // Adaptez le package

class TodoAdapter(private val todos: List&lt;Todo&gt;) : RecyclerView.Adapter&lt;TodoAdapter.TodoViewHolder&gt;() {

    inner class TodoViewHolder(val binding: ItemTodoBinding) : RecyclerView.ViewHolder(binding.root)

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): TodoViewHolder {
        val binding = ItemTodoBinding.inflate(LayoutInflater.from(parent.context), parent, false)
        return TodoViewHolder(binding)
    }

    override fun getItemCount(): Int = todos.size

    override fun onBindViewHolder(holder: TodoViewHolder, position: Int) {
        val todo = todos[position]
        holder.binding.todoTitleTextView.text = todo.title
        holder.binding.todoCheckBox.isChecked = todo.isChecked

        // Gérer le changement d'état de la checkbox
        holder.binding.todoCheckBox.setOnCheckedChangeListener { _, isChecked -&gt;
            todo.isChecked = isChecked
        }
    }
}
</div></section><section class="chapter"><h3 id="correction-du-tp" data-toc="correction-du-tp">Correction du TP</h3><section class="chapter"><h4 id="tape-2-modification-du-layout-activity-main-xml" data-toc="tape-2-modification-du-layout-activity-main-xml">&Eacute;tape 2 : Modification du Layout (<code class="code" id="-3ekzax_315">activity_main.xml</code>)</h4><p id="-3ekzax_312">Nous utilisons un <code class="code" id="-3ekzax_316">ConstraintLayout</code> pour positionner facilement les &eacute;l&eacute;ments : le <code class="code" id="-3ekzax_317">RecyclerView</code> prend tout l'espace disponible, et les champs d'ajout sont &quot;coll&eacute;s&quot; en bas.</p><p id="-3ekzax_313"><span class="control" id="-3ekzax_318">Fichier : <code class="code" id="-3ekzax_319">res/layout/activity_main.xml</code></span></p><div class="code-block" data-lang="markup">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    tools:context=&quot;.MainActivity&quot;&gt;

    &lt;!-- La liste qui affiche les tâches --&gt;
    &lt;androidx.recyclerview.widget.RecyclerView
        android:id=&quot;@+id/recyclerView&quot;
        android:layout_width=&quot;0dp&quot;
        android:layout_height=&quot;0dp&quot;
        app:layout_constraintTop_toTopOf=&quot;parent&quot;
        app:layout_constraintStart_toStartOf=&quot;parent&quot;
        app:layout_constraintEnd_toEndOf=&quot;parent&quot;
        app:layout_constraintBottom_toTopOf=&quot;@id/taskEditText&quot;
        android:layout_marginBottom=&quot;8dp&quot;/&gt;

    &lt;!-- Champ de saisie pour une nouvelle tâche --&gt;
    &lt;EditText
        android:id=&quot;@+id/taskEditText&quot;
        android:layout_width=&quot;0dp&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:hint=&quot;Entrez une nouvelle tâche&quot;
        android:inputType=&quot;text&quot;
        app:layout_constraintStart_toStartOf=&quot;parent&quot;
        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;
        app:layout_constraintEnd_toStartOf=&quot;@id/addButton&quot;
        android:layout_margin=&quot;16dp&quot; /&gt;

    &lt;!-- Bouton pour ajouter la tâche --&gt;
    &lt;Button
        android:id=&quot;@+id/addButton&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:text=&quot;Ajouter&quot;
        app:layout_constraintEnd_toEndOf=&quot;parent&quot;
        app:layout_constraintBottom_toBottomOf=&quot;@id/taskEditText&quot;
        app:layout_constraintTop_toTopOf=&quot;@id/taskEditText&quot;
        android:layout_marginEnd=&quot;16dp&quot;/&gt;

&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;
</div></section><section class="chapter"><h4 id="tape-3-4-modification-de-mainactivity-kt-et-logique-du-clic" data-toc="tape-3-4-modification-de-mainactivity-kt-et-logique-du-clic">&Eacute;tape 3 &amp; 4 : Modification de <code class="code" id="-3ekzax_324">MainActivity.kt</code> et Logique du Clic</h4><p id="-3ekzax_321">Voici le code final de l'activit&eacute;, int&eacute;grant toutes les modifications demand&eacute;es.</p><p id="-3ekzax_322"><span class="control" id="-3ekzax_325">Fichier : <code class="code" id="-3ekzax_326">MainActivity.kt</code></span></p><div class="code-block" data-lang="kotlin">
package com.example.yourapplication // Adaptez le package

import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import androidx.recyclerview.widget.LinearLayoutManager
import com.example.yourapplication.databinding.ActivityMainBinding // Adaptez le package

class MainActivity : AppCompatActivity() {

    private lateinit var binding: ActivityMainBinding
    private lateinit var todoAdapter: TodoAdapter // On déclare l'adapter en tant que propriété de la classe

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        binding = ActivityMainBinding.inflate(layoutInflater)
        setContentView(binding.root)

        // 1. Changer la liste de listOf à mutableListOf
        val todoList = mutableListOf(
            Todo(&quot;Faire les courses&quot;, true),
            Todo(&quot;Apprendre RecyclerView&quot;, false),
            Todo(&quot;Promener le chien&quot;, false)
        )

        // Initialiser l'adapter avec la liste mutable
        todoAdapter = TodoAdapter(todoList)

        // Configuration du RecyclerView
        binding.recyclerView.adapter = todoAdapter
        binding.recyclerView.layoutManager = LinearLayoutManager(this)

        // 2. Ajouter un setOnClickListener sur le bouton
        binding.addButton.setOnClickListener {
            // 3. Récupérer le texte de l'EditText
            val taskTitle = binding.taskEditText.text.toString().trim()

            // 4. Vérifier que le texte n'est pas vide
            if (taskTitle.isNotEmpty()) {
                // Créer une nouvelle tâche
                val newTodo = Todo(taskTitle)

                // Ajouter la tâche à la liste de données
                todoList.add(newTodo)

                // 5. Notifier l'adapter qu'un nouvel élément a été inséré
                // C'est beaucoup plus efficace que notifyDataSetChanged() !
                // Il ne met à jour que la vue concernée et permet une animation.
                val newPosition = todoList.size - 1
                todoAdapter.notifyItemInserted(newPosition)

                // 6. Vider l'EditText pour la prochaine saisie
                binding.taskEditText.text.clear()

                // 7. (Bonus) Faire défiler la liste pour voir le nouvel élément
                binding.recyclerView.scrollToPosition(newPosition)
            }
        }
    }
}
</div></section></section><section class="chapter"><h3 id="explications-d-taill-es-du-code" data-toc="explications-d-taill-es-du-code">Explications D&eacute;taill&eacute;es du Code</h3><ol class="list _decimal" id="-3ekzax_327" type="1"><li class="list__item" id="-3ekzax_329"><p id="-3ekzax_337"><span class="control" id="-3ekzax_338"><code class="code" id="-3ekzax_342">mutableListOf(...)</code></span>: Contrairement &agrave; <code class="code" id="-3ekzax_339">listOf</code> qui cr&eacute;e une liste en lecture seule (immuable), <code class="code" id="-3ekzax_340">mutableListOf</code> cr&eacute;e une liste que l'on peut modifier apr&egrave;s sa cr&eacute;ation, notamment avec la m&eacute;thode <code class="code" id="-3ekzax_341">.add()</code>. C'est essentiel pour notre fonctionnalit&eacute;.</p></li><li class="list__item" id="-3ekzax_330"><p id="-3ekzax_343"><span class="control" id="-3ekzax_344"><code class="code" id="-3ekzax_346">lateinit var todoAdapter</code></span>: On a besoin d'acc&eacute;der &agrave; l'adaptateur depuis le listener du bouton. En le d&eacute;clarant comme une propri&eacute;t&eacute; de la classe, il devient accessible partout dans <code class="code" id="-3ekzax_345">MainActivity</code>.</p></li><li class="list__item" id="-3ekzax_331"><p id="-3ekzax_347"><span class="control" id="-3ekzax_348"><code class="code" id="-3ekzax_349">binding.addButton.setOnClickListener</code></span>: On attache la logique &agrave; ex&eacute;cuter lorsque l'utilisateur clique sur le bouton &quot;Ajouter&quot;.</p></li><li class="list__item" id="-3ekzax_332"><p id="-3ekzax_350"><span class="control" id="-3ekzax_351"><code class="code" id="-3ekzax_353">val taskTitle = ... .trim()</code></span>: On r&eacute;cup&egrave;re le texte et on utilise <code class="code" id="-3ekzax_352">.trim()</code> par bonne pratique pour supprimer les espaces superflus au d&eacute;but et &agrave; la fin.</p></li><li class="list__item" id="-3ekzax_333"><p id="-3ekzax_354"><span class="control" id="-3ekzax_355"><code class="code" id="-3ekzax_356">if (taskTitle.isNotEmpty())</code></span>: Une simple v&eacute;rification pour s'assurer qu'on n'ajoute pas de t&acirc;ches vides &agrave; la liste.</p></li><li class="list__item" id="-3ekzax_334"><p id="-3ekzax_357"><span class="control" id="-3ekzax_358"><code class="code" id="-3ekzax_361">todoList.add(newTodo)</code></span>: On ajoute notre nouvel objet <code class="code" id="-3ekzax_359">Todo</code> &agrave; la liste. &Agrave; ce moment, la liste de donn&eacute;es est &agrave; jour, mais le <code class="code" id="-3ekzax_360">RecyclerView</code> ne le sait pas encore.</p></li><li class="list__item" id="-3ekzax_335"><p id="-3ekzax_362"><span class="control" id="-3ekzax_363"><code class="code" id="-3ekzax_369">todoAdapter.notifyItemInserted(newPosition)</code></span>: C'est <span class="control" id="-3ekzax_364">LA ligne la plus importante</span>. Elle informe l'adaptateur (et donc le <code class="code" id="-3ekzax_365">RecyclerView</code>) qu'une nouvelle donn&eacute;e a &eacute;t&eacute; ins&eacute;r&eacute;e &agrave; une position sp&eacute;cifique (<code class="code" id="-3ekzax_366">newPosition</code>, qui est la fin de la liste). Le <code class="code" id="-3ekzax_367">RecyclerView</code> va alors animer l'apparition de ce nouvel &eacute;l&eacute;ment. C'est bien plus performant que <code class="code" id="-3ekzax_368">notifyDataSetChanged()</code>, qui force une reconstruction compl&egrave;te de la liste.</p></li><li class="list__item" id="-3ekzax_336"><p id="-3ekzax_370"><span class="control" id="-3ekzax_371"><code class="code" id="-3ekzax_373">binding.recyclerView.scrollToPosition(newPosition)</code></span>: Cette ligne am&eacute;liore l'exp&eacute;rience utilisateur. Si la liste est d&eacute;j&agrave; longue, elle fait d&eacute;filer automatiquement le <code class="code" id="-3ekzax_372">RecyclerView</code> pour que l'&eacute;l&eacute;ment qui vient d'&ecirc;tre ajout&eacute; soit visible &agrave; l'&eacute;cran.</p></li></ol></section></div></div></section><section class="chapter"><h2 id="auto-valuation" data-toc="auto-valuation">Auto-&eacute;valuation</h2><p id="-3ekzax_374"><span class="control" id="-3ekzax_383">1. Pourquoi le <code class="code" id="-3ekzax_384">RecyclerView</code> est-il plus performant qu'un <code class="code" id="-3ekzax_385">LinearLayout</code> dans un <code class="code" id="-3ekzax_386">ScrollView</code> pour les longues listes ? (QCM)</span></p><ul class="list _bullet" id="-3ekzax_375"><li class="list__item" id="-3ekzax_387"><p id="-3ekzax_391">A) Il charge toutes les donn&eacute;es en avance pour un acc&egrave;s plus rapide.</p></li><li class="list__item" id="-3ekzax_388"><p id="-3ekzax_392">B) Il r&eacute;utilise un petit nombre de vues au lieu d'en cr&eacute;er une pour chaque &eacute;l&eacute;ment de donn&eacute;es.</p></li><li class="list__item" id="-3ekzax_389"><p id="-3ekzax_393">C) Il utilise le langage Kotlin qui est nativement plus rapide.</p></li><li class="list__item" id="-3ekzax_390"><p id="-3ekzax_394">D) Il compresse les images pour qu'elles prennent moins de place.</p></li></ul><p id="-3ekzax_376"><span class="control" id="-3ekzax_395">2. Quel est le r&ocirc;le de la m&eacute;thode <code class="code" id="-3ekzax_396">onBindViewHolder</code> dans l'Adapter ? (QCM)</span></p><ul class="list _bullet" id="-3ekzax_377"><li class="list__item" id="-3ekzax_397"><p id="-3ekzax_401">A) Cr&eacute;er une nouvelle instance de la vue d'un item.</p></li><li class="list__item" id="-3ekzax_398"><p id="-3ekzax_402">B) Renvoyer le nombre total d'items.</p></li><li class="list__item" id="-3ekzax_399"><p id="-3ekzax_403">C) Mettre &agrave; jour le contenu d'une vue d'item existante avec les donn&eacute;es d'une position sp&eacute;cifique.</p></li><li class="list__item" id="-3ekzax_400"><p id="-3ekzax_404">D) D&eacute;cider si la liste doit &ecirc;tre verticale ou en grille.</p></li></ul><p id="-3ekzax_378"><span class="control" id="-3ekzax_405">3. Lequel de ces trois composants est responsable de la disposition visuelle des items (en liste verticale, par exemple) ? (QCM)</span></p><ul class="list _bullet" id="-3ekzax_379"><li class="list__item" id="-3ekzax_406"><p id="-3ekzax_410">A) L'Adapter</p></li><li class="list__item" id="-3ekzax_407"><p id="-3ekzax_411">B) Le ViewHolder</p></li><li class="list__item" id="-3ekzax_408"><p id="-3ekzax_412">C) Le LayoutManager</p></li><li class="list__item" id="-3ekzax_409"><p id="-3ekzax_413">D) L'Activity</p></li></ul><p id="-3ekzax_380"><span class="control" id="-3ekzax_414">4. Quelle est la diff&eacute;rence fondamentale entre <code class="code" id="-3ekzax_415">onCreateViewHolder</code> et <code class="code" id="-3ekzax_416">onBindViewHolder</code>? (Question ouverte)</span></p><p id="-3ekzax_381"><span class="control" id="-3ekzax_417">5. Si vous ajoutez un &eacute;l&eacute;ment &agrave; votre liste de donn&eacute;es, que devez-vous faire imp&eacute;rativement pour que le changement soit visible &agrave; l'&eacute;cran ? (Question ouverte)</span></p><section class="chapter"><div class="collapse"><div class="collapse__title"><h3 id="correction-de-l-auto-valuation" data-toc="correction-de-l-auto-valuation">Correction de l'auto-&eacute;valuation</h3></div><div class="collapse__content"><p id="-3ekzax_418"><span class="control" id="-3ekzax_429">1. Pourquoi le <code class="code" id="-3ekzax_430">RecyclerView</code> est-il plus performant ?</span></p><ul class="list _bullet" id="-3ekzax_419"><li class="list__item" id="-3ekzax_431"><p id="-3ekzax_433"><span class="control" id="-3ekzax_434">R&eacute;ponse : B) Il r&eacute;utilise un petit nombre de vues au lieu d'en cr&eacute;er une pour chaque &eacute;l&eacute;ment de donn&eacute;es.</span></p></li><li class="list__item" id="-3ekzax_432"><p id="-3ekzax_435"><span class="control" id="-3ekzax_436">Justification :</span> C'est le principe m&ecirc;me du recyclage. En &eacute;vitant de cr&eacute;er des milliers d'objets en m&eacute;moire, il &eacute;conomise les ressources du syst&egrave;me et garantit un d&eacute;filement fluide.</p></li></ul><p id="-3ekzax_420"><span class="control" id="-3ekzax_437">2. Quel est le r&ocirc;le de la m&eacute;thode <code class="code" id="-3ekzax_438">onBindViewHolder</code>?</span></p><ul class="list _bullet" id="-3ekzax_421"><li class="list__item" id="-3ekzax_439"><p id="-3ekzax_441"><span class="control" id="-3ekzax_442">R&eacute;ponse : C) Mettre &agrave; jour le contenu d'une vue d'item existante avec les donn&eacute;es d'une position sp&eacute;cifique.</span></p></li><li class="list__item" id="-3ekzax_440"><p id="-3ekzax_443"><span class="control" id="-3ekzax_444">Justification :</span> <code class="code" id="-3ekzax_445">onBindViewHolder</code> est le c&oelig;ur du processus de recyclage. C'est l&agrave; qu'une vue (potentiellement recycl&eacute;e) est &quot;li&eacute;e&quot; (<code class="code" id="-3ekzax_446">bind</code>) &agrave; de nouvelles donn&eacute;es.</p></li></ul><p id="-3ekzax_422"><span class="control" id="-3ekzax_447">3. Lequel de ces trois composants est responsable de la disposition visuelle ?</span></p><ul class="list _bullet" id="-3ekzax_423"><li class="list__item" id="-3ekzax_448"><p id="-3ekzax_450"><span class="control" id="-3ekzax_451">R&eacute;ponse : C) Le LayoutManager.</span></p></li><li class="list__item" id="-3ekzax_449"><p id="-3ekzax_452"><span class="control" id="-3ekzax_453">Justification :</span> Le <code class="code" id="-3ekzax_454">LayoutManager</code> est le &quot;r&eacute;gisseur du plateau&quot;. C'est lui qui positionne les items. <code class="code" id="-3ekzax_455">LinearLayoutManager</code> les aligne, <code class="code" id="-3ekzax_456">GridLayoutManager</code> les met en grille.</p></li></ul><p id="-3ekzax_424"><span class="control" id="-3ekzax_457">4. Quelle est la diff&eacute;rence fondamentale entre <code class="code" id="-3ekzax_458">onCreateViewHolder</code> et <code class="code" id="-3ekzax_459">onBindViewHolder</code>?</span></p><ul class="list _bullet" id="-3ekzax_425"><li class="list__item" id="-3ekzax_460"><p id="-3ekzax_461"><span class="control" id="-3ekzax_462">R&eacute;ponse type :</span> <code class="code" id="-3ekzax_463">onCreateViewHolder</code> est appel&eacute;e lorsque le <code class="code" id="-3ekzax_464">RecyclerView</code> a besoin de <span class="control" id="-3ekzax_465">cr&eacute;er une nouvelle vue d'item &agrave; partir de z&eacute;ro</span>, car il n'y en a pas de disponible dans son bac de recyclage. C'est une op&eacute;ration &quot;co&ucirc;teuse&quot; qui n'est effectu&eacute;e que quelques fois au d&eacute;but. <code class="code" id="-3ekzax_466">onBindViewHolder</code>, en revanche, est appel&eacute;e pour <span class="control" id="-3ekzax_467">prendre une vue existante</span> (qu'elle soit nouvelle ou recycl&eacute;e) et la <span class="control" id="-3ekzax_468">remplir avec les donn&eacute;es</span> d'un item sp&eacute;cifique. C'est une op&eacute;ration &quot;l&eacute;g&egrave;re&quot; qui est appel&eacute;e constamment pendant le d&eacute;filement.</p></li></ul><p id="-3ekzax_426"><span class="control" id="-3ekzax_469">5. Si vous ajoutez un &eacute;l&eacute;ment &agrave; votre liste de donn&eacute;es, que devez-vous faire imp&eacute;rativement ?</span></p><ul class="list _bullet" id="-3ekzax_427"><li class="list__item" id="-3ekzax_470"><p id="-3ekzax_471"><span class="control" id="-3ekzax_472">R&eacute;ponse type :</span> Apr&egrave;s avoir modifi&eacute; la liste de donn&eacute;es (par exemple, avec <code class="code" id="-3ekzax_473">myList.add(newItem)</code>), il faut imp&eacute;rativement <span class="control" id="-3ekzax_474">notifier l'adapter du changement</span>. La meilleure fa&ccedil;on de le faire pour un ajout est d'appeler <code class="code" id="-3ekzax_475">adapter.notifyItemInserted(position)</code>, o&ugrave; <code class="code" id="-3ekzax_476">position</code> est l'index du nouvel &eacute;l&eacute;ment. Sans cette notification, la liste de donn&eacute;es et l'affichage seraient d&eacute;synchronis&eacute;s et le nouvel &eacute;l&eacute;ment n'appara&icirc;trait pas.</p></li></ul></div></div></section></section><section class="chapter"><h2 id="conclusion-du-module" data-toc="conclusion-du-module">Conclusion du module</h2><p id="-3ekzax_477">Vous venez de ma&icirc;triser le composant UI le plus important et le plus polyvalent d'Android. Le <code class="code" id="-3ekzax_480">RecyclerView</code> est partout, et savoir l'impl&eacute;menter est une comp&eacute;tence non n&eacute;gociable pour un d&eacute;veloppeur Android. Vous comprenez maintenant la logique de performance qui le sous-tend et vous savez comment assembler ses trois piliers pour afficher n'importe quelle sorte de liste.</p><p id="-3ekzax_478">Nous avons maintenant des applications qui peuvent avoir un ou plusieurs &eacute;crans (m&ecirc;me si nous n'avons pas encore vu comment passer de l'un &agrave; l'autre) et afficher des listes de donn&eacute;es complexes. C'est une base solide.</p><p id="-3ekzax_479">La prochaine grande &eacute;tape est de structurer nos applications pour qu'elles puissent grandir. Comment g&eacute;rer la navigation entre plusieurs &eacute;crans de mani&egrave;re propre ? Comment d&eacute;couper nos interfaces en composants r&eacute;utilisables ? C'est ce que nous allons d&eacute;couvrir dans la prochaine partie sur la Navigation et l'Architecture Multi-&Eacute;crans.</p></section><div class="last-modified">01 novembre 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="002-02-module-06.html" class="navigation-links__prev">Module 6 : Rendre l'Interface Interactive</a><a href="003-partie-3.html" class="navigation-links__next">Partie 3 : Navigation et Architecture Multi-&Eacute;crans</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>