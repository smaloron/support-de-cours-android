<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-11-07T11:34:39.818004"><title>Module 9 : Navigation Moderne avec le Navigation Component | Android</title><script type="application/json" id="virtual-toc-data">[{"id":"objectifs-p-dagogiques","level":0,"title":"Objectifs pédagogiques","anchor":"#objectifs-p-dagogiques"},{"id":"introduction","level":0,"title":"Introduction","anchor":"#introduction"},{"id":"notions-abord-es","level":0,"title":"Notions abordées","anchor":"#notions-abord-es"},{"id":"le-principe-de-la-single-activity-app","level":0,"title":"Le principe de la \"Single-Activity App\"","anchor":"#le-principe-de-la-single-activity-app"},{"id":"les-3-piliers-du-navigation-component","level":0,"title":"Les 3 Piliers du Navigation Component","anchor":"#les-3-piliers-du-navigation-component"},{"id":"passer-des-donn-es-de-mani-re-s-curis-e-avec-safe-args","level":0,"title":"Passer des Données de manière Sécurisée avec Safe Args","anchor":"#passer-des-donn-es-de-mani-re-s-curis-e-avec-safe-args"},{"id":"tp-9-mini-application-de-t-ches","level":0,"title":"TP 9 : Mini Application de Tâches","anchor":"#tp-9-mini-application-de-t-ches"},{"id":"correction-du-tp-9","level":0,"title":"Correction du TP 9","anchor":"#correction-du-tp-9"},{"id":"auto-valuation","level":0,"title":"Auto-évaluation","anchor":"#auto-valuation"},{"id":"conclusion-du-module","level":0,"title":"Conclusion du module","anchor":"#conclusion-du-module"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Module 9 : Navigation Moderne avec le Navigation Component | Android"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Android Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/003-02-module-09.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Module 9 : Navigation Moderne avec le Navigation Component | Android"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/003-02-module-09.html#webpage",
    "url": "writerside-documentation/003-02-module-09.html",
    "name": "Module 9 : Navigation Moderne avec le Navigation Component | Android",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Android Help"
}</script><!-- End Schema.org --></head><body data-id="003-02-module-09" data-main-title="Module 9 : Navigation Moderne avec le Navigation Component" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="003-Partie-3.md|Partie 3 : Navigation et Architecture Multi-Écrans"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Android  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="003-02-module-09" id="003-02-module-09.md">Module 9 : Navigation Moderne avec le Navigation Component</h1><section class="chapter"><h2 id="objectifs-p-dagogiques" data-toc="objectifs-p-dagogiques">Objectifs p&eacute;dagogiques</h2><p id="rc6anb_13">&Agrave; la fin de ce module, vous serez capable de :</p><ul class="list _bullet" id="rc6anb_14"><li class="list__item" id="rc6anb_15"><p id="rc6anb_21">Comprendre et appliquer le principe de l'architecture &quot;Single-Activity&quot;.</p></li><li class="list__item" id="rc6anb_16"><p id="rc6anb_22">Mettre en place et configurer le Navigation Component dans un projet.</p></li><li class="list__item" id="rc6anb_17"><p id="rc6anb_23">Cr&eacute;er un graphe de navigation visuel pour d&eacute;finir les &eacute;crans et les transitions.</p></li><li class="list__item" id="rc6anb_18"><p id="rc6anb_24">Utiliser un <code class="code" id="rc6anb_25">NavHostFragment</code> comme conteneur principal de l'UI.</p></li><li class="list__item" id="rc6anb_19"><p id="rc6anb_26">D&eacute;clencher des navigations entre Fragments &agrave; l'aide du <code class="code" id="rc6anb_27">NavController</code>.</p></li><li class="list__item" id="rc6anb_20"><p id="rc6anb_28">Passer des arguments entre les &eacute;crans de mani&egrave;re s&eacute;curis&eacute;e et &quot;type-safe&quot; avec Safe Args.</p></li></ul></section><section class="chapter"><h2 id="introduction" data-toc="introduction">Introduction</h2><p id="rc6anb_29">Imaginez que vous construisez une ville. L'ancienne m&eacute;thode de navigation Android, c'&eacute;tait comme construire des routes au fur et &agrave; mesure, sans plan d'urbanisme. Chaque carrefour &eacute;tait une d&eacute;cision complexe, et il &eacute;tait facile de cr&eacute;er des impasses ou de se perdre. C'&eacute;tait chaotique et difficile &agrave; maintenir.</p><p id="rc6anb_30">Le <span class="control" id="rc6anb_31">Navigation Component</span> est votre plan d'urbanisme centralis&eacute;. C'est un GPS intelligent pour votre application. Vous lui donnez une carte compl&egrave;te de tous les lieux (<code class="code" id="rc6anb_32">Fragments</code>) et de toutes les routes possibles (<code class="code" id="rc6anb_33">Actions</code>). Ensuite, pour aller d'un point A &agrave; un point B, il vous suffit de dire au GPS &quot;Emm&egrave;ne-moi &agrave; cette destination&quot;. Il s'occupe de tout le trajet, y compris le chemin du retour. C'est une approche qui rend la navigation visuelle, pr&eacute;visible et beaucoup plus simple &agrave; g&eacute;rer.</p></section><section class="chapter"><h2 id="notions-abord-es" data-toc="notions-abord-es">Notions abord&eacute;es</h2><ul class="list _bullet" id="rc6anb_34"><li class="list__item" id="rc6anb_36"><p id="rc6anb_39">Le principe de la &quot;Single-Activity App&quot;</p></li><li class="list__item" id="rc6anb_37"><p id="rc6anb_40">Les 3 Piliers du Navigation Component : Graph, NavHost, NavController</p></li><li class="list__item" id="rc6anb_38"><p id="rc6anb_41">Passer des Donn&eacute;es de mani&egrave;re S&eacute;curis&eacute;e avec <code class="code" id="rc6anb_42">Safe Args</code></p></li></ul></section><section class="chapter"><h2 id="le-principe-de-la-single-activity-app" data-toc="le-principe-de-la-single-activity-app">Le principe de la &quot;Single-Activity App&quot;</h2><section class="chapter"><h3 id="introduction-la-notion" data-toc="introduction-la-notion">Introduction &agrave; la notion</h3><p id="rc6anb_45">Pensez &agrave; votre application comme &agrave; un cadre photo num&eacute;rique (<code class="code" id="rc6anb_46">Activity</code>). Au lieu de changer de cadre &agrave; chaque fois que vous voulez montrer une nouvelle photo, vous gardez le m&ecirc;me cadre et vous changez simplement la photo (<code class="code" id="rc6anb_47">Fragment</code>) qui est affich&eacute;e &agrave; l'int&eacute;rieur. C'est plus simple, plus &eacute;conomique en ressources et plus fluide pour les transitions.</p></section><section class="chapter"><h3 id="explication-de-la-notion" data-toc="explication-de-la-notion">Explication de la notion</h3><p id="rc6anb_48">C'est l'architecture recommand&eacute;e par Google aujourd'hui. L'application enti&egrave;re est contenue dans une seule et unique <code class="code" id="rc6anb_52">MainActivity</code>. Le layout de cette Activity est tr&egrave;s simple : il contient principalement un conteneur sp&eacute;cial, le <code class="code" id="rc6anb_53">NavHostFragment</code>, qui occupe tout l'espace disponible. C'est ce conteneur qui va &quot;h&eacute;berger&quot; et &eacute;changer les Fragments en fonction de la navigation de l'utilisateur.</p><p id="rc6anb_49">L'Activity g&egrave;re le cadre global (comme une barre d'outils ou un menu de navigation en bas), et le <code class="code" id="rc6anb_54">NavHostFragment</code> g&egrave;re le contenu de l'&eacute;cran qui change.</p><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="358px" preserveAspectRatio="none" style="width:731px;height:358px;background:#FFFFFF;" version="1.1" viewBox="0 0 731 358" width="731px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="245" x="236.25" y="23.5352">Architecture "Single-Activity App"</text><!--cluster MainActivity--><g id="cluster_MainActivity"><path d="M193,43.4883 L284,43.4883 A3.75,3.75 0 0 1 286.5,45.9883 L293.5,65.9766 L722,65.9766 A2.5,2.5 0 0 1 724.5,68.4766 L724.5,348.9983 A2.5,2.5 0 0 1 722,351.4983 L193,351.4983 A2.5,2.5 0 0 1 190.5,348.9983 L190.5,45.9883 A2.5,2.5 0 0 1 193,43.4883 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="190.5" x2="293.5" y1="65.9766" y2="65.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="90" x="194.5" y="59.0234">MainActivity</text></g><!--cluster NavHostFragment--><g id="cluster_NavHostFragment"><path d="M217,86.4883 L347,86.4883 A3.75,3.75 0 0 1 349.5,88.9883 L356.5,108.9766 L364,108.9766 A2.5,2.5 0 0 1 366.5,111.4766 L366.5,324.9983 A2.5,2.5 0 0 1 364,327.4983 L217,327.4983 A2.5,2.5 0 0 1 214.5,324.9983 L214.5,88.9883 A2.5,2.5 0 0 1 217,86.4883 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="214.5" x2="356.5" y1="108.9766" y2="108.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="129" x="218.5" y="102.0234">NavHostFragment</text></g><!--entity Toolbar--><g id="elem_Toolbar"><rect fill="#F1F1F1" height="46.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="94" x="385.5" y="121.4883"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="459.5" y="126.4883"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="457.5" y="128.4883"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="457.5" y="132.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="400.5" y="155.0234">Toolbar</text></g><!--entity BottomNavigationView--><g id="elem_BottomNavigationView"><rect fill="#F1F1F1" height="46.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="194" x="514.5" y="121.4883"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="688.5" y="126.4883"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="686.5" y="128.4883"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="686.5" y="132.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154" x="529.5" y="155.0234">BottomNavigationView</text></g><!--entity FragA--><g id="elem_FragA"><rect fill="#F1F1F1" height="46.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="120" x="230.5" y="121.4883"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="330.5" y="126.4883"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="328.5" y="128.4883"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="328.5" y="132.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80" x="245.5" y="155.0234">Fragment A</text></g><!--entity FragB--><g id="elem_FragB"><rect fill="#F1F1F1" height="46.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="118" x="230.5" y="265.0083"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="328.5" y="270.0083"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="326.5" y="272.0083"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="326.5" y="276.0083"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="245.5" y="298.5434">Fragment B</text></g><g id="elem_GMN9"><path d="M6,101.4583 L6,188.011 A0,0 0 0 0 6,188.011 L146.48,188.011 L257.66,264.6183 L154.48,188.011 L175,188.011 A0,0 0 0 0 175,188.011 L175,111.4583 L165,101.4583 L6,101.4583 A0,0 0 0 0 6,101.4583 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M165,101.4583 L165,111.4583 L175,111.4583 L165,101.4583 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="12" y="119.0266">Le NavHostFragment</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="12" y="134.3372">remplace le Fragment A</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="12" y="149.6477">par le Fragment B</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="12" y="164.9583">suite &#224; une action</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="12" y="180.2688">de l'utilisateur.</text></g><!--link FragA to FragB--><g id="link_FragA_FragB"><path d="M290.34,168.4683 C290.15,194.8783 289.8932,232.1884 289.7032,258.5684 " fill="none" id="FragA-to-FragB" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="289.66,264.5683,293.7247,255.5973,289.696,259.5684,285.7249,255.5397,289.66,264.5683" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="290.97" y="231.5766">Navigation</text></g><!--SRC=[TP91JiCm44NtFiLNDbsL0x10IeKG2-W6nDvr9-a8rpREf81GxyAIdYCNOvBGb28XUVKz_lF-Z8N54yhiDYpafCs4ue53xMbUEk4ToplAb0fZPhWZk1Y40hKPANDmdAp7ck1dh7gkh2EqmfuRArfaadNFjbRBUylXw5VWmm1wNDoc62W8YiSO_ShcubnTH96uNTeTrrOuXYUcLoK1_h2yj8nDTrXHrbuagBilpU6fmKsszLQz6dqqmQZXRMpaU3Vod3K-Ng4iO4UNyj-QnLIpq9gzsVUpkkuE5GVEQ0CXan_u-r65AGtqyGzcDM4EhJ2VNus6kCGfVk-xZA8Htv9dfzgEJEW5YGcncXXqE7yogfXfcto_8DttATymbtoczGvDgzy1tUU0RztG7UEcV-ttmb1OeoSmtm00]--></g></svg></div></section></section><section class="chapter"><h2 id="les-3-piliers-du-navigation-component" data-toc="les-3-piliers-du-navigation-component">Les 3 Piliers du Navigation Component</h2><section class="chapter"><h3 id="introduction-la-notion_1" data-toc="introduction-la-notion_1">Introduction &agrave; la notion</h3><p id="rc6anb_58">Pour que notre GPS fonctionne, il lui faut trois choses essentielles et indissociables :</p><ol class="list _decimal" id="rc6anb_59" type="1"><li class="list__item" id="rc6anb_60"><p id="rc6anb_63">Une <span class="control" id="rc6anb_64">Carte</span> (<code class="code" id="rc6anb_65">Navigation Graph</code>) : Le plan de toutes les destinations et de toutes les routes.</p></li><li class="list__item" id="rc6anb_61"><p id="rc6anb_66">Un <span class="control" id="rc6anb_67">&Eacute;cran d'affichage</span> (<code class="code" id="rc6anb_68">NavHostFragment</code>) : La partie de l'interface qui montre o&ugrave; nous sommes actuellement.</p></li><li class="list__item" id="rc6anb_62"><p id="rc6anb_69">Un <span class="control" id="rc6anb_70">Conducteur</span> (<code class="code" id="rc6anb_71">NavController</code>) : L'entit&eacute; qui re&ccedil;oit l'ordre &quot;Aller &agrave;...&quot; et qui ex&eacute;cute le trajet.</p></li></ol></section><section class="chapter"><h3 id="explication-de-la-notion_1" data-toc="explication-de-la-notion_1">Explication de la notion</h3><p id="rc6anb_72"><span class="control" id="rc6anb_77">1. <code class="code" id="rc6anb_78">Navigation Graph</code> (<code class="code" id="rc6anb_79">nav_graph.xml</code>)</span> C'est une ressource XML qui est la source de v&eacute;rit&eacute; pour votre navigation. Elle contient :</p><ul class="list _bullet" id="rc6anb_73"><li class="list__item" id="rc6anb_80"><p id="rc6anb_83">Les <span class="control" id="rc6anb_84">Destinations</span>: Chaque &eacute;cran de votre application (g&eacute;n&eacute;ralement un <code class="code" id="rc6anb_85">Fragment</code>).</p></li><li class="list__item" id="rc6anb_81"><p id="rc6anb_86">Les <span class="control" id="rc6anb_87">Actions</span>: Les &quot;fl&egrave;ches&quot; qui repr&eacute;sentent les chemins possibles d'une destination &agrave; une autre.</p></li><li class="list__item" id="rc6anb_82"><p id="rc6anb_88">Les <span class="control" id="rc6anb_89">Arguments</span>: Les donn&eacute;es que vous pouvez passer d'une destination &agrave; l'autre. Android Studio fournit un &eacute;diteur visuel puissant pour concevoir ce graphe.</p></li></ul><p id="rc6anb_74"><span class="control" id="rc6anb_90">2. <code class="code" id="rc6anb_93">NavHostFragment</code></span> C'est un <code class="code" id="rc6anb_91">Fragment</code> sp&eacute;cial que vous placez dans le layout de votre <code class="code" id="rc6anb_92">MainActivity</code>. Son seul r&ocirc;le est d'agir comme une fen&ecirc;tre qui affiche la destination actuelle du graphe de navigation.</p><p id="rc6anb_75"><span class="control" id="rc6anb_94">3. <code class="code" id="rc6anb_97">NavController</code></span> C'est l'objet Kotlin que vous utilisez dans votre code pour piloter la navigation. Vous le r&eacute;cup&eacute;rez depuis n'importe quel Fragment h&eacute;berg&eacute; par le <code class="code" id="rc6anb_95">NavHost</code> et vous lui donnez des ordres, comme <code class="code" id="rc6anb_96">navController.navigate(...)</code>.</p><section class="procedure-steps"><h3 id="rc6anb_76" data-toc="rc6anb_76">Mise en place du Navigation Component</h3><ol class="list _decimal" id="rc6anb_98" type="1"><li class="list__item" id="rc6anb_99"><p id="rc6anb_102"><span class="control" id="rc6anb_105">Ajouter les d&eacute;pendances</span> dans <code class="code" id="rc6anb_106">build.gradle.kts (Module: app)</code>:</p><div class="code-block" data-lang="kotlin">
dependencies {
    // Assurez-vous d'utiliser les dernières versions
    val nav_version = &quot;2.7.7&quot; 

    // Dépendances fondamentales pour la navigation avec les Fragments
    implementation(&quot;androidx.navigation:navigation-fragment-ktx:$nav_version&quot;)
    implementation(&quot;androidx.navigation:navigation-ui-ktx:$nav_version&quot;)
}
</div><p id="rc6anb_104">N'oubliez pas de synchroniser Gradle.</p></li><li class="list__item" id="rc6anb_100"><p id="rc6anb_107"><span class="control" id="rc6anb_109">Cr&eacute;er le graphe de navigation</span>:</p><ul class="list _bullet" id="rc6anb_108"><li class="list__item" id="rc6anb_110"><p id="rc6anb_114">Clic droit sur le dossier <code class="code" id="rc6anb_115">res</code>-&gt; New -&gt; Android Resource File.</p></li><li class="list__item" id="rc6anb_111"><p id="rc6anb_116"><span class="control" id="rc6anb_117">File name:</span> <code class="code" id="rc6anb_118">nav_graph</code></p></li><li class="list__item" id="rc6anb_112"><p id="rc6anb_119"><span class="control" id="rc6anb_120">Resource type:</span> <code class="code" id="rc6anb_121">Navigation</code></p></li><li class="list__item" id="rc6anb_113"><p id="rc6anb_122">Cliquez sur OK.</p></li></ul></li><li class="list__item" id="rc6anb_101"><p id="rc6anb_123"><span class="control" id="rc6anb_125">Ajouter le <code class="code" id="rc6anb_126">NavHostFragment</code> &agrave; <code class="code" id="rc6anb_127">activity_main.xml</code></span>:</p><div class="code-block" data-lang="markup">
&lt;androidx.constraintlayout.widget.ConstraintLayout 
    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;&gt;

    &lt;androidx.fragment.app.FragmentContainerView
        android:id=&quot;@+id/nav_host_fragment&quot;
        android:name=&quot;androidx.navigation.fragment.NavHostFragment&quot;
        android:layout_width=&quot;0dp&quot;
        android:layout_height=&quot;0dp&quot;
        app:defaultNavHost=&quot;true&quot;
        app:navGraph=&quot;@navigation/nav_graph&quot;
        app:layout_constraintTop_toTopOf=&quot;parent&quot;
        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;
        app:layout_constraintStart_toStartOf=&quot;parent&quot;
        app:layout_constraintEnd_toEndOf=&quot;parent&quot;/&gt;

&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;
</div></li></ol><ol class="list _decimal"></ol></section></section><section class="chapter"><h3 id="exercice-1-navigation-entre-deux-fragments" data-toc="exercice-1-navigation-entre-deux-fragments">Exercice 1 : Navigation entre deux Fragments</h3><p id="rc6anb_128"><span class="control" id="rc6anb_130">&Eacute;nonc&eacute; :</span> Cr&eacute;ez une application avec un <code class="code" id="rc6anb_131">HomeFragment</code> et un <code class="code" id="rc6anb_132">SettingsFragment</code>. Le <code class="code" id="rc6anb_133">HomeFragment</code> contient un bouton qui, lorsqu'on clique dessus, navigue vers le <code class="code" id="rc6anb_134">SettingsFragment</code>.</p><section class="chapter"><div class="collapse"><div class="collapse__title"><h4 id="correction-exercice-1" data-toc="correction-exercice-1"><span class="control" id="rc6anb_138">Correction exercice 1</span></h4></div><div class="collapse__content"><ol class="list _decimal" id="rc6anb_136" type="1"><li class="list__item" id="rc6anb_139"><p id="rc6anb_145"><span class="control" id="rc6anb_146">Cr&eacute;ez les deux fragments</span> (<code class="code" id="rc6anb_147">HomeFragment</code>, <code class="code" id="rc6anb_148">SettingsFragment</code>) et leurs layouts. Le layout de <code class="code" id="rc6anb_149">HomeFragment</code> doit contenir un <code class="code" id="rc6anb_150">Button</code> avec l'id <code class="code" id="rc6anb_151">settingsButton</code>.</p></li><li class="list__item" id="rc6anb_140"><p id="rc6anb_152"><span class="control" id="rc6anb_153">Ouvrez <code class="code" id="rc6anb_154">res/navigation/nav_graph.xml</code></span> dans l'&eacute;diteur visuel (Design).</p></li><li class="list__item" id="rc6anb_141"><p id="rc6anb_155"><span class="control" id="rc6anb_156">Ajoutez les destinations :</span> Cliquez sur l'ic&ocirc;ne &quot;New Destination&quot; (un t&eacute;l&eacute;phone avec un <code class="code" id="rc6anb_157">+</code>) et ajoutez <code class="code" id="rc6anb_158">HomeFragment</code> et <code class="code" id="rc6anb_159">SettingsFragment</code>.</p></li><li class="list__item" id="rc6anb_142"><p id="rc6anb_160"><span class="control" id="rc6anb_161">D&eacute;finissez le point de d&eacute;part :</span> S&eacute;lectionnez <code class="code" id="rc6anb_162">HomeFragment</code> et cliquez sur l'ic&ocirc;ne &quot;Assign start destination&quot; ( une petite maison).</p></li><li class="list__item" id="rc6anb_143"><p id="rc6anb_163"><span class="control" id="rc6anb_164">Cr&eacute;ez une action :</span> Cliquez sur le cercle &agrave; droite de <code class="code" id="rc6anb_165">HomeFragment</code> et faites-le glisser jusqu'&agrave; <code class="code" id="rc6anb_166">SettingsFragment</code>. Une fl&egrave;che (une action) est cr&eacute;&eacute;e.</p></li><li class="list__item" id="rc6anb_144"><p id="rc6anb_167"><span class="control" id="rc6anb_170">Ajoutez le code de navigation dans <code class="code" id="rc6anb_171">HomeFragment.kt</code>:</span></p><div class="code-block" data-lang="kotlin">
// Dans HomeFragment.kt
override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
    super.onViewCreated(view, savedInstanceState)

    // On utilise la navigation pour trouver le NavController
    binding.settingsButton.setOnClickListener {
        // R.id.action_homeFragment_to_settingsFragment est l'ID de la flèche
        // que vous avez créée dans le graphe.
        findNavController().navigate(R.id.action_homeFragment_to_settingsFragment)
    }
}
</div><p id="rc6anb_169">(N'oubliez pas d'importer <code class="code" id="rc6anb_172">androidx.navigation.fragment.findNavController</code>)</p></li></ol></div></div></section></section></section><section class="chapter"><h2 id="passer-des-donn-es-de-mani-re-s-curis-e-avec-safe-args" data-toc="passer-des-donn-es-de-mani-re-s-curis-e-avec-safe-args">Passer des Donn&eacute;es de mani&egrave;re S&eacute;curis&eacute;e avec <code class="code" id="rc6anb_178">Safe Args</code></h2><section class="chapter"><h3 id="introduction-la-notion_2" data-toc="introduction-la-notion_2">Introduction &agrave; la notion</h3><p id="rc6anb_179">Imaginez que vous envoyez un colis. L'ancienne m&eacute;thode (<code class="code" id="rc6anb_181">Bundle</code>) revenait &agrave; prendre une bo&icirc;te en carton g&eacute;n&eacute;rique, y mettre votre objet, et &eacute;crire l'adresse et le contenu &agrave; la main sur une &eacute;tiquette. Vous pouviez faire des fautes de frappe, envoyer un objet fragile dans une mauvaise bo&icirc;te, ou vous tromper d'adresse.</p><p id="rc6anb_180"><code class="code" id="rc6anb_182">Safe Args</code> est un service d'exp&eacute;dition premium. Vous lui dites &quot;Je veux envoyer un livre &agrave; cette adresse&quot;. Il vous fournit la bo&icirc;te parfaite pour un livre, avec une &eacute;tiquette pr&eacute;-imprim&eacute;e, impossible &agrave; falsifier. Il garantit que le bon type d'objet arrive &agrave; la bonne destination.</p></section><section class="chapter"><h3 id="explication-de-la-notion_2" data-toc="explication-de-la-notion_2">Explication de la notion</h3><p id="rc6anb_183"><code class="code" id="rc6anb_187">Safe Args</code> est un plugin Gradle qui lit votre graphe de navigation et g&eacute;n&egrave;re des classes Kotlin simples et s&eacute;curis&eacute;es pour passer des donn&eacute;es entre les destinations.</p><p id="rc6anb_184"><span class="control" id="rc6anb_188">Avantages :</span></p><ul class="list _bullet" id="rc6anb_185"><li class="list__item" id="rc6anb_189"><p id="rc6anb_192"><span class="control" id="rc6anb_193">S&eacute;curit&eacute; des types :</span> Vous ne pouvez pas passer un <code class="code" id="rc6anb_194">Int</code> si la destination attend un <code class="code" id="rc6anb_195">String</code>. Le compilateur vous arr&ecirc;tera.</p></li><li class="list__item" id="rc6anb_190"><p id="rc6anb_196"><span class="control" id="rc6anb_197">S&eacute;curit&eacute; anti-null :</span> G&egrave;re correctement les arguments nullables et non-nullables.</p></li><li class="list__item" id="rc6anb_191"><p id="rc6anb_198"><span class="control" id="rc6anb_199">Code concis :</span> Fini les &quot;cl&eacute;s magiques&quot; (<code class="code" id="rc6anb_200">&quot;user_id_key&quot;</code>) et la manipulation manuelle du <code class="code" id="rc6anb_201">Bundle</code>.</p></li></ul><section class="procedure-steps"><h3 id="rc6anb_186" data-toc="rc6anb_186">Mettre en place Safe Args</h3><ol class="list _decimal" id="rc6anb_202" type="1"><li class="list__item" id="rc6anb_203"><p id="rc6anb_206"><span class="control" id="rc6anb_211">Ajouter le plugin Gradle :</span> Dans le fichier <code class="code" id="rc6anb_212">build.gradle.kts</code> <span class="control" id="rc6anb_213">au niveau du projet</span> (le premier) :</p><div class="code-block" data-lang="kotlin">
plugins {
    // ...
    id(&quot;androidx.navigation.safeargs.kotlin&quot;) version &quot;2.7.7&quot; apply false
}
</div><p id="rc6anb_208">Dans le fichier <code class="code" id="rc6anb_214">build.gradle.kts</code> <span class="control" id="rc6anb_215">au niveau du module</span> (<code class="code" id="rc6anb_216">:app</code>) :</p><div class="code-block" data-lang="kotlin">
plugins {
    // ...
    id(&quot;androidx.navigation.safeargs.kotlin&quot;)
}
</div><p id="rc6anb_210">Synchronisez Gradle.</p></li><li class="list__item" id="rc6anb_204"><p id="rc6anb_217"><span class="control" id="rc6anb_219">D&eacute;finir un argument dans le graphe de navigation :</span></p><ul class="list _bullet" id="rc6anb_218"><li class="list__item" id="rc6anb_220"><p id="rc6anb_224">Ouvrez <code class="code" id="rc6anb_225">nav_graph.xml</code> en mode Design.</p></li><li class="list__item" id="rc6anb_221"><p id="rc6anb_226">S&eacute;lectionnez la destination qui doit <span class="control" id="rc6anb_227">recevoir</span> l'argument (ex: <code class="code" id="rc6anb_228">DetailFragment</code>).</p></li><li class="list__item" id="rc6anb_222"><p id="rc6anb_229">Dans le panneau &quot;Attributes&quot; &agrave; droite, trouvez la section &quot;Arguments&quot; et cliquez sur le <code class="code" id="rc6anb_230">+</code>.</p></li><li class="list__item" id="rc6anb_223"><p id="rc6anb_231">Donnez un nom &agrave; l'argument (ex: <code class="code" id="rc6anb_232">itemId</code>), choisissez son type (<code class="code" id="rc6anb_233">String</code>, <code class="code" id="rc6anb_234">Integer</code>, etc.) et une valeur par d&eacute;faut si besoin.</p></li></ul></li><li class="list__item" id="rc6anb_205"><p id="rc6anb_235"><span class="control" id="rc6anb_237">Utiliser les classes g&eacute;n&eacute;r&eacute;es :</span></p><ul class="list _bullet" id="rc6anb_236"><li class="list__item" id="rc6anb_238"><p id="rc6anb_240"><span class="control" id="rc6anb_241">Pour envoyer :</span> Safe Args g&eacute;n&egrave;re une classe <code class="code" id="rc6anb_242">[NomDuFragmentOrigine]Directions</code> avec une m&eacute;thode pour chaque action.</p></li><li class="list__item" id="rc6anb_239"><p id="rc6anb_243"><span class="control" id="rc6anb_244">Pour recevoir :</span> Safe Args g&eacute;n&egrave;re une classe <code class="code" id="rc6anb_245">[NomDuFragmentDestination]Args</code>.</p></li></ul></li></ol><ol class="list _decimal"></ol></section></section><section class="chapter"><h3 id="exemple-de-code-passer-un-id" data-toc="exemple-de-code-passer-un-id">Exemple de code : Passer un ID</h3><p id="rc6anb_246"><span class="control" id="rc6anb_251">1. Dans <code class="code" id="rc6anb_252">nav_graph.xml</code>, on ajoute un argument <code class="code" id="rc6anb_253">itemId</code> de type <code class="code" id="rc6anb_254">String</code> &agrave; <code class="code" id="rc6anb_255">DetailFragment</code>.</span></p><p id="rc6anb_247"><span class="control" id="rc6anb_256">2. Dans <code class="code" id="rc6anb_257">HomeFragment.kt</code> (pour envoyer) :</span></p><div class="code-block" data-lang="kotlin">
// Dans HomeFragment.kt
binding.someButton.setOnClickListener {
    val idToSend = &quot;product-123&quot;

    // 1. On utilise la classe Directions générée pour créer l'action
    val action = HomeFragmentDirections.actionHomeFragmentToDetailFragment(
        itemId = idToSend
    )

    // 2. On navigue avec l'objet action
    findNavController().navigate(action)
}
</div><p id="rc6anb_249"><span class="control" id="rc6anb_258">3. Dans <code class="code" id="rc6anb_259">DetailFragment.kt</code> (pour recevoir) :</span></p><div class="code-block" data-lang="kotlin">
// Dans la classe DetailFragment.kt
import androidx.navigation.fragment.navArgs

class DetailFragment : Fragment() {

    // ... code du binding ...

    // On récupère les arguments en utilisant le délégué de propriété navArgs()
    private val args: DetailFragmentArgs by navArgs()

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)

        // On peut maintenant accéder à l'argument de manière sûre et typée
        val receivedId = args.itemId
        binding.detailTextView.text = &quot;Détails pour l'item ID : $receivedId&quot;
    }
}
</div></section><section class="chapter"><h3 id="exercice-2-personnaliser-l-cran-de-bienvenue" data-toc="exercice-2-personnaliser-l-cran-de-bienvenue">Exercice 2 : Personnaliser l'&eacute;cran de bienvenue</h3><p id="rc6anb_260"><span class="control" id="rc6anb_264">&Eacute;nonc&eacute; :</span> Cr&eacute;ez un <code class="code" id="rc6anb_265">LoginFragment</code> avec un <code class="code" id="rc6anb_266">EditText</code> pour le nom et un <code class="code" id="rc6anb_267">Button</code>. Cr&eacute;ez un <code class="code" id="rc6anb_268">WelcomeFragment</code> avec un <code class="code" id="rc6anb_269">TextView</code>. Lorsque l'utilisateur entre son nom et clique sur le bouton, l'application doit naviguer vers <code class="code" id="rc6anb_270">WelcomeFragment</code> et afficher &quot;Bienvenue, [Nom entr&eacute;] !&quot;. Utilisez Safe Args.</p><p id="rc6anb_261"><span class="control" id="rc6anb_271">Correction exercice 2</span></p><ol class="list _decimal" id="rc6anb_262" type="1"><li class="list__item" id="rc6anb_272"><p id="rc6anb_275"><span class="control" id="rc6anb_277">Configurez <code class="code" id="rc6anb_278">nav_graph.xml</code>:</span></p><ul class="list _bullet" id="rc6anb_276"><li class="list__item" id="rc6anb_279"><p id="rc6anb_283">Ajoutez <code class="code" id="rc6anb_284">LoginFragment</code> et <code class="code" id="rc6anb_285">WelcomeFragment</code>.</p></li><li class="list__item" id="rc6anb_280"><p id="rc6anb_286">D&eacute;finissez <code class="code" id="rc6anb_287">LoginFragment</code> comme destination de d&eacute;part.</p></li><li class="list__item" id="rc6anb_281"><p id="rc6anb_288">Cr&eacute;ez une action de <code class="code" id="rc6anb_289">LoginFragment</code> vers <code class="code" id="rc6anb_290">WelcomeFragment</code>.</p></li><li class="list__item" id="rc6anb_282"><p id="rc6anb_291">S&eacute;lectionnez <code class="code" id="rc6anb_292">WelcomeFragment</code> et ajoutez-lui un argument <code class="code" id="rc6anb_293">username</code> de type <code class="code" id="rc6anb_294">String</code>.</p></li></ul></li><li class="list__item" id="rc6anb_273"><p id="rc6anb_295"><span class="control" id="rc6anb_297">Code dans <code class="code" id="rc6anb_298">LoginFragment.kt</code>:</span></p><div class="code-block" data-lang="kotlin">
// Dans LoginFragment.kt
binding.loginButton.setOnClickListener {
    val enteredName = binding.nameEditText.text.toString()
    if (enteredName.isNotEmpty()) {
        val action = LoginFragmentDirections
            .actionLoginFragmentToWelcomeFragment(username = enteredName)
        findNavController().navigate(action)
    }
}
</div></li><li class="list__item" id="rc6anb_274"><p id="rc6anb_299"><span class="control" id="rc6anb_301">Code dans <code class="code" id="rc6anb_302">WelcomeFragment.kt</code>:</span></p><div class="code-block" data-lang="kotlin">
// Dans WelcomeFragment.kt
private val args: WelcomeFragmentArgs by navArgs()

override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
    super.onViewCreated(view, savedInstanceState)
    val name = args.username
    binding.welcomeTextView.text = &quot;Bienvenue, $name !&quot;
}
</div></li></ol></section></section><section class="chapter"><h2 id="tp-9-mini-application-de-t-ches" data-toc="tp-9-mini-application-de-t-ches">TP 9 : Mini Application de T&acirc;ches</h2><p id="rc6anb_303"><span class="control" id="rc6anb_305">Objectif :</span> Cr&eacute;er une application simple avec une liste de t&acirc;ches (<code class="code" id="rc6anb_306">ListFragment</code>) et un &eacute;cran pour ajouter une nouvelle t&acirc;che (<code class="code" id="rc6anb_307">AddFragment</code>). La nouvelle t&acirc;che doit &ecirc;tre pass&eacute;e en retour au <code class="code" id="rc6anb_308">ListFragment</code>.</p><section class="procedure-steps" id="rc6anb_304"><ol class="list _decimal" id="rc6anb_309" type="1"><li class="list__item" id="rc6anb_310"><p id="rc6anb_316"><span class="control" id="rc6anb_317">Cr&eacute;ez un projet Single-Activity</span> et configurez le Navigation Component et Safe Args.</p></li><li class="list__item" id="rc6anb_311"><p id="rc6anb_318"><span class="control" id="rc6anb_319">Cr&eacute;ez deux Fragments :</span> <code class="code" id="rc6anb_320">TaskListFragment</code> et <code class="code" id="rc6anb_321">AddTaskFragment</code>.</p></li><li class="list__item" id="rc6anb_312"><p id="rc6anb_322"><span class="control" id="rc6anb_324">Dans <code class="code" id="rc6anb_325">nav_graph.xml</code>:</span></p><ul class="list _bullet" id="rc6anb_323"><li class="list__item" id="rc6anb_326"><p id="rc6anb_329">Mettez <code class="code" id="rc6anb_330">TaskListFragment</code> comme destination de d&eacute;part.</p></li><li class="list__item" id="rc6anb_327"><p id="rc6anb_331">Cr&eacute;ez une action de <code class="code" id="rc6anb_332">TaskListFragment</code> vers <code class="code" id="rc6anb_333">AddTaskFragment</code>.</p></li><li class="list__item" id="rc6anb_328"><p id="rc6anb_334">Cr&eacute;ez une action de <code class="code" id="rc6anb_335">AddTaskFragment</code> vers <code class="code" id="rc6anb_336">TaskListFragment</code> (pour revenir apr&egrave;s l'ajout).</p></li></ul></li><li class="list__item" id="rc6anb_313"><p id="rc6anb_337"><span class="control" id="rc6anb_339"><code class="code" id="rc6anb_340">TaskListFragment</code>:</span></p><ul class="list _bullet" id="rc6anb_338"><li class="list__item" id="rc6anb_341"><p id="rc6anb_343">Affichez une liste de t&acirc;ches (pour commencer, une liste statique) dans un <code class="code" id="rc6anb_344">RecyclerView</code>.</p></li><li class="list__item" id="rc6anb_342"><p id="rc6anb_345">Ajoutez un bouton flottant (Floating Action Button) qui d&eacute;clenche la navigation vers <code class="code" id="rc6anb_346">AddTaskFragment</code>.</p></li></ul></li><li class="list__item" id="rc6anb_314"><p id="rc6anb_347"><span class="control" id="rc6anb_350"><code class="code" id="rc6anb_351">AddTaskFragment</code>:</span></p><ul class="list _bullet" id="rc6anb_348"><li class="list__item" id="rc6anb_352"><p id="rc6anb_354">Contient un <code class="code" id="rc6anb_355">EditText</code> pour le titre de la t&acirc;che et un <code class="code" id="rc6anb_356">Button</code> &quot;Ajouter&quot;.</p></li><li class="list__item" id="rc6anb_353"><p id="rc6anb_357">Quand on clique sur &quot;Ajouter&quot;, on ne navigue pas simplement en arri&egrave;re. Il faut <span class="control" id="rc6anb_358">retourner le r&eacute;sultat</span>. Pour cela, on utilise le <code class="code" id="rc6anb_359">previousBackStackEntry</code>:</p></li></ul><div class="code-block" data-lang="kotlin">
binding.addButton.setOnClickListener {
    val taskTitle = binding.taskEditText.text.toString()
    // On place le résultat dans un &quot;SavedStateHandle&quot;
    findNavController().previousBackStackEntry?.savedStateHandle?.set(
        &quot;new_task_key&quot;, 
        taskTitle
    )
    // On revient en arrière
    findNavController().popBackStack()
}
</div></li><li class="list__item" id="rc6anb_315"><p id="rc6anb_360"><span class="control" id="rc6anb_364">De retour dans <code class="code" id="rc6anb_365">TaskListFragment</code>:</span></p><ul class="list _bullet" id="rc6anb_361"><li class="list__item" id="rc6anb_366"><p id="rc6anb_367">Dans <code class="code" id="rc6anb_368">onViewCreated</code>, observez le r&eacute;sultat de la pile de retour :</p></li></ul><div class="code-block" data-lang="kotlin">
val navBackStackEntry = findNavController().currentBackStackEntry!!
val observer = LifecycleEventObserver { _, event -&gt;
    if (event == Lifecycle.Event.ON_RESUME
        &amp;&amp; navBackStackEntry.savedStateHandle.contains(&quot;new_task_key&quot;)) {
        val taskTitle = navBackStackEntry.savedStateHandle
            .get&lt;String&gt;(&quot;new_task_key&quot;)
        // Faites quelque chose avec la nouvelle tâche...
        // Ajoutez-la à votre liste et notifiez l'adapter.
        // N'oubliez pas de retirer la clé pour ne pas la traiter à nouveau
        navBackStackEntry.savedStateHandle.remove&lt;String&gt;(&quot;new_task_key&quot;)
    }
}
navBackStackEntry.lifecycle.addObserver(observer)
// Assurez-vous de retirer l'observer dans onDestroyView
viewLifecycleOwner.lifecycle.addObserver(LifecycleEventObserver { _, event -&gt;
    if (event == Lifecycle.Event.ON_DESTROY) {
        navBackStackEntry.lifecycle.removeObserver(observer)
    }
})
</div><aside class="prompt" data-type="note" data-title="" id="rc6anb_363"><p>Passer des r&eacute;sultats en retour est un cas d'usage plus avanc&eacute;, mais fondamental. C'est la mani&egrave;re moderne de faire ce qui &eacute;tait autrefois g&eacute;r&eacute; par `onActivityResult`.</p></aside></li></ol><ol class="list _decimal"></ol></section></section><section class="chapter"><div class="collapse"><div class="collapse__title"><h2 id="correction-du-tp-9" data-toc="correction-du-tp-9">Correction du TP 9</h2></div><div class="collapse__content"><section class="chapter"><h3 id="tape-1-configuration-du-projet" data-toc="tape-1-configuration-du-projet">&Eacute;tape 1 : Configuration du Projet</h3><ol class="list _decimal" id="rc6anb_374" type="1"><li class="list__item" id="rc6anb_376"><p id="rc6anb_380"><span class="control" id="rc6anb_381">Cr&eacute;ez un projet &quot;Empty Views Activity&quot;</span>.</p></li><li class="list__item" id="rc6anb_377"><p id="rc6anb_382"><span class="control" id="rc6anb_384">Ajoutez les d&eacute;pendances</span> n&eacute;cessaires dans votre fichier <code class="code" id="rc6anb_385">build.gradle.kts</code> (Module).</p><div class="code-block" data-lang="kotlin">
// Pour le Navigation Component
implementation(&quot;androidx.navigation:navigation-fragment-ktx:2.7.7&quot;)
implementation(&quot;androidx.navigation:navigation-ui-ktx:2.7.7&quot;)

// (View Binding est généralement déjà activé, sinon ajoutez-le)
// buildFeatures {
//     viewBinding = true
// }
</div></li><li class="list__item" id="rc6anb_378"><p id="rc6anb_386"><span class="control" id="rc6anb_388">Ajoutez le plugin Safe Args</span> dans votre fichier <code class="code" id="rc6anb_389">build.gradle.kts</code> (Project <code class="code" id="rc6anb_390">build.gradle.kts</code> <span class="control" id="rc6anb_391">au niveau du projet</span>) et (Module <code class="code" id="rc6anb_392">build.gradle.kts</code> <span class="control" id="rc6anb_393">au niveau du module</span>).</p><ul class="list _bullet" id="rc6anb_387"><li class="list__item" id="rc6anb_394"><p id="rc6anb_396"><span class="control" id="rc6anb_398">Fichier du projet :</span></p><div class="code-block" data-lang="kotlin">
plugins {
    // ...
    id(&quot;androidx.navigation.safeargs.kotlin&quot;) version &quot;2.7.7&quot; apply false
}
</div></li><li class="list__item" id="rc6anb_395"><p id="rc6anb_399"><span class="control" id="rc6anb_401">Fichier du module :</span></p><div class="code-block" data-lang="kotlin">
plugins {
    // ...
    id(&quot;androidx.navigation.safeargs.kotlin&quot;)
}
</div></li></ul></li><li class="list__item" id="rc6anb_379"><p id="rc6anb_402">Synchronisez votre projet avec les fichiers Gradle.</p></li></ol></section><section class="chapter"><h3 id="tape-2-3-cr-ation-des-fragments-et-du-graphe-de-navigation" data-toc="tape-2-3-cr-ation-des-fragments-et-du-graphe-de-navigation">&Eacute;tape 2 &amp; 3 : Cr&eacute;ation des Fragments et du Graphe de Navigation</h3><ol class="list _decimal" id="rc6anb_403" type="1"><li class="list__item" id="rc6anb_406"><p id="rc6anb_409">Cr&eacute;ez les fichiers de layout : <code class="code" id="rc6anb_410">fragment_task_list.xml</code> et <code class="code" id="rc6anb_411">fragment_add_task.xml</code>.</p></li><li class="list__item" id="rc6anb_407"><p id="rc6anb_412">Cr&eacute;ez les classes Kotlin : <code class="code" id="rc6anb_413">TaskListFragment.kt</code> et <code class="code" id="rc6anb_414">AddTaskFragment.kt</code>.</p></li><li class="list__item" id="rc6anb_408"><p id="rc6anb_415">Cr&eacute;ez le graphe de navigation : <code class="code" id="rc6anb_416">res/navigation/nav_graph.xml</code>.</p></li></ol><section class="chapter"><h4 id="res-navigation-nav-graph-xml" data-toc="res-navigation-nav-graph-xml"><code class="code" id="rc6anb_420">res/navigation/nav_graph.xml</code></h4><div class="code-block" data-lang="markup">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;navigation xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:id=&quot;@+id/nav_graph&quot;
    app:startDestination=&quot;@id/taskListFragment&quot;&gt;

    &lt;fragment
        android:id=&quot;@+id/taskListFragment&quot;
        android:name=&quot;com.example.yourapplication.TaskListFragment&quot;
        android:label=&quot;Liste des Tâches&quot;
        tools:layout=&quot;@layout/fragment_task_list&quot; &gt;
        &lt;action
            android:id=&quot;@+id/action_taskListFragment_to_addTaskFragment&quot;
            app:destination=&quot;@id/addTaskFragment&quot; /&gt;
    &lt;/fragment&gt;

    &lt;fragment
        android:id=&quot;@+id/addTaskFragment&quot;
        android:name=&quot;com.example.yourapplication.AddTaskFragment&quot;
        android:label=&quot;Ajouter une Tâche&quot;
        tools:layout=&quot;@layout/fragment_add_task&quot; /&gt;
&lt;/navigation&gt;
</div><p id="rc6anb_419"><span class="emphasis" id="rc6anb_421">Note :</span> L'&eacute;nonc&eacute; mentionne une action de <code class="code" id="rc6anb_422">AddTaskFragment</code> vers <code class="code" id="rc6anb_423">TaskListFragment</code>. Ce n'est pas n&eacute;cessaire car nous utiliserons <code class="code" id="rc6anb_424">popBackStack()</code> (revenir en arri&egrave;re), ce qui est la pratique correcte.</p></section><section class="chapter"><h4 id="mainactivity-kt-et-activity-main-xml" data-toc="mainactivity-kt-et-activity-main-xml"><code class="code" id="rc6anb_430">MainActivity.kt</code> et <code class="code" id="rc6anb_431">activity_main.xml</code></h4><p id="rc6anb_426">Assurez-vous que votre activit&eacute; principale h&eacute;berge le <code class="code" id="rc6anb_432">NavHostFragment</code>.</p><p id="rc6anb_427"><span class="control" id="rc6anb_433"><code class="code" id="rc6anb_434">activity_main.xml</code></span></p><div class="code-block" data-lang="markup">
&lt;androidx.fragment.app.FragmentContainerView
    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
    android:id=&quot;@+id/nav_host_fragment&quot;
    android:name=&quot;androidx.navigation.fragment.NavHostFragment&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    app:defaultNavHost=&quot;true&quot;
    app:navGraph=&quot;@navigation/nav_graph&quot; /&gt;
</div></section></section><section class="chapter"><h3 id="tape-4-tasklistfragment-affichage-de-la-liste" data-toc="tape-4-tasklistfragment-affichage-de-la-liste">&Eacute;tape 4 : <code class="code" id="rc6anb_438">TaskListFragment</code> (Affichage de la liste)</h3><section class="chapter"><h4 id="pr-requis-todo-kt-item-todo-xml-todoadapter-kt" data-toc="pr-requis-todo-kt-item-todo-xml-todoadapter-kt">Pr&eacute;requis : <code class="code" id="rc6anb_447">Todo.kt</code>, <code class="code" id="rc6anb_448">item_todo.xml</code>, <code class="code" id="rc6anb_449">TodoAdapter.kt</code></h4><p id="rc6anb_440">Ces fichiers sont standards pour un RecyclerView.</p><p id="rc6anb_441"><span class="control" id="rc6anb_450"><code class="code" id="rc6anb_451">Todo.kt</code></span></p><div class="code-block" data-lang="kotlin">
data class Todo(val title: String)
</div><p id="rc6anb_443"><span class="control" id="rc6anb_452"><code class="code" id="rc6anb_453">item_todo.xml</code></span></p><div class="code-block" data-lang="markup">
&lt;TextView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:id=&quot;@+id/todoTitleTextView&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;wrap_content&quot;
    android:padding=&quot;16dp&quot;
    android:textSize=&quot;18sp&quot; /&gt;
</div><p id="rc6anb_445"><span class="control" id="rc6anb_454"><code class="code" id="rc6anb_456">TodoAdapter.kt</code></span> (Notez qu'il prend une <code class="code" id="rc6anb_455">MutableList</code>)</p><div class="code-block" data-lang="kotlin">
import android.view.LayoutInflater
import android.view.ViewGroup
import androidx.recyclerview.widget.RecyclerView
import com.example.yourapplication.databinding.ItemTodoBinding

class TodoAdapter(private val todos: MutableList&lt;Todo&gt;) : RecyclerView.Adapter&lt;TodoAdapter.TodoViewHolder&gt;() {

    inner class TodoViewHolder(val binding: ItemTodoBinding) : RecyclerView.ViewHolder(binding.root)

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): TodoViewHolder {
        val binding = ItemTodoBinding.inflate(LayoutInflater.from(parent.context), parent, false)
        return TodoViewHolder(binding)
    }

    override fun onBindViewHolder(holder: TodoViewHolder, position: Int) {
        holder.binding.todoTitleTextView.text = todos[position].title
    }

    override fun getItemCount() = todos.size

    // Fonction pour ajouter une tâche et notifier l'adapter
    fun addTask(todo: Todo) {
        todos.add(todo)
        notifyItemInserted(todos.size - 1)
    }
}
</div></section><section class="chapter"><h4 id="fragment-task-list-xml" data-toc="fragment-task-list-xml"><code class="code" id="rc6anb_460">fragment_task_list.xml</code></h4><div class="code-block" data-lang="markup">
&lt;androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    tools:context=&quot;.TaskListFragment&quot;&gt;

    &lt;androidx.recyclerview.widget.RecyclerView
        android:id=&quot;@+id/recyclerView&quot;
        android:layout_width=&quot;0dp&quot;
        android:layout_height=&quot;0dp&quot;
        app:layout_constraintTop_toTopOf=&quot;parent&quot;
        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;
        app:layout_constraintStart_toStartOf=&quot;parent&quot;
        app:layout_constraintEnd_toEndOf=&quot;parent&quot;
        tools:listitem=&quot;@layout/item_todo&quot;/&gt;

    &lt;com.google.android.material.floatingactionbutton.FloatingActionButton
        android:id=&quot;@+id/fabAddTask&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_margin=&quot;16dp&quot;
        app:srcCompat=&quot;@android:drawable/ic_input_add&quot;
        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;
        app:layout_constraintEnd_toEndOf=&quot;parent&quot;
        android:contentDescription=&quot;Ajouter une tâche&quot; /&gt;

&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;
</div></section></section><section class="chapter"><h3 id="tape-5-addtaskfragment-envoi-du-r-sultat" data-toc="tape-5-addtaskfragment-envoi-du-r-sultat">&Eacute;tape 5 : <code class="code" id="rc6anb_464">AddTaskFragment</code> (Envoi du r&eacute;sultat)</h3><section class="chapter"><h4 id="fragment-add-task-xml" data-toc="fragment-add-task-xml"><code class="code" id="rc6anb_467">fragment_add_task.xml</code></h4><div class="code-block" data-lang="markup">
&lt;LinearLayout
    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    android:orientation=&quot;vertical&quot;
    android:padding=&quot;16dp&quot;
    android:gravity=&quot;center&quot;
    tools:context=&quot;.AddTaskFragment&quot;&gt;

    &lt;EditText
        android:id=&quot;@+id/taskEditText&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:hint=&quot;Titre de la tâche&quot;
        android:inputType=&quot;textCapSentences&quot;/&gt;

    &lt;Button
        android:id=&quot;@+id/addButton&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_marginTop=&quot;16dp&quot;
        android:text=&quot;Ajouter&quot;/&gt;
&lt;/LinearLayout&gt;
</div></section><section class="chapter"><h4 id="addtaskfragment-kt" data-toc="addtaskfragment-kt"><code class="code" id="rc6anb_472">AddTaskFragment.kt</code></h4><div class="code-block" data-lang="kotlin">
import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.fragment.app.Fragment
import androidx.navigation.fragment.findNavController
import com.example.yourapplication.databinding.FragmentAddTaskBinding

class AddTaskFragment : Fragment() {

    private var _binding: FragmentAddTaskBinding? = null
    private val binding get() = _binding!!

    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View {
        _binding = FragmentAddTaskBinding.inflate(inflater, container, false)
        return binding.root
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)

        binding.addButton.setOnClickListener {
            val taskTitle = binding.taskEditText.text.toString().trim()
            if (taskTitle.isNotEmpty()) {
                // On utilise la clé &quot;new_task_key&quot; pour envoyer le résultat en retour
                findNavController().previousBackStackEntry?.savedStateHandle?.set(
                    &quot;new_task_key&quot;,
                    taskTitle
                )
                // On revient à l'écran précédent
                findNavController().popBackStack()
            }
        }
    }

    override fun onDestroyView() {
        super.onDestroyView()
        _binding = null
    }
}
</div><p id="rc6anb_470"><span class="control" id="rc6anb_473">Explication cl&eacute; :</span> <code class="code" id="rc6anb_474">findNavController().previousBackStackEntry</code> cible le Fragment <span class="emphasis" id="rc6anb_475">pr&eacute;c&eacute;dent</span> dans la pile de navigation (ici, <code class="code" id="rc6anb_476">TaskListFragment</code>). Son <code class="code" id="rc6anb_477">savedStateHandle</code> est une sorte de conteneur de donn&eacute;es qui survit aux changements de configuration. On y place notre r&eacute;sultat avant de revenir en arri&egrave;re.</p></section></section><section class="chapter"><h3 id="tape-6-tasklistfragment-r-ception-du-r-sultat" data-toc="tape-6-tasklistfragment-r-ception-du-r-sultat">&Eacute;tape 6 : <code class="code" id="rc6anb_481">TaskListFragment</code> (R&eacute;ception du r&eacute;sultat)</h3><p id="rc6anb_479">C'est la partie la plus complexe, mais aussi la plus puissante.</p><section class="chapter"><h4 id="tasklistfragment-kt-version-compl-te-et-corrig-e" data-toc="tasklistfragment-kt-version-compl-te-et-corrig-e"><code class="code" id="rc6anb_487">TaskListFragment.kt</code> (Version Compl&egrave;te et Corrig&eacute;e)</h4><div class="code-block" data-lang="kotlin">
import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.fragment.app.Fragment
import androidx.lifecycle.Lifecycle
import androidx.lifecycle.LifecycleEventObserver
import androidx.navigation.fragment.findNavController
import androidx.recyclerview.widget.LinearLayoutManager
import com.example.yourapplication.databinding.FragmentTaskListBinding

class TaskListFragment : Fragment() {

    private var _binding: FragmentTaskListBinding? = null
    private val binding get() = _binding!!

    private lateinit var todoAdapter: TodoAdapter
    private val todoList = mutableListOf(Todo(&quot;Tâche initiale 1&quot;), Todo(&quot;Tâche initiale 2&quot;))

    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View {
        _binding = FragmentTaskListBinding.inflate(inflater, container, false)
        return binding.root
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)

        // Configuration initiale du RecyclerView
        todoAdapter = TodoAdapter(todoList)
        binding.recyclerView.apply {
            adapter = todoAdapter
            layoutManager = LinearLayoutManager(requireContext())
        }

        // Navigation vers l'écran d'ajout
        binding.fabAddTask.setOnClickListener {
            findNavController().navigate(R.id.action_taskListFragment_to_addTaskFragment)
        }

        // --- PARTIE CRUCIALE : ÉCOUTER LE RÉSULTAT ---
        // On récupère l'entrée actuelle dans la pile de navigation.
        val navBackStackEntry = findNavController().currentBackStackEntry!!

        val observer = LifecycleEventObserver { _, event -&gt;
            // On vérifie que le fragment est revenu à l'état RESUMED (visible et interactif)
            if (event == Lifecycle.Event.ON_RESUME
                &amp;&amp; navBackStackEntry.savedStateHandle.contains(&quot;new_task_key&quot;)) {

                // On récupère la donnée
                val taskTitle = navBackStackEntry.savedStateHandle.get&lt;String&gt;(&quot;new_task_key&quot;)

                // On s'assure qu'elle n'est pas nulle
                taskTitle?.let {
                    // On crée la nouvelle tâche et on l'ajoute via la méthode de l'adapter
                    val newTodo = Todo(it)
                    todoAdapter.addTask(newTodo)
                    binding.recyclerView.scrollToPosition(todoList.size - 1)
                }

                // Très important : on retire la clé pour que le code ne se déclenche pas à nouveau
                // lors d'un futur événement ON_RESUME (ex: rotation de l'écran).
                navBackStackEntry.savedStateHandle.remove&lt;String&gt;(&quot;new_task_key&quot;)
            }
        }
        
        // On attache l'observer au cycle de vie de notre backStackEntry.
        navBackStackEntry.lifecycle.addObserver(observer)

        // On s'assure de nettoyer l'observer quand la vue du fragment est détruite
        // pour éviter les fuites de mémoire.
        viewLifecycleOwner.lifecycle.addObserver(LifecycleEventObserver { _, event -&gt;
            if (event == Lifecycle.Event.ON_DESTROY) {
                navBackStackEntry.lifecycle.removeObserver(observer)
            }
        })
    }

    override fun onDestroyView() {
        super.onDestroyView()
        _binding = null
    }
}
</div><p id="rc6anb_484"><span class="control" id="rc6anb_488">Explication de la logique de r&eacute;ception :</span></p><ol class="list _decimal" id="rc6anb_485" type="1"><li class="list__item" id="rc6anb_489"><p id="rc6anb_497"><span class="control" id="rc6anb_498"><code class="code" id="rc6anb_499">findNavController().currentBackStackEntry!!</code></span>: On obtient une r&eacute;f&eacute;rence &agrave; notre propre &eacute;tat dans la pile de navigation. C'est sur cet &eacute;tat que nous allons &eacute;couter les changements.</p></li><li class="list__item" id="rc6anb_490"><p id="rc6anb_500"><span class="control" id="rc6anb_501"><code class="code" id="rc6anb_502">LifecycleEventObserver</code></span>: C'est un &eacute;couteur g&eacute;n&eacute;rique d'&eacute;v&eacute;nements de cycle de vie. On s'en sert pour d&eacute;clencher notre code au bon moment.</p></li><li class="list__item" id="rc6anb_491"><p id="rc6anb_503"><span class="control" id="rc6anb_504"><code class="code" id="rc6anb_508">if (event == Lifecycle.Event.ON_RESUME ...)</code></span>: C'est la condition la plus importante. On ne veut traiter le r&eacute;sultat que lorsque notre fragment (<code class="code" id="rc6anb_505">TaskListFragment</code>) redevient visible et actif apr&egrave;s &ecirc;tre revenu de <code class="code" id="rc6anb_506">AddTaskFragment</code>. L'&eacute;v&eacute;nement <code class="code" id="rc6anb_507">ON_RESUME</code> est parfait pour cela.</p></li><li class="list__item" id="rc6anb_492"><p id="rc6anb_509"><span class="control" id="rc6anb_510"><code class="code" id="rc6anb_511">savedStateHandle.contains(&quot;new_task_key&quot;)</code></span>: On v&eacute;rifie si un r&eacute;sultat avec notre cl&eacute; a bien &eacute;t&eacute; d&eacute;pos&eacute;.</p></li><li class="list__item" id="rc6anb_493"><p id="rc6anb_512"><span class="control" id="rc6anb_513"><code class="code" id="rc6anb_514">get&lt;String&gt;(&quot;new_task_key&quot;)</code></span>: On r&eacute;cup&egrave;re la valeur.</p></li><li class="list__item" id="rc6anb_494"><p id="rc6anb_515"><span class="control" id="rc6anb_516"><code class="code" id="rc6anb_520">remove&lt;String&gt;(&quot;new_task_key&quot;)</code></span>: C'est <span class="control" id="rc6anb_517">essentiel</span>. Une fois le r&eacute;sultat trait&eacute;, on le supprime du <code class="code" id="rc6anb_518">savedStateHandle</code>. Sinon, &agrave; chaque fois que le fragment passera par <code class="code" id="rc6anb_519">ON_RESUME</code> (par exemple lors d'une rotation d'&eacute;cran), le code se d&eacute;clencherait &agrave; nouveau et ajouterait la m&ecirc;me t&acirc;che en boucle.</p></li><li class="list__item" id="rc6anb_495"><p id="rc6anb_521"><span class="control" id="rc6anb_522"><code class="code" id="rc6anb_523">navBackStackEntry.lifecycle.addObserver(observer)</code></span>: On attache notre &eacute;couteur.</p></li><li class="list__item" id="rc6anb_496"><p id="rc6anb_524"><span class="control" id="rc6anb_525">Nettoyage dans <code class="code" id="rc6anb_527">onDestroyView</code></span>: On d&eacute;tache l'&eacute;couteur pour &eacute;viter les fuites de m&eacute;moire. La r&eacute;f&eacute;rence au <code class="code" id="rc6anb_526">navBackStackEntry</code> peut vivre plus longtemps que la vue de notre fragment.</p></li></ol></section></section></div></div></section><section class="chapter"><h2 id="auto-valuation" data-toc="auto-valuation">Auto-&eacute;valuation</h2><p id="rc6anb_528"><span class="control" id="rc6anb_537">1. Dans le graphe de navigation, qu'est-ce qu'une &quot;action&quot; ? (QCM)</span></p><ul class="list _bullet" id="rc6anb_529"><li class="list__item" id="rc6anb_538"><p id="rc6anb_542">A) Un &eacute;cran de l'application, repr&eacute;sent&eacute; par un Fragment.</p></li><li class="list__item" id="rc6anb_539"><p id="rc6anb_543">B) Un lien logique entre deux destinations, qui repr&eacute;sente un chemin de navigation possible.</p></li><li class="list__item" id="rc6anb_540"><p id="rc6anb_544">C) Une fonction Kotlin qui est ex&eacute;cut&eacute;e lors d'un clic.</p></li><li class="list__item" id="rc6anb_541"><p id="rc6anb_545">D) Un argument pass&eacute; entre deux fragments.</p></li></ul><p id="rc6anb_530"><span class="control" id="rc6anb_546">2. Quel est l'avantage principal de Safe Args ? (QCM)</span></p><ul class="list _bullet" id="rc6anb_531"><li class="list__item" id="rc6anb_547"><p id="rc6anb_551">A) Il acc&eacute;l&egrave;re la vitesse de navigation entre les fragments.</p></li><li class="list__item" id="rc6anb_548"><p id="rc6anb_552">B) Il permet de passer des arguments sans &eacute;crire de code Kotlin.</p></li><li class="list__item" id="rc6anb_549"><p id="rc6anb_553">C) Il g&eacute;n&egrave;re du code qui garantit la s&eacute;curit&eacute; des types et &eacute;vite les erreurs de cl&eacute;s.</p></li><li class="list__item" id="rc6anb_550"><p id="rc6anb_554">D) Il compresse les donn&eacute;es pour qu'elles prennent moins de place.</p></li></ul><p id="rc6anb_532"><span class="control" id="rc6anb_555">3. Dans une architecture &quot;Single-Activity&quot;, o&ugrave; place-t-on le <code class="code" id="rc6anb_556">NavHostFragment</code>? (QCM)</span></p><ul class="list _bullet" id="rc6anb_533"><li class="list__item" id="rc6anb_557"><p id="rc6anb_561">A) Dans le fichier <code class="code" id="rc6anb_562">build.gradle.kts</code>.</p></li><li class="list__item" id="rc6anb_558"><p id="rc6anb_563">B) Dans le layout XML de chaque Fragment.</p></li><li class="list__item" id="rc6anb_559"><p id="rc6anb_564">C) Dans le fichier <code class="code" id="rc6anb_565">AndroidManifest.xml</code>.</p></li><li class="list__item" id="rc6anb_560"><p id="rc6anb_566">D) Dans le layout XML de la <code class="code" id="rc6anb_567">MainActivity</code>.</p></li></ul><p id="rc6anb_534"><span class="control" id="rc6anb_568">4. Expliquez le r&ocirc;le de chacun des trois piliers du Navigation Component (Graph, NavHost, NavController) en utilisant une analogie de votre choix. (Question ouverte)</span></p><p id="rc6anb_535"><span class="control" id="rc6anb_569">5. Quel probl&egrave;me Safe Args r&eacute;sout-il par rapport &agrave; la m&eacute;thode traditionnelle qui utilise un <code class="code" id="rc6anb_570">Bundle</code>? (Question ouverte)</span></p><section class="chapter"><div class="collapse"><div class="collapse__title"><h3 id="correction-de-l-auto-valuation" data-toc="correction-de-l-auto-valuation">Correction de l'auto-&eacute;valuation</h3></div><div class="collapse__content"><p id="rc6anb_571"><span class="control" id="rc6anb_582">1. Dans le graphe de navigation, qu'est-ce qu'une &quot;action&quot; ?</span></p><ul class="list _bullet" id="rc6anb_572"><li class="list__item" id="rc6anb_583"><p id="rc6anb_585"><span class="control" id="rc6anb_586">R&eacute;ponse : B) Un lien logique entre deux destinations, qui repr&eacute;sente un chemin de navigation possible.</span></p></li><li class="list__item" id="rc6anb_584"><p id="rc6anb_587"><span class="control" id="rc6anb_588">Justification :</span> Une action est la &quot;fl&egrave;che&quot; dans l'&eacute;diteur visuel. Elle a un ID unique et repr&eacute;sente la transition d'un point A &agrave; un point B. C'est cet ID que l'on utilise dans la m&eacute;thode <code class="code" id="rc6anb_589">navigate()</code>.</p></li></ul><p id="rc6anb_573"><span class="control" id="rc6anb_590">2. Quel est l'avantage principal de Safe Args ?</span></p><ul class="list _bullet" id="rc6anb_574"><li class="list__item" id="rc6anb_591"><p id="rc6anb_593"><span class="control" id="rc6anb_594">R&eacute;ponse : C) Il g&eacute;n&egrave;re du code qui garantit la s&eacute;curit&eacute; des types et &eacute;vite les erreurs de cl&eacute;s.</span></p></li><li class="list__item" id="rc6anb_592"><p id="rc6anb_595"><span class="control" id="rc6anb_596">Justification :</span> Safe Args &eacute;limine les &quot;magic strings&quot; (cl&eacute;s &eacute;crites en dur) et les casts manuels, qui sont des sources courantes de bugs et de crashs. Le compilateur v&eacute;rifie pour nous que les types de donn&eacute;es sont corrects.</p></li></ul><p id="rc6anb_575"><span class="control" id="rc6anb_597">3. O&ugrave; place-t-on le <code class="code" id="rc6anb_598">NavHostFragment</code>?</span></p><ul class="list _bullet" id="rc6anb_576"><li class="list__item" id="rc6anb_599"><p id="rc6anb_601"><span class="control" id="rc6anb_602">R&eacute;ponse : D) Dans le layout XML de la <code class="code" id="rc6anb_603">MainActivity</code>.</span></p></li><li class="list__item" id="rc6anb_600"><p id="rc6anb_604"><span class="control" id="rc6anb_605">Justification :</span> Le <code class="code" id="rc6anb_606">NavHostFragment</code> est le conteneur central qui vit dans l'Activity et qui est responsable d' afficher tous les autres fragments de l'application.</p></li></ul><p id="rc6anb_577"><span class="control" id="rc6anb_607">4. Expliquez le r&ocirc;le des trois piliers avec une analogie.</span></p><ul class="list _bullet" id="rc6anb_578"><li class="list__item" id="rc6anb_608"><p id="rc6anb_609"><span class="control" id="rc6anb_611">R&eacute;ponse type (analogie du voyage en train) :</span></p><ul class="list _bullet" id="rc6anb_610"><li class="list__item" id="rc6anb_612"><p id="rc6anb_615"><span class="control" id="rc6anb_616"><code class="code" id="rc6anb_617">Navigation Graph</code>:</span> C'est la carte compl&egrave;te du r&eacute;seau ferroviaire. Elle montre toutes les gares ( destinations) et toutes les voies ferr&eacute;es qui les relient (actions).</p></li><li class="list__item" id="rc6anb_613"><p id="rc6anb_618"><span class="control" id="rc6anb_619"><code class="code" id="rc6anb_620">NavHostFragment</code>:</span> C'est le panneau d'affichage principal dans la gare centrale. Il n'affiche qu'une seule information &agrave; la fois : le train actuellement &agrave; quai (le fragment courant).</p></li><li class="list__item" id="rc6anb_614"><p id="rc6anb_621"><span class="control" id="rc6anb_622"><code class="code" id="rc6anb_623">NavController</code>:</span> C'est l'aiguilleur. Quand on lui dit &quot;faites partir le train pour la gare B&quot;, il actionne les bons leviers pour que le train (la navigation) s'engage sur la bonne voie (l'action) d&eacute;finie sur la carte.</p></li></ul></li></ul><p id="rc6anb_579"><span class="control" id="rc6anb_624">5. Quel probl&egrave;me Safe Args r&eacute;sout-il par rapport &agrave; la m&eacute;thode traditionnelle qui utilise un <code class="code" id="rc6anb_625">Bundle</code>?</span></p><ul class="list _bullet" id="rc6anb_580"><li class="list__item" id="rc6anb_626"><p id="rc6anb_627"><span class="control" id="rc6anb_628">R&eacute;ponse type :</span> La m&eacute;thode traditionnelle avec un <code class="code" id="rc6anb_629">Bundle</code> oblige le d&eacute;veloppeur &agrave; manipuler des paires cl&eacute;-valeur. Le probl&egrave;me est que la cl&eacute; est une simple cha&icirc;ne de caract&egrave;res (<code class="code" id="rc6anb_630">String</code>). Si le fragment qui envoie utilise la cl&eacute; <code class="code" id="rc6anb_631">&quot;user_id&quot;</code> et le fragment qui re&ccedil;oit s'attend &agrave; <code class="code" id="rc6anb_632">&quot;userId&quot;</code>, le programme ne trouvera pas la valeur et cela cr&eacute;era un bug (potentiellement un crash) qui n'est d&eacute;tect&eacute; qu'&agrave; l'ex&eacute;cution. De plus, il n'y a aucune garantie de type ; il faut manuellement extraire la valeur et la caster, ce qui peut aussi causer un crash. Safe Args r&eacute;sout ces deux probl&egrave;mes en g&eacute;n&eacute;rant du code qui est v&eacute;rifi&eacute; <span class="control" id="rc6anb_633">&agrave; la compilation</span>.</p></li></ul></div></div></section></section><section class="chapter"><h2 id="conclusion-du-module" data-toc="conclusion-du-module">Conclusion du module</h2><p id="rc6anb_634">Vous avez maintenant ajout&eacute; une comp&eacute;tence architecturale majeure &agrave; votre arsenal. Vous savez comment structurer une application multi-&eacute;crans de mani&egrave;re propre, visuelle et robuste. Vous pouvez non seulement faire passer l'utilisateur d' un &eacute;cran &agrave; l'autre, mais aussi &eacute;changer des informations entre eux de mani&egrave;re s&eacute;curis&eacute;e.</p><p id="rc6anb_635">Votre application est maintenant bien structur&eacute;e, mais ses donn&eacute;es sont encore &eacute;ph&eacute;m&egrave;res. Elles n'existent qu'en m&eacute;moire. Dans la prochaine grande partie, nous allons nous attaquer &agrave; la <span class="control" id="rc6anb_636">Gestion des Donn&eacute;es</span>. Nous allons apprendre &agrave; sauvegarder des informations de mani&egrave;re permanente sur l'appareil et &agrave; communiquer avec des serveurs distants pour r&eacute;cup&eacute;rer des donn&eacute;es depuis Internet. C'est l'&eacute;tape qui rendra votre application vraiment dynamique et utile.</p></section><div class="last-modified">01 novembre 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="003-01-module-08.html" class="navigation-links__prev">Module 8 : Modulariser l'UI avec les Fragments</a><a href="004-partie-04.html" class="navigation-links__next">Partie 4 : Gestion des Donn&eacute;es</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>